(function(){"use strict";(function(e){try{if(typeof document<"u")if(window.location.href.includes("chrome-extension://")){const t=document.createElement("style");t.appendChild(document.createTextNode(e)),document.head.appendChild(t)}else{const t="__wps-translate-entry-content-css__";window[t]||(window[t]=[]),window[t].push(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})('@charset "UTF-8";.buy-sku[data-v-4db0bd4c]{display:flex;width:100%;flex-direction:column;gap:12px}.buy-sku .buy-sku-item[data-v-4db0bd4c]{min-height:78px;cursor:pointer;border:1px solid rgba(0,0,0,.1);border-radius:12px;padding:12px 16px 16px;position:relative;background-color:#fff}.buy-sku .buy-sku-item.selected[data-v-4db0bd4c]{border:1px solid transparent;border-radius:12px}[dir=ltr] .buy-sku .buy-sku-item.selected[data-v-4db0bd4c]{background:linear-gradient(#fff,#fff) padding-box,linear-gradient(91.47deg,#33c2ff,#2963ff) border-box}[dir=rtl] .buy-sku .buy-sku-item.selected[data-v-4db0bd4c]{background:linear-gradient(#fff,#fff) padding-box,linear-gradient(-91.47deg,#33c2ff,#2963ff) border-box}.buy-sku .permit-text[data-v-4db0bd4c]{min-height:24px;margin-bottom:4px;align-items:start}.buy-sku .permit-text .title[data-v-4db0bd4c]{display:flex;align-items:center;gap:8px;font-size:14px;line-height:20px}.buy-sku .permit-text .popular-tag[data-v-4db0bd4c]{white-space:nowrap;font-size:12px;line-height:16px;font-weight:600;color:#ff972f;background-color:#ffb22233;padding:4px 10px;border-radius:22px}[dir=ltr] .buy-sku .permit-text .popular-tag[data-v-4db0bd4c]{margin-left:8px}[dir=rtl] .buy-sku .permit-text .popular-tag[data-v-4db0bd4c]{margin-right:8px}.buy-sku .price-text[data-v-4db0bd4c]{min-height:16px}.buy-sku .price-text .price .price-value[data-v-4db0bd4c]{font-size:18px;line-height:22px;font-weight:600}.buy-sku .price-text .price .price-unit[data-v-4db0bd4c]{font-size:12px;line-height:16px}.buy-sku .price-text .price-total-text[data-v-4db0bd4c]{font-size:12px;line-height:16px;color:#0009}[dir=ltr] .buy-sku .price-text .price-total-text[data-v-4db0bd4c]{margin-left:8px}[dir=rtl] .buy-sku .price-text .price-total-text[data-v-4db0bd4c]{margin-right:8px}.buy-sku .skeleton .title[data-v-4db0bd4c]{width:20%;height:24px}.buy-sku .skeleton .price[data-v-4db0bd4c]{width:30%;height:20px}.buy-sku .skeleton .price-total-text[data-v-4db0bd4c]{width:40%;height:16px}.buy-dialog-overlay[data-v-7dcab905]{position:fixed;top:0;left:0;right:0;bottom:0;background:transparent;display:flex;align-items:center;justify-content:center;z-index:2147483647;-webkit-user-select:none;user-select:none;overflow:scroll;color:#000000e6}.buy-dialog-overlay.with-mask[data-v-7dcab905]{background:#0009}.buy-dialog[data-v-7dcab905]{position:relative;width:480px;border-radius:24px;box-shadow:0 12px 32px #00000014;padding:0;box-sizing:border-box}[dir=ltr] .buy-dialog[data-v-7dcab905]{background:linear-gradient(180deg,#e5faff,#fff 40%)}[dir=rtl] .buy-dialog[data-v-7dcab905]{background:linear-gradient(-180deg,#e5faff,#fff 40%)}.close-btn-wrapper[data-v-7dcab905]{position:absolute;top:16px;z-index:10;cursor:pointer}[dir=ltr] .close-btn-wrapper[data-v-7dcab905]{right:16px}[dir=rtl] .close-btn-wrapper[data-v-7dcab905]{left:16px}.logo-wrapper[data-v-7dcab905]{display:flex;justify-content:center;align-items:center;margin-top:40px;margin-bottom:12px}.dialog-content[data-v-7dcab905]{display:flex;flex-direction:column;align-items:center;width:100%;padding:0 40px 32px}.header-section[data-v-7dcab905]{text-align:center;display:flex;align-items:center}.limit-text[data-v-7dcab905]{font-size:14px;line-height:1.75}.limit-text .limit-text-prefix[data-v-7dcab905]:after{content:" "}.upgrade-text[data-v-7dcab905]{-webkit-text-fill-color:transparent}[dir=ltr] .upgrade-text[data-v-7dcab905]{background:linear-gradient(90deg,#33c2ff 30.25%,#2963ff 70.38%)}[dir=rtl] .upgrade-text[data-v-7dcab905]{background:linear-gradient(-90deg,#33c2ff 30.25%,#2963ff 70.38%)}[dir] .upgrade-text[data-v-7dcab905]{-webkit-background-clip:text;background-clip:text}.features-list[data-v-7dcab905]{margin-top:24px;display:flex;flex-direction:column;gap:12px}.feature-item[data-v-7dcab905]{display:flex;position:relative}.feature-main-icon[data-v-7dcab905]{width:24px;height:24px}[dir=ltr] .feature-main-icon[data-v-7dcab905]{margin-right:8px}[dir=rtl] .feature-main-icon[data-v-7dcab905]{margin-left:8px}.feature-text-group[data-v-7dcab905]{display:flex;flex-direction:column;gap:4px;flex:1}[dir=ltr] .feature-text-group[data-v-7dcab905]{margin-right:8px}[dir=rtl] .feature-text-group[data-v-7dcab905]{margin-left:8px}.feature-title-group[data-v-7dcab905]{display:flex;justify-content:space-between}.feature-title[data-v-7dcab905]{flex:1;font-size:14px;line-height:24px}.feature-desc[data-v-7dcab905]{font-size:12px;font-weight:400;line-height:1.75;color:#0009}.feature-right-icons[data-v-7dcab905]{display:flex;gap:8px;justify-content:end}[dir=ltr] .feature-right-icons[data-v-7dcab905]{margin-left:8px}[dir=rtl] .feature-right-icons[data-v-7dcab905]{margin-right:8px}.right-icon[data-v-7dcab905]{width:20px;height:20px}.subscription-section[data-v-7dcab905]{margin-top:24px;width:100%;padding:0 40px;box-sizing:border-box;display:flex;flex-direction:column;gap:12px}.subscription-option[data-v-7dcab905]{position:relative;width:100%;height:78px;border:1px solid rgba(0,0,0,.1);border-radius:12px;cursor:pointer;transition:all .2s;display:flex;align-items:center;padding:0 16px;box-sizing:border-box}.subscription-option.selected[data-v-7dcab905]{border:1px solid transparent}[dir=ltr] .subscription-option.selected[data-v-7dcab905]{background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#33c2ff,#2963ff) border-box}[dir=rtl] .subscription-option.selected[data-v-7dcab905]{background:linear-gradient(#fff,#fff) padding-box,linear-gradient(-135deg,#33c2ff,#2963ff) border-box}.subscription-option[data-v-7dcab905]:hover{border-color:#2962ff4d}.radio-button[data-v-7dcab905]{width:16px;height:16px;border:1px solid #C8C8C8;border-radius:50%;flex-shrink:0;display:flex;align-items:center;justify-content:center;background:#f7f7f7}.subscription-option.selected .radio-button[data-v-7dcab905]{border-color:#2962ff;background:#fff}.radio-inner[data-v-7dcab905]{width:8px;height:8px;border-radius:50%;background:#2962ff}.subscription-content[data-v-7dcab905]{flex:1;display:flex;align-items:center;position:relative}[dir=ltr] .subscription-content[data-v-7dcab905]{margin-left:24px}[dir=rtl] .subscription-content[data-v-7dcab905]{margin-right:24px}.subscription-label[data-v-7dcab905]{font-family:Inter;font-size:14px;font-weight:400;line-height:20px;min-width:54px}.save-badge[data-v-7dcab905]{position:absolute;top:50%;transform:translateY(-50%);background:#ffb22233;border-radius:22px;padding:4px 11px;font-family:Inter;font-size:12px;font-weight:600;line-height:16px;color:#ff972f;text-align:center}[dir=ltr] .save-badge[data-v-7dcab905]{right:0}[dir=rtl] .save-badge[data-v-7dcab905]{left:0}.price-info[data-v-7dcab905]{flex:1;display:flex;align-items:center;justify-content:space-between}[dir=ltr] .price-info[data-v-7dcab905]{margin-left:0}[dir=rtl] .price-info[data-v-7dcab905]{margin-right:0}.price-row[data-v-7dcab905]{display:flex;align-items:baseline;gap:4px}.price-amount[data-v-7dcab905]{font-family:Inter;font-size:18px;font-weight:600;line-height:22px}.price-unit[data-v-7dcab905]{font-family:Inter;font-size:12px;font-weight:400;line-height:16px}.total-spend[data-v-7dcab905]{font-family:Inter;font-size:12px;font-weight:400;line-height:16px;color:#0009}[dir=ltr] .total-spend[data-v-7dcab905]{text-align:right;margin-left:auto}[dir=rtl] .total-spend[data-v-7dcab905]{text-align:left;margin-right:auto}.footer-section[data-v-7dcab905]{margin-top:24px;width:100%;display:flex;flex-direction:column;align-items:center;gap:16px}.buy-button[data-v-7dcab905]{width:100%;min-height:52px;font-size:16px;line-height:24px;font-weight:600}.view-details[data-v-7dcab905]{font-size:14px;line-height:20px;color:#2962ff;cursor:pointer;text-decoration:underline;text-align:center}.continue-translate-dialog[data-v-7490fb5a]{position:fixed;z-index:2147483647;bottom:32px;width:348px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014;-webkit-user-select:none;user-select:none}[dir=ltr] .continue-translate-dialog[data-v-7490fb5a]{right:32px}[dir=rtl] .continue-translate-dialog[data-v-7490fb5a]{left:32px}.continue-translate-dialog .dialog-header[data-v-7490fb5a]{display:flex;gap:12px;align-items:center;margin-bottom:16px}.continue-translate-dialog .dialog-header .header-logo[data-v-7490fb5a]{display:flex;flex:1;align-items:center;gap:12px}.continue-translate-dialog .dialog-header .header-logo .logo-icon[data-v-7490fb5a]{height:24px;width:24px;border-radius:6px}.continue-translate-dialog .dialog-header .header-logo .logo-name[data-v-7490fb5a]{font-weight:600;font-size:16px;line-height:24px}.continue-translate-dialog .dialog-content[data-v-7490fb5a]{margin-bottom:20px}.continue-translate-dialog .dialog-content .description[data-v-7490fb5a]{font-size:14px;line-height:20px;color:#000000e6;margin:0 0 16px}.continue-translate-dialog .dialog-content .duration-selector[data-v-7490fb5a]{display:flex;align-items:center;justify-content:space-between;gap:16px}.continue-translate-dialog .dialog-content .duration-selector .duration-label[data-v-7490fb5a]{font-size:14px;font-weight:500;line-height:20px;color:#000}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a]{flex:1;min-width:160px;-webkit-user-select:none;user-select:none}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-input{border-radius:8px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-input{padding-left:12px}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-input{padding-right:12px}[dir=ltr] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-input .select-label{text-align:right}[dir=rtl] .continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-input .select-label{text-align:left}.continue-translate-dialog .dialog-content .duration-selector .duration-select[data-v-7490fb5a] .select-options{height:fit-content;border-radius:8px}.continue-translate-dialog .dialog-content .setting-item[data-v-7490fb5a]{display:flex;justify-content:space-between;align-items:center;margin-top:20px;line-height:16px;font-weight:400;gap:4px}.continue-translate-dialog .dialog-content .setting-item .setting-item-label[data-v-7490fb5a]{flex:1}.continue-translate-dialog .dialog-footer .confirm-btn[data-v-7490fb5a]{height:48px;border-radius:12px;font-size:16px;font-weight:600}.translate-error-exceed-limit-tip-container[data-v-0d6b1902]{width:300px;max-width:90vw}.hover-ball-onboarding-container[data-v-e0b307f8]{position:absolute;display:flex;flex-direction:column;bottom:-30px;border-radius:12px;background-color:#fff;width:300px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;transition:none}.hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{position:absolute;top:8px}[dir=ltr] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{right:8px}[dir=rtl] .hover-ball-onboarding-container .hover-ball-onboarding-close[data-v-e0b307f8]{left:8px}.hover-ball-onboarding-container .hover-ball-onboarding-image[data-v-e0b307f8]{height:180px;border-radius:12px 12px 0 0;background-repeat:no-repeat;background-position:center;background-size:contain}.hover-ball-onboarding-container .hover-ball-onboarding-content[data-v-e0b307f8]{margin:16px 20px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-title[data-v-e0b307f8]{font-weight:500;font-size:16px;line-height:24px;text-align:center;color:#000000e6}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-desc[data-v-e0b307f8]{font-weight:400;font-size:14px;line-height:22px;text-align:center;color:#333333e6;margin-top:8px}.hover-ball-onboarding-container .hover-ball-onboarding-content .hover-ball-onboarding-button[data-v-e0b307f8]{margin-top:24px}.onetap-login-tip[data-v-2a3e1960]{position:relative;min-width:320px;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;padding:20px 24px 8px;font-weight:400;font-size:14px;cursor:auto;text-shadow:none;box-shadow:0 12px 32px #00000014}.title[data-v-2a3e1960]{line-height:20px;color:#000000e6}.description[data-v-2a3e1960]{display:flex;align-items:center;margin-bottom:16px;line-height:20px;gap:4px}.description-text[data-v-2a3e1960]{color:#0009}.brand-container[data-v-2a3e1960]{display:flex;align-items:center;gap:4px}.brand-icon[data-v-2a3e1960]{width:16px;height:16px}.brand-text[data-v-2a3e1960]{color:#000000e6}.login-button[data-v-2a3e1960]{display:flex;align-items:center;border-radius:8px;padding:12px;gap:8px;cursor:pointer;white-space:nowrap;color:#000000e6}.login-button[data-v-2a3e1960]:hover{background:#f7f7f7}.login-button[data-v-2a3e1960]:active,.login-button.active[data-v-2a3e1960]{background:#e0e0e0}.login-button .login-button-text[data-v-2a3e1960]{flex:1}.login-button .login-button-icon[data-v-2a3e1960]{width:24px;height:24px}.google-login[data-v-2a3e1960]{border:1px solid rgb(218,218,218);font-weight:600;margin-bottom:4px}[data-v-2a3e1960] .icon-button{width:24px;height:24px}.confirm-container[data-v-a3738775]{display:flex;position:relative;z-index:1;flex-direction:column;width:258px;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;-webkit-user-select:select;user-select:select;padding-top:8px;padding-bottom:16px}.confirm-container .confirm-header[data-v-a3738775]{display:flex;justify-content:space-between;align-items:center}[dir=ltr] .confirm-container .confirm-header[data-v-a3738775]{padding-left:24px;padding-right:8px}[dir=rtl] .confirm-container .confirm-header[data-v-a3738775]{padding-right:24px;padding-left:8px}.confirm-container .confirm-header .title[data-v-a3738775]{font-weight:500;font-size:12px;color:#000;opacity:.9}.confirm-container .confirm-content[data-v-a3738775]{display:flex;flex:1;flex-direction:column;gap:10;font-weight:400;font-size:12px;color:#333;margin-top:14px;margin-bottom:12px}[dir=ltr] .confirm-container .confirm-content[data-v-a3738775]{padding-left:24px;padding-right:16px}[dir=rtl] .confirm-container .confirm-content[data-v-a3738775]{padding-right:24px;padding-left:16px}.confirm-container .confirm-content[data-v-a3738775] .base-radio{flex-direction:column;align-items:start}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio{width:12px;height:12px}.confirm-container .confirm-content[data-v-a3738775] .base-radio .radio-container .radio.checked:after{width:8px;height:8px;margin:1px}.confirm-container .confirm-content .settings-can-be-re-enable[data-v-a3738775]{font-size:12px;color:#0009;margin-top:16px}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]{cursor:pointer;-webkit-user-select:none;user-select:none;font-size:12px;font-weight:600;color:#2962ff}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:hover{opacity:.8}.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link[data-v-a3738775]:active,.confirm-container .confirm-content .settings-can-be-re-enable .settings-can-be-re-enable-link.active[data-v-a3738775]{color:#1c4eda;opacity:1}.confirm-container .confirm-footer[data-v-a3738775]{display:flex;justify-content:flex-end}[dir=ltr] .confirm-container .confirm-footer[data-v-a3738775]{padding-right:16px}[dir=rtl] .confirm-container .confirm-footer[data-v-a3738775]{padding-left:16px}.confirm-container .confirm-footer .confirm-button[data-v-a3738775]{height:32px;border-radius:8px;font-size:12px;line-height:100%}.hover-ball-container[data-v-8964fea1]{position:fixed;z-index:2147483647;width:36px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.hover-ball-container .gift-ball-container[data-v-8964fea1]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:36px;height:36px;background:#fff;border-radius:24px;margin-bottom:4px;border:1px solid rgba(151,151,151,.14);box-shadow:0 10px 16px #00000014}.hover-ball-container .gift-ball-container .gift-image[data-v-8964fea1]{width:18px;height:18px;background-size:cover}.hover-ball-container .actionContainer[data-v-8964fea1]{display:flex;height:38px;transition:none;rotate:-90deg;overflow:hidden;width:100%;align-items:center;flex-direction:column;padding:4px;background:#fff;border-top-left-radius:24px;border-top-right-radius:24px;border:1px solid;border-image-source:linear-gradient(266.36deg,rgba(224,224,224,.48) -8.57%,rgba(151,151,151,.14) 101.08%);box-shadow:0 10px 16px #00000014}.hover-ball-container .actionContainer .translateIcon[data-v-8964fea1]{display:flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:24px 24px 4px 4px;opacity:.5;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container .actionContainer .otherIcons[data-v-8964fea1]{height:0px;transition:none;display:flex;gap:2px;flex-direction:column}.hover-ball-container .actionContainer .red-hot[data-v-8964fea1]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}.hover-ball-container.hover .actionContainer[data-v-8964fea1]{rotate:0deg;height:156px;transition:height .1s ease;border-radius:24px;padding:3px 3px 7px}.hover-ball-container.hover .actionContainer .otherIcons[data-v-8964fea1]{transition:height .1s ease,margin-top .2s ease;height:110px;margin-top:6px}.hover-ball-container.hover .translateIcon[data-v-8964fea1]{opacity:1;background:radial-gradient(50.36% 54.17% at 43.75% 45.83%,#448cff,#4574f6 35.33%,#0e4eff 86.17%)}.hover-ball-container.hover .translateIcon[data-v-8964fea1]:active{opacity:1;background:#1c4eda}.hover-ball-container .closeIcon[data-v-8964fea1]{cursor:pointer;margin-top:6px;width:16px;height:16px}.hover-ball-container .successIcon[data-v-8964fea1],.hover-ball-container .hover-ball-close-second-confirm[data-v-8964fea1]{position:absolute}[dir=ltr] .hover-ball-container .hover-ball-close-second-confirm[data-v-8964fea1]{right:calc(100% - 4px);transition:right .2s ease}[dir=rtl] .hover-ball-container .hover-ball-close-second-confirm[data-v-8964fea1]{left:calc(100% - 4px);transition:left .2s ease}.hover-ball-container .login-tip-container[data-v-8964fea1]{position:absolute;top:0}.message-tip[data-v-8964fea1]{position:fixed;z-index:999}.hover-ball-tips[data-v-8964fea1]{position:fixed;z-index:2147483647;color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.extract-text-window-container[data-v-5d491693]{position:fixed;display:flex;z-index:2147483647;border-radius:12px;width:550px;max-height:300px;background-color:#fff;border:1px solid rgba(13,13,13,.12);box-shadow:0 12px 32px #0d0d0d14;font-size:14px}.extract-text-window-container .extract-text-window-content-zone[data-v-5d491693]{flex:1;width:calc(100% - 12px);display:flex;flex-direction:column;word-break:normal;overflow-wrap:break-word;min-height:0}.extract-text-window-container .extract-text-window-header[data-v-5d491693]{flex-shrink:0;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(13,13,13,.08);height:56px;padding:0 16px;-webkit-user-select:none;user-select:none}.extract-text-window-container .extract-text-window-header .header-title[data-v-5d491693]{flex:1;font-weight:600;font-size:14px;color:#000000e6}.extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]{cursor:pointer;width:24px;height:24px;display:flex;padding:4px;border-radius:4px}[dir=ltr] .extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]{margin-right:-4px}[dir=rtl] .extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]{margin-left:-4px}.extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]:hover{background:#f0f0f0}.extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]:active,.extract-text-window-container .extract-text-window-header .window-action-icon[data-v-5d491693]:focus{background:#e0e0e0}.extract-text-window-container .extract-text-window-content[data-v-5d491693]{flex:1;padding:12px 16px;overflow-y:auto;min-height:100px}.extract-text-window-container .extract-text-window-content .content-text[data-v-5d491693]{font-size:14px;font-weight:400;line-height:1.75;color:#000000e6;white-space:pre-wrap;word-break:break-word}.extract-text-window-container .extract-text-window-footer[data-v-5d491693]{flex-shrink:0;display:flex;align-items:center;justify-content:end;margin-top:4px;margin-bottom:12px;padding:0 16px}.extract-text-window-container .extract-text-window-tip[data-v-5d491693]{position:absolute;bottom:50px;height:32px;padding:8px 12px;border-radius:6px;background:#353b39cc;color:#fff;font-size:12px;font-weight:400;white-space:nowrap;pointer-events:none;z-index:1000}[dir=ltr] .extract-text-window-container .extract-text-window-tip[data-v-5d491693]{right:0}[dir=rtl] .extract-text-window-container .extract-text-window-tip[data-v-5d491693]{left:0}.extract-text-window-container .extract-text-window-tip.with-icon[data-v-5d491693]{display:flex;align-items:center;justify-content:center;gap:4px}.extract-text-window-container .extract-text-window-tip .tip-icon[data-v-5d491693]{flex-shrink:0}.extract-text-window-container .extract-text-window-tip .tip-text[data-v-5d491693]{line-height:15px;height:15px}.extract-text-window-container .extract-text-window-tip[data-v-5d491693]:after{content:"";position:absolute;bottom:-4px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid rgba(53,59,57,.8)}[dir=ltr] .extract-text-window-container .extract-text-window-tip[data-v-5d491693]:after{right:12px;transform:translate(-50%)}[dir=rtl] .extract-text-window-container .extract-text-window-tip[data-v-5d491693]:after{left:12px;transform:translate(50%)}.translate-setting-container[data-v-de14b6a3]{display:inline-flex;position:absolute;z-index:1;flex-direction:column;border-radius:12px;border:1px solid rgb(224,224,224);background-color:#fff;box-shadow:0 12px 32px #00000014;cursor:default;width:fit-content;-webkit-user-select:none;user-select:none}.translate-setting-container .close-button[data-v-de14b6a3]{position:absolute;top:12px}[dir=ltr] .translate-setting-container .close-button[data-v-de14b6a3]{right:12px}[dir=rtl] .translate-setting-container .close-button[data-v-de14b6a3]{left:12px}.translate-setting-container .setting-content[data-v-de14b6a3]{display:flex;flex-direction:column;padding:16px 16px 12px;gap:16px;border-bottom:1px solid rgba(46,60,53,.1)}.translate-setting-container .setting-content .setting-section .setting-section-label[data-v-de14b6a3]{font-size:16px;color:#000000e6;font-weight:600;line-height:16px;margin-bottom:8px}.translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input{height:40px;width:220px;gap:6px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input{padding-left:16px}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input{padding-right:16px}.translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input .select-label{color:#000;font-weight:400;font-size:14px}[dir=ltr] .translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input .service-icon{margin-right:0}[dir=rtl] .translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input .service-icon{margin-left:0}.translate-setting-container .setting-content .setting-section[data-v-de14b6a3] .select-input .select-text{color:#000;font-weight:400;font-size:14px}.translate-setting-container .setting-footer[data-v-de14b6a3]{display:flex;padding:12px 16px 16px}.translate-setting-container .setting-footer .more-setting-link[data-v-de14b6a3]{color:#2962ff;font-size:14px;font-weight:400;cursor:pointer;border-bottom:1px solid rgb(41,98,255)}.translate-setting-container .setting-footer .more-setting-link[data-v-de14b6a3]:hover{opacity:.8}.translate-setting-container .setting-footer .more-setting-link[data-v-de14b6a3]:active,.translate-setting-container .setting-footer .more-setting-link.active[data-v-de14b6a3]{color:#1c4eda;opacity:1}.toast-tip-wrapper[data-v-a0cdc0c3]{position:relative;border-radius:6px;filter:drop-shadow(0px 12px 32px rgba(13,13,13,.08))}.toast-tip-wrapper .toast-tip[data-v-a0cdc0c3]{position:relative;background:#353b39cc;border-radius:6px;font-size:12px;line-height:16px;display:flex;align-items:center;min-height:32px}[dir=ltr] .toast-tip-wrapper .toast-tip[data-v-a0cdc0c3]{padding:8px 34px 8px 12px}[dir=rtl] .toast-tip-wrapper .toast-tip[data-v-a0cdc0c3]{padding:8px 12px 8px 34px}.toast-tip-wrapper .toast-tip.hide-close-button[data-v-a0cdc0c3]{padding:8px 12px}.toast-tip-wrapper .toast-tip .tip-content[data-v-a0cdc0c3]{flex:1;color:#fff}[dir=ltr] .toast-tip-wrapper .toast-tip .tip-content[data-v-a0cdc0c3]{text-align:left}[dir=rtl] .toast-tip-wrapper .toast-tip .tip-content[data-v-a0cdc0c3]{text-align:right}.toast-tip-wrapper .toast-tip .icon-close[data-v-a0cdc0c3]{position:absolute;top:8px;cursor:pointer;color:#fff;flex-shrink:0}[dir=ltr] .toast-tip-wrapper .toast-tip .icon-close[data-v-a0cdc0c3]{right:12px}[dir=rtl] .toast-tip-wrapper .toast-tip .icon-close[data-v-a0cdc0c3]{left:12px}.toast-tip-wrapper .toast-tip .icon-close[data-v-a0cdc0c3] svg path{stroke:#ccc;fill:#ccc}.toast-tip-wrapper .toast-tip .arrow[data-v-a0cdc0c3]{position:absolute;width:0;height:0}.toast-tip-wrapper .toast-tip .arrow.arrow-bottom[data-v-a0cdc0c3]{bottom:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-top[data-v-a0cdc0c3]{top:-4px;border-left:4px solid transparent;border-right:4px solid transparent;border-bottom:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-a0cdc0c3]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-a0cdc0c3]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-right[data-v-a0cdc0c3]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}.toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-a0cdc0c3]{border-top:4px solid transparent;border-bottom:4px solid transparent}[dir=ltr] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-a0cdc0c3]{left:-4px;border-right:4px solid rgba(53,59,57,.8)}[dir=rtl] .toast-tip-wrapper .toast-tip .arrow.arrow-left[data-v-a0cdc0c3]{right:-4px;border-left:4px solid rgba(53,59,57,.8)}.image-translate-ball-container[data-v-14943a0a]{position:fixed;z-index:2147483647}.image-translate-icon-container[data-v-14943a0a]{position:relative;display:grid;grid-template-columns:32px 0fr;z-index:2147483647;padding:2px;width:32px;height:32px;transition:width .2s ease,grid-template-columns .2s ease;border-radius:24px;background:#353842e6;white-space:nowrap}.image-translate-icon-container.hover[data-v-14943a0a]{width:116px;grid-template-columns:32px 1fr}.image-translate-icon-container .translateIcon[data-v-14943a0a]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px}.image-translate-icon-container .translateIcon[data-v-14943a0a]:hover,.image-translate-icon-container .translateIcon.active[data-v-14943a0a]{background:#0006}.image-translate-icon-container .translateIcon.loading[data-v-14943a0a]{animation:rotate 1s linear infinite}.image-translate-icon-container .image-ball-status-icon[data-v-14943a0a]{position:absolute;bottom:-6px}.image-translate-icon-container .otherIcons[data-v-14943a0a]{display:inline-flex;min-width:0;overflow:hidden}.image-translate-icon-container .otherIcons .icon-button[data-v-14943a0a]{background:none;border:none;width:28px;height:28px;border-radius:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}.image-translate-icon-container .otherIcons .icon-button[data-v-14943a0a]:hover,.image-translate-icon-container .otherIcons .icon-button.active[data-v-14943a0a]{background:#0006}.image-translate-ball-popup-container[data-v-14943a0a]{position:absolute;z-index:2147483647}.image-translate-ball-colorful-tips-container[data-v-14943a0a]{position:absolute;bottom:38px}.image-translate-ball-toast-container[data-v-14943a0a]{position:absolute;bottom:42px;white-space:normal;max-width:320px;width:max-content}.image-translate-ball-close-second-confirm[data-v-14943a0a]{position:absolute;bottom:40px;pointer-events:all}[dir=ltr] .image-translate-ball-close-second-confirm[data-v-14943a0a]{right:0}[dir=rtl] .image-translate-ball-close-second-confirm[data-v-14943a0a]{left:0}.image-translate-ball-close-second-confirm .second-confirm-popup[data-v-14943a0a]{background:#fff;border:1px solid #eee;border-radius:8px;padding:12px;box-shadow:0 12px 32px #35384214}.image-translate-ball-close-second-confirm .second-confirm-popup .title[data-v-14943a0a]{font-size:14px;margin-bottom:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options[data-v-14943a0a]{display:flex;gap:8px}.image-translate-ball-close-second-confirm .second-confirm-popup .options button[data-v-14943a0a]{background:#f5f5f5;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer}.improve-writing-style-window[data-v-2567b347]{width:var(--fde64a84);border-radius:12px;background-color:#fff;border:1px solid #E0E0E0;box-shadow:0 12px 32px #00000014;overflow:hidden;display:flex;flex-direction:column}.improve-writing-style-window .window-content[data-v-2567b347]{display:flex;flex-direction:column;max-height:calc(100vh - 20px);overflow-y:auto;padding-top:4px}.improve-writing-style-window .window-content .header-section[data-v-2567b347]{display:flex;flex-direction:row;align-items:center;height:48px;-webkit-user-select:none;user-select:none}[dir=ltr] .improve-writing-style-window .window-content .header-section[data-v-2567b347]{padding:12px 12px 12px 16px}[dir=rtl] .improve-writing-style-window .window-content .header-section[data-v-2567b347]{padding:12px 16px 12px 12px}.improve-writing-style-window .window-content .header-section .function-icon[data-v-2567b347]{margin-inline-end:4px}.improve-writing-style-window .window-content .header-section .function-label[data-v-2567b347]{font-size:14px;font-weight:600;line-height:1.5;color:#000000e6}.improve-writing-style-window .window-content .header-section .right-weaker-tip[data-v-2567b347]{flex:1;margin-inline:5px;font-size:12px;line-height:1.5;color:#0006}[dir=ltr] .improve-writing-style-window .window-content .header-section .right-weaker-tip[data-v-2567b347]{text-align:right}[dir=rtl] .improve-writing-style-window .window-content .header-section .right-weaker-tip[data-v-2567b347]{text-align:left}.improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]{cursor:pointer;width:24px;height:24px;display:flex;padding:4px;border-radius:4px}[dir=ltr] .improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]{margin-left:auto}[dir=rtl] .improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]{margin-right:auto}.improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]:hover{background:#f0f0f0}.improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]:active,.improve-writing-style-window .window-content .header-section .close-icon[data-v-2567b347]:focus{background:#e0e0e0}.improve-writing-style-window .window-content .content-section[data-v-2567b347]{flex:1;padding:12px 16px;border-bottom:1px solid rgba(46,60,53,.1);-webkit-user-select:none;user-select:none;font-size:14px;cursor:pointer;position:relative}.improve-writing-style-window .window-content .content-section[data-v-2567b347]:nth-of-type(2){border-top:1px solid rgba(46,60,53,.1)}.improve-writing-style-window .window-content .content-section[data-v-2567b347]:hover,.improve-writing-style-window .window-content .content-section[data-v-2567b347]:active{background-color:#f7f7f7}.improve-writing-style-window .window-content .content-section .hover-toast-tip[data-v-2567b347]{position:absolute;top:-21px}[dir=ltr] .improve-writing-style-window .window-content .content-section .hover-toast-tip[data-v-2567b347]{right:5px}[dir=rtl] .improve-writing-style-window .window-content .content-section .hover-toast-tip[data-v-2567b347]{left:5px}.improve-writing-style-window .window-content .content-section .text-item[data-v-2567b347]{line-height:1.5em;color:#000000e6;word-break:break-word;white-space:pre-wrap}.improve-writing-style-window .window-content .content-section .text-item .text-content-title[data-v-2567b347]{font-weight:600;line-height:1.5;color:#2962ff}.improve-writing-style-window .window-content .content-section .text-item .suffix-stars[data-v-2567b347]{word-break:break-all}.improve-writing-style-window .window-content .content-section .unlock-for-free .unlock-for-free-text[data-v-2567b347]{font-weight:600;color:#2962ff;text-decoration:underline;cursor:pointer}.improve-writing-style-window .window-content .content-section .unlock-for-free[data-v-2567b347]:hover,.improve-writing-style-window .window-content .content-section .unlock-for-free[data-v-2567b347]:active{opacity:.8}.improve-writing-style-window .window-content .content-section .unlock-for-free[data-v-2567b347]:before,.improve-writing-style-window .window-content .content-section .unlock-for-free[data-v-2567b347]:after{content:" ";display:inline}.improve-writing-style-window .window-content .footer-section[data-v-2567b347]{display:flex;align-items:center;justify-content:space-between;gap:4px;padding:16px;font-size:14px}.improve-writing-style-window .window-content .footer-section .footer-tip[data-v-2567b347]{flex:1;font-weight:400;line-height:1.5em;color:#000;-webkit-user-select:none;user-select:none}.improve-writing-style-window .window-content .footer-section .refresh-btn[data-v-2567b347]{min-width:76px;height:32px;padding-inline:12px;border-radius:6px;border:1px solid #DADADA;background-color:#fff;color:#000000e6;font-weight:400;line-height:1.21em;text-align:center;cursor:pointer;-webkit-user-select:none;user-select:none;white-space:nowrap}.improve-writing-style-window .window-content .footer-section .refresh-btn[data-v-2567b347]:hover{background-color:#f7f7f7;border-color:#a7a7a7}.improve-writing-style-window .window-content .footer-section .refresh-btn[data-v-2567b347]:active{background-color:#e0e0e0}.free-trial-btn[data-v-99e1f9ac]{height:28px;border:none;padding:0;font-size:12px;font-weight:600;line-height:16px;display:flex;align-items:center;gap:6px}.free-trial-btn .free-trial-btn-text[data-v-99e1f9ac]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-text-fill-color:transparent;color:transparent}[dir=ltr] .free-trial-btn .free-trial-btn-text[data-v-99e1f9ac]{background:linear-gradient(90deg,#33c2ff,#2963ff)}[dir=rtl] .free-trial-btn .free-trial-btn-text[data-v-99e1f9ac]{background:linear-gradient(-90deg,#33c2ff,#2963ff)}[dir] .free-trial-btn .free-trial-btn-text[data-v-99e1f9ac]{background-clip:text;-webkit-background-clip:text}.free-trial-btn[data-v-99e1f9ac]:hover,.free-trial-btn[data-v-99e1f9ac]:active{background:transparent;border:none}.translate-window-footer-explain[data-v-c39678ae]{display:flex;gap:4px;border-radius:4px;align-items:center;-webkit-user-select:none;user-select:none;cursor:pointer;padding:4px;justify-content:center;line-height:0;height:30px}.translate-window-footer-explain span[data-v-c39678ae]{font-size:12px;color:#333}.translate-window-footer-explain[data-v-c39678ae]:hover{background:#f0f0f0}.translate-window-footer-explain.active span[data-v-c39678ae],.translate-window-footer-explain:active span[data-v-c39678ae]{color:#2962ff}.translate-window-footer-explain[data-v-c39678ae]:focus{background:#e0e0e0}.translate-window-footer-explain.disable[data-v-c39678ae]{cursor:not-allowed;opacity:.6}.translate-window-footer-explain.disable[data-v-c39678ae]:hover{background:none}.translate-window-footer-explain.disable[data-v-c39678ae]:active,.translate-window-footer-explain.disable[data-v-c39678ae]:focus{background:none}.translate-window-footer-action-wrapper[data-v-4c60f9ac]{display:flex;gap:5px;justify-content:flex-start;align-items:center;padding:10px;border-top:1px solid rgb(236,236,236)}.translate-window-footer-action-wrapper .translate-window-footer-action-item[data-v-4c60f9ac]{flex-shrink:0}.translate-window-footer-action-wrapper .empty-area[data-v-4c60f9ac]{flex:1}.translate-window-footer-action-wrapper .free-trial-btn[data-v-4c60f9ac]{flex-shrink:1}.translate-window-header[data-v-2ffd00cb]{position:relative;display:flex;align-items:center;justify-content:space-between;height:56px;border-bottom:1px solid rgb(236,236,236);font-size:12px;color:#333;-webkit-user-select:none;user-select:none}[dir=ltr] .translate-window-header[data-v-2ffd00cb]{padding-left:16px;padding-right:12px}[dir=rtl] .translate-window-header[data-v-2ffd00cb]{padding-right:16px;padding-left:12px}.translate-window-header .header-left[data-v-2ffd00cb]{display:flex;flex:1;min-width:0;gap:12px}.translate-window-header .header-left[data-v-2ffd00cb] .select-input{height:32px}[dir=ltr] .translate-window-header .header-left[data-v-2ffd00cb] .select-input{padding-left:4px;padding-right:10px}[dir=rtl] .translate-window-header .header-left[data-v-2ffd00cb] .select-input{padding-right:4px;padding-left:10px}.translate-window-header .header-left[data-v-2ffd00cb] .select-input .select-text{font-size:12px;color:#000;font-weight:400}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-input{border:none;gap:4px;background-color:transparent;padding-inline:0}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-input.active{border:none}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-input .select-label{display:flex;gap:4px;align-items:center;font-weight:600;font-size:14px;color:#000000e6}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-options.single-column{height:auto;padding-inline:0;border-radius:12px}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-options.single-column .option-list .option{height:36px;width:192px;padding-inline-start:0;border-radius:0}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-options.single-column .option-list .option .function-icon{margin-inline:16px 4px}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-options.single-column .option-list .option .function-label{flex:1;font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.translate-window-header .header-left .translate-type-select-container[data-v-2ffd00cb] .select-options.single-column .option-list .option .selected-icon{justify-content:flex-end;margin-inline:6px 10px}.translate-window-header .header-left .empty-area[data-v-2ffd00cb]{flex:1}.translate-window-header .header-left .language-select[data-v-2ffd00cb]{cursor:default;width:auto;min-width:0}.translate-window-header .header-left .language-select[data-v-2ffd00cb] .select-input{gap:8px;border:none}.translate-window-header .header-left .model-select[data-v-2ffd00cb]{cursor:default;width:52px}.translate-window-header .header-left .model-select[data-v-2ffd00cb] .select-input{border:none}[dir=ltr] .translate-window-header .header-left .model-select[data-v-2ffd00cb] .select-input .select-icon.service-icon{margin-right:8px}[dir=rtl] .translate-window-header .header-left .model-select[data-v-2ffd00cb] .select-input .select-icon.service-icon{margin-left:8px}.translate-window-header .header-right[data-v-2ffd00cb]{display:flex;align-items:center;cursor:default}.translate-window-header .header-right .window-action[data-v-2ffd00cb]{display:flex;gap:8px;-webkit-user-select:none;user-select:none}[dir=ltr] .translate-window-header .header-right .window-action[data-v-2ffd00cb]{margin-left:12px}[dir=rtl] .translate-window-header .header-right .window-action[data-v-2ffd00cb]{margin-right:12px}.translate-window-header .header-right .window-action .window-action-more-list-container[data-v-2ffd00cb]{z-index:10;display:flex;flex-direction:column;position:absolute;top:100%}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-content[data-v-2ffd00cb]{margin-top:4px;padding:12px;background:#fff;border:1px solid rgb(224,224,224);border-radius:12px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]{cursor:pointer;padding:6px;font-size:14px;border-radius:6px;display:flex;gap:8px;align-items:center}[dir=ltr] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]{padding-right:24px}[dir=rtl] .translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]{padding-left:24px}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]:active,.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item[data-v-2ffd00cb]:focus{background:#e0e0e0}.translate-window-header .header-right .window-action .window-action-more-list-container .window-action-more-list-item .window-action-more-list-item-content[data-v-2ffd00cb]{white-space:nowrap}.translate-window-header .header-right .window-action .window-action-icon[data-v-2ffd00cb]{cursor:pointer;width:24px;height:24px;display:flex;padding:4px;border-radius:4px}.translate-window-header .header-right .window-action .window-action-icon[data-v-2ffd00cb]:hover{background:#f0f0f0}.translate-window-header .header-right .window-action .window-action-icon[data-v-2ffd00cb]:active,.translate-window-header .header-right .window-action .window-action-icon[data-v-2ffd00cb]:focus{background:#e0e0e0}.translate-window-header .drag-tip[data-v-2ffd00cb]{position:absolute;top:0;display:none}[dir=ltr] .translate-window-header .drag-tip[data-v-2ffd00cb]{left:50%;transform:translate(-50%)}[dir=rtl] .translate-window-header .drag-tip[data-v-2ffd00cb]{right:50%;transform:translate(50%)}.translate-window-header .select-text-close-second-confirm[data-v-2ffd00cb]{position:absolute;top:calc(100% - 2px)}.translate-window-header:hover .drag-tip[data-v-2ffd00cb]{display:block}[dir=rtl] .to-homepage-icon[data-v-2ffd00cb]{rotate:270deg}.explain-not-support-container[data-v-1d16d2d2]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding-block:24px}.explain-not-support-container .explain-not-support-text[data-v-1d16d2d2]{line-height:16px;font-size:12px;text-align:center;color:#333}.explain-not-support-container .explain-not-support-switch[data-v-1d16d2d2]{display:flex;justify-content:center;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px}.explain-not-support-container .explain-not-support-switch span[data-v-1d16d2d2]{font-size:12px;color:#2962ff}.translate-window-bottom-loading[data-v-787900e9]{display:flex;align-items:center;justify-content:center}.translate-window-bottom-loading .translate-loading-icon[data-v-787900e9]{animation:rotate 1s linear infinite}.speech-icon-wrapper[data-v-074edb6b]{display:inline-block}.speech-icon-wrapper.weakened-color .speech-icon-button[data-v-074edb6b]{opacity:.7}.speech-options-fixed[data-v-074edb6b]{position:fixed;z-index:1;display:flex;flex-direction:column;min-width:120px;background-color:transparent}.speech-options-fixed .option-list[data-v-074edb6b]{display:flex;flex-direction:column;padding:8px 0;background-color:#fff;border:1px solid rgb(224,224,224);border-radius:8px;box-shadow:0 12px 32px #00000029}.speech-options-fixed .option-list .option[data-v-074edb6b]{position:relative;display:flex;align-items:center;min-width:100px;height:36px;padding:0 12px;cursor:pointer;font-size:14px;color:#000}.speech-options-fixed .option-list .option .option-text[data-v-074edb6b]{color:#000000e6}.speech-options-fixed .option-list .option[data-v-074edb6b]:hover{background-color:#f0f0f0}.speech-options-fixed .option-list .option.selected .option-text[data-v-074edb6b]{font-weight:500;color:#2962ff}.speech-icon-button[data-v-074edb6b] .icon-button{display:flex;align-items:center;justify-content:center}.speech-icon-button[data-v-074edb6b] .icon-button .icon{width:20px!important;height:20px!important}.speech-icon-button.speech-icon-button-loading[data-v-074edb6b] .icon-button .icon{animation:rotate-with-scale-074edb6b 1s linear infinite}.speech-icon-button.speech-icon-button-stop[data-v-074edb6b] .icon-button .icon{transform:scale(.9)}@keyframes rotate-with-scale-074edb6b{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.translate-window-result-footer[data-v-c3f95a1f]{height:24px;display:flex;gap:24px;padding:0 16px;margin-block:4px 12px;align-items:center;justify-content:space-between;position:relative;overflow:visible}.translate-window-result-footer.weakened-and-narrower[data-v-c3f95a1f]{margin-top:0}.translate-window-result-footer.weakened-and-narrower .translate-result-footer-icons .translate-result-icon-container .translate-result-icon-wrapper[data-v-c3f95a1f]{opacity:.7}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f]{margin-inline-start:-6px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input{border:none;border-radius:0;padding-inline-end:0;background-color:transparent;height:28px;gap:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input .select-arrow{display:flex;align-items:center;justify-content:center;margin-inline-end:4px}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input.active,.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input:active{background-color:#f0f0f0;border-radius:8px}[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input.active .select-arrow,[dir=ltr] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input:active .select-arrow{transform:rotate(180deg)}[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input.active .select-arrow,[dir=rtl] .translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input:active .select-arrow{transform:rotate(-180deg)}.translate-window-result-footer .translate-window-result-footer-language-select[data-v-c3f95a1f] .select-input:hover{background-color:#f0f0f0;border-radius:8px}.translate-window-result-footer .empty-area[data-v-c3f95a1f]{flex:1}.translate-window-result-footer .translate-result-footer-icons[data-v-c3f95a1f]{display:flex;gap:8px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-container[data-v-c3f95a1f]{position:relative;overflow:visible}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-c3f95a1f]{display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none;gap:4px;padding:4px;height:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-c3f95a1f]:hover{background:#f0f0f0;border-radius:4px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper.active[data-v-c3f95a1f],.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-c3f95a1f]:active,.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-c3f95a1f]:focus{background:#e0e0e0}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-wrapper[data-v-c3f95a1f]:not(.show-label){width:24px}.translate-window-result-footer .translate-result-footer-icons .translate-result-icon-tip[data-v-c3f95a1f]{font-size:12px;font-weight:400;color:#000000e6}.translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-c3f95a1f]{position:absolute;top:2px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-c3f95a1f]{left:20px}[dir=rtl] .translate-window-result-footer .translate-result-footer-icons .red-hot[data-v-c3f95a1f]{right:20px}.translate-window-result-footer .translate-result-hover-tip[data-v-c3f95a1f]{position:fixed;height:32px;padding:8px 12px;border-radius:6px;background:#353b39cc;color:#fff;font-size:12px;font-weight:400;white-space:nowrap;pointer-events:none;z-index:1000}.translate-window-result-footer .translate-result-hover-tip.with-icon[data-v-c3f95a1f]{display:flex;align-items:center;justify-content:center;gap:4px}.translate-window-result-footer .translate-result-hover-tip .tip-icon[data-v-c3f95a1f]{flex-shrink:0}.translate-window-result-footer .translate-result-hover-tip .tip-text[data-v-c3f95a1f]{line-height:15px;height:15px}.translate-window-result-footer .translate-result-hover-tip .tip-arrow[data-v-c3f95a1f]{position:absolute;bottom:-4px;width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid rgba(53,59,57,.8)}[dir=ltr] .translate-window-result-footer .translate-result-hover-tip .tip-arrow[data-v-c3f95a1f]{transform:translate(-5px)}[dir=rtl] .translate-window-result-footer .translate-result-hover-tip .tip-arrow[data-v-c3f95a1f]{transform:translate(5px)}.slow-fade-in-enter-active[data-v-c3f95a1f],.slow-fade-in-leave-active[data-v-c3f95a1f]{transition:opacity .15s ease}.slow-fade-in-enter-from[data-v-c3f95a1f],.slow-fade-in-leave-to[data-v-c3f95a1f]{opacity:0}.translate-window-result-container[data-v-02afd352]{padding:12px 16px;font-size:14px;font-weight:400;color:#000000e6;line-height:1.75;display:flex;flex-direction:column}.translate-window-result-container.exception-status[data-v-02afd352]{display:flex;justify-content:center;height:100%}.translate-window-result-container.fixed-min-height[data-v-02afd352]{min-height:77px}.translate-window-result-container.retain-height[data-v-02afd352]{flex:1;overflow-y:overlay}.translate-window-result-container .translate-window-result-error-container[data-v-02afd352]{display:flex;flex-direction:column;justify-content:center;align-items:center}.translate-window-result-container .translate-window-result-error[data-v-02afd352]{align-items:center;font-size:14px;line-height:1.75;gap:4px;font-weight:400;max-width:293px;text-align:center;color:#000000e6}.translate-window-result-container .translate-window-result-error .translate-result-error-retry[data-v-02afd352]{display:flex;align-items:center;word-break:keep-all;gap:2px;color:#2962ff;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .upgrade-now-wrapper[data-v-02afd352]{display:flex;justify-content:center;margin-top:16px}.translate-window-result-container .upgrade-now-wrapper .upgrade-now-btn[data-v-02afd352]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);border-radius:8px;padding:12px 16px;color:#fff;font-size:14px;line-height:16px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none}.translate-window-result-container .translate-window-result-text-wrapper[data-v-02afd352]{display:flex;flex-direction:row;flex:1;min-height:0}.translate-window-result-container .translate-window-result-text-wrapper .translate-window-result-text[data-v-02afd352]{white-space:pre-line;max-width:100%}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text[data-v-02afd352]{flex:1;font-size:14px;line-height:1.75;color:#0009}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .translate-window-result-text.collapsed-in-two-lines[data-v-02afd352]{color:#0006;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.translate-window-result-container .translate-window-result-text-wrapper.text-can-be-collapsed .collapse-bottom-icon[data-v-02afd352]{cursor:pointer}.explain-disable-tips[data-v-02afd352]{position:absolute;bottom:-50px;font-size:12px;padding:12px;line-height:16px;color:#333;background:#fff;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;border-radius:8px}[dir=ltr] .explain-disable-tips[data-v-02afd352]{left:36px}[dir=rtl] .explain-disable-tips[data-v-02afd352]{right:36px}.translate-window-up-bottom-result-wrapper[data-v-b96c7970]{display:flex;flex-direction:column;min-height:0;flex:1}.translate-window-up-bottom-result-wrapper>.translate-window-result-footer[data-v-b96c7970]{flex-shrink:0}.translate-window-up-bottom-result-scroll-content[data-v-b96c7970]{display:flex;flex-direction:column;flex:1;overflow-y:auto;min-height:0}[dir=ltr] .translate-window-up-bottom-result-scroll-content[data-v-b96c7970]{margin-right:2px}[dir=rtl] .translate-window-up-bottom-result-scroll-content[data-v-b96c7970]{margin-left:2px}.translate-window-up-bottom-result-scroll-content[data-v-b96c7970]::-webkit-scrollbar{width:6px}.translate-window-up-bottom-result-scroll-content[data-v-b96c7970]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.translate-window-up-bottom-result-scroll-content[data-v-b96c7970]::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.translate-window-up-bottom-result-scroll-content[data-v-b96c7970]::-webkit-scrollbar-track{background-color:transparent}.translate-window-bottom-result-wrapper[data-v-b96c7970]{flex:1;position:relative}.translate-window-bottom-result-wrapper[data-v-b96c7970]:before{content:"";position:absolute;top:0;left:16px;right:16px;height:1px;background-color:#0d0d0d1f}.bottom-sentinel[data-v-b96c7970]{height:1px;width:100%;pointer-events:none}.translate-window-container[data-v-0f5409bb]{position:fixed;display:flex;z-index:2147483647;border-radius:12px;max-height:calc(100vh - 16px);background-color:#fff;border:1px solid rgba(13,13,13,.12);box-shadow:0 12px 32px #0d0d0d14;font-size:16px}.translate-window-container .translate-window-drag-zone[data-v-0f5409bb]{background:#f7f7f7;width:12px;display:flex;align-items:center;justify-content:center;cursor:move}[dir=ltr] .translate-window-container .translate-window-drag-zone[data-v-0f5409bb]{border-top-left-radius:12px;border-bottom-left-radius:12px}[dir=rtl] .translate-window-container .translate-window-drag-zone[data-v-0f5409bb]{border-top-right-radius:12px;border-bottom-right-radius:12px}.translate-window-container .translate-window-content-zone[data-v-0f5409bb]{flex:1;width:calc(100% - 12px);display:flex;flex-direction:column;word-break:normal;overflow-wrap:break-word;min-height:0}.translate-window-container .translate-window-header-wrapper[data-v-0f5409bb]{flex-shrink:0}.google-docs-setting-container[data-v-9d036124]{position:fixed;height:60px;width:50px;z-index:1000000009}[dir=ltr] .google-docs-setting-container[data-v-9d036124]{padding-right:8px}[dir=rtl] .google-docs-setting-container[data-v-9d036124]{padding-left:8px}.google-docs-setting-btn[data-v-9d036124]{height:100%;width:50px;display:flex;align-items:center;justify-content:center}.google-docs-welcome-banner[data-v-9d036124]{position:absolute;top:100%;min-width:360px;background-color:#fff;border:1px solid rgb(224,224,224);border-radius:16px;z-index:2147483647;box-shadow:0 12px 32px #00000014}[dir=ltr] .google-docs-welcome-banner[data-v-9d036124]{text-align:left}[dir=rtl] .google-docs-welcome-banner[data-v-9d036124]{text-align:right}.banner-content[data-v-9d036124]{padding:20px}.header-section[data-v-9d036124]{position:relative;display:flex;align-items:center;margin-bottom:16px}.title[data-v-9d036124]{flex:1;font-size:14px;font-weight:600;line-height:24px;color:#000000e6}[dir=ltr] .title[data-v-9d036124]{margin-left:6px}[dir=rtl] .title[data-v-9d036124]{margin-right:6px}[dir=ltr] .close-button[data-v-9d036124]{margin-left:4px}[dir=rtl] .close-button[data-v-9d036124]{margin-right:4px}.feature-item[data-v-9d036124]{display:flex;align-items:center;margin-bottom:10px;gap:6px}.feature-item[data-v-9d036124]:last-child{margin-bottom:0}.feature-text[data-v-9d036124]{flex:1;font-size:14px;font-weight:400;color:#0009}.separator[data-v-9d036124]{width:100%;height:1px;background-color:#0000001a}.bottom-section[data-v-9d036124]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px}.enable-text[data-v-9d036124]{font-size:14px;font-weight:400;color:#000000e6}.google-docs-setting-btn-red-hot[data-v-9d036124]{position:absolute;top:15px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .google-docs-setting-btn-red-hot[data-v-9d036124]{right:10px}[dir=rtl] .google-docs-setting-btn-red-hot[data-v-9d036124]{left:10px}.input-translate-ball-container[data-v-360a8ea0]{position:fixed;z-index:2147483647;pointer-events:none}.input-translate-ball-container .input-translate-ball-content[data-v-360a8ea0]{position:absolute;bottom:0;pointer-events:all;overflow:hidden;padding:2px;width:var(--6344a9e8);height:var(--99c2986e);transition:width .2s ease;border-radius:24px;background:#fff;border:1px solid rgba(46,50,60,.1);box-shadow:0 10px 16px #00000014;white-space:nowrap}[dir=ltr] .input-translate-ball-container .input-translate-ball-content[data-v-360a8ea0]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-content[data-v-360a8ea0]{left:0}.input-translate-ball-container .input-translate-ball-content.ball-content-small[data-v-360a8ea0]{border:none;box-shadow:none;background:transparent}.input-translate-ball-container .input-translate-ball-content.translating[data-v-360a8ea0]{width:var(--e80239e6)}.input-translate-ball-container .input-translate-ball-content .input-translate-ball-small-icon[data-v-360a8ea0]{width:10px;height:10px;background:#353842;border:1px solid rgb(255,255,255);position:absolute;top:11px;border-radius:50%}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-360a8ea0]{position:relative;display:inline-flex;justify-content:center;align-items:center;cursor:pointer;width:28px;height:28px;border-radius:14px;background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-360a8ea0]:hover{background:#353842}.input-translate-ball-container .input-translate-ball-content .translateIcon[data-v-360a8ea0]:active{opacity:1;background:#212329}.input-translate-ball-container .input-translate-ball-content .translateIcon.translating[data-v-360a8ea0]{display:flex}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-360a8ea0]{animation:rotate 1s linear infinite;display:inline-flex;align-items:center;justify-content:center;line-height:0;overflow:hidden}.input-translate-ball-container .input-translate-ball-content .translateIcon .translate-loading-icon[data-v-360a8ea0] .svg{width:100%;height:100%;display:block}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-360a8ea0]{display:inline-flex;transition:opacity .2s ease}.input-translate-ball-container .input-translate-ball-content .otherIcons[data-v-360a8ea0] .icon-button{padding:3px;border-radius:14px}.input-translate-ball-container .input-translate-ball-content .otherIcons .always-close-icon-button[data-v-360a8ea0] .icon-button .svg-icon{transform:translateY(1px)}.input-translate-ball-container .input-translate-ball-content.hover[data-v-360a8ea0]{width:var(--37e28ee6)}.input-translate-ball-container .input-translate-ball-popup-container[data-v-360a8ea0]{pointer-events:all}.input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-360a8ea0]{position:absolute}[dir=ltr] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-360a8ea0]{right:0}[dir=rtl] .input-translate-ball-container .input-translate-ball-popup-container .input-translate-ball-popup[data-v-360a8ea0]{left:0}.input-translate-ball-container.vertical .input-translate-ball-content[data-v-360a8ea0]{top:0;bottom:auto;height:var(--6344a9e8);width:var(--99c2986e);transition:height .2s ease}.input-translate-ball-container.vertical .input-translate-ball-content .otherIcons[data-v-360a8ea0]{display:flex;flex-direction:column;margin-inline-end:0}[dir=ltr] .input-translate-ball-container.vertical .input-translate-ball-content .otherIcons .always-close-icon-button[data-v-360a8ea0] .icon-button .svg-icon{transform:translate(1px)}[dir=rtl] .input-translate-ball-container.vertical .input-translate-ball-content .otherIcons .always-close-icon-button[data-v-360a8ea0] .icon-button .svg-icon{transform:translate(-1px)}.input-translate-ball-container.vertical .input-translate-ball-content.hover[data-v-360a8ea0]{width:var(--99c2986e);height:var(--37e28ee6)}.input-translate-ball-container.vertical .input-translate-ball-tips[data-v-360a8ea0]{white-space:nowrap}.input-translate-ball-tips[data-v-360a8ea0]{position:absolute;z-index:2147483647;-webkit-user-select:none;user-select:none;color:#fff;bottom:40px;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000;border:1px solid rgb(54,54,54);box-shadow:0 12px 32px #00000014}.input-translate-ball-tips.model-tip-label[data-v-360a8ea0]{display:flex}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content[data-v-360a8ea0]{display:flex;align-items:center;padding-inline-end:4px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper[data-v-360a8ea0]{display:inline-block;padding-inline:4px;height:16px}.input-translate-ball-tips.model-tip-label .input-translate-ball-tips-content .input-translate-ball-tips-icon-wrapper .input-translate-ball-tips-icon[data-v-360a8ea0]{display:block;width:16px;height:16px}.input-translate-ball-tips.error-tips[data-v-360a8ea0]{bottom:40px}.pdf-banner-container[data-v-740c4687]{position:absolute;z-index:2147483647;top:0;left:0;right:0;height:50px;padding-left:60px;padding-right:60px;font-size:16px;display:flex;gap:8px;justify-content:center;align-items:center;background-color:#fff;color:#000000e6;line-height:1.5}.pdf-banner-container .pdf-banner-desc[data-v-740c4687]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pdf-banner-container .pdf-translate-button[data-v-740c4687]{height:32px;border-radius:18px;font-size:14px;font-weight:600;overflow:unset;text-overflow:unset}[dir=ltr] .pdf-banner-container .pdf-translate-button[data-v-740c4687]{margin-left:24px}[dir=rtl] .pdf-banner-container .pdf-translate-button[data-v-740c4687]{margin-right:24px}.pdf-banner-container .pdf-translate-close[data-v-740c4687]{position:absolute;width:60px;display:flex;justify-content:center;align-items:center}[dir=ltr] .pdf-banner-container .pdf-translate-close[data-v-740c4687]{right:0}[dir=rtl] .pdf-banner-container .pdf-translate-close[data-v-740c4687]{left:0}.pdf-only-translate-button-container[data-v-740c4687]{position:absolute;z-index:2147483647;top:12px;justify-content:end}.plugin-comment-guid-container[data-v-fef91c63]{position:fixed;z-index:2147483647;bottom:32px;padding:24px;font-weight:400;background-color:#fff;color:#000;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014}[dir=ltr] .plugin-comment-guid-container[data-v-fef91c63]{right:32px}[dir=rtl] .plugin-comment-guid-container[data-v-fef91c63]{left:32px}.plugin-comment-guid-container .plugin-comment-guid-header[data-v-fef91c63]{display:flex;gap:12px;align-items:center;margin-bottom:24px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo[data-v-fef91c63]{display:flex;flex:1;align-items:center;gap:12px}.plugin-comment-guid-container .plugin-comment-guid-header .plugin-comment-guid-header-logo .plugin-comment-logo-name[data-v-fef91c63]{font-weight:600;font-size:16px}.plugin-comment-guid-container .plugin-comment-five-star[data-v-fef91c63]{display:flex;flex-direction:column;align-items:center;margin-bottom:8px}.plugin-comment-guid-container .plugin-comment-dec-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-dec-container .plugin-comment-dec[data-v-fef91c63]{max-width:300px;text-align:center;font-size:14px;line-height:1.5}.plugin-comment-guid-container .plugin-comment-btn-container[data-v-fef91c63]{display:flex;justify-content:center}.plugin-comment-guid-container .plugin-comment-btn-container .plugin-comment-btn[data-v-fef91c63]{width:284px;height:48px;border-radius:12px;margin:32px 8px 8px}.dialog-mask[data-v-eca39056]{position:fixed;top:0;width:100%;height:100%;background:#0009;z-index:2147483646}[dir=ltr] .dialog-mask[data-v-eca39056]{left:0}[dir=rtl] .dialog-mask[data-v-eca39056]{right:0}.confirm-dialog[data-v-eca39056]{position:fixed;top:50%;padding:16px 24px 24px;background:#fff;border-radius:16px;border:1px solid rgb(224,224,224);box-shadow:0 12px 32px #00000014;overflow:hidden;display:flex;flex-direction:column;z-index:2147483647}[dir=ltr] .confirm-dialog[data-v-eca39056]{left:50%;transform:translate(-50%,-50%)}[dir=rtl] .confirm-dialog[data-v-eca39056]{right:50%;transform:translate(50%,-50%)}.dialog-header[data-v-eca39056]{display:flex;align-items:center;justify-content:space-between}.dialog-header .dialog-title[data-v-eca39056]{font-size:14px;font-weight:700;color:#000000e6}.dialog-content[data-v-eca39056]{flex:1;margin-top:12px}.dialog-content .dialog-body[data-v-eca39056]{margin-bottom:24px}.dialog-content .dialog-body p[data-v-eca39056]{margin:0;line-height:1.5;color:#0d0d0de6;font-size:14px}.dialog-content .dialog-actions[data-v-eca39056]{display:flex;justify-content:flex-end;gap:12px}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]{background:#0d0d0d1a;border-radius:8px;padding:8px 12px;color:#0d0d0de6;font-size:12px;font-weight:600;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.dialog-content .dialog-actions .btn-cancel[data-v-eca39056]:hover{background:#0d0d0d26}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]{background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff);color:#fff;font-size:12px;font-weight:600}.dialog-content .dialog-actions .colorful-confirm-btn[data-v-eca39056]:hover{opacity:.9}.upgrade-dialog-overlay[data-v-74241f0c]{position:fixed;top:0;left:0;right:0;bottom:0;background:transparent;display:flex;align-items:flex-start;justify-content:flex-start;z-index:2147483647;overflow:auto;padding:20px}.upgrade-dialog-overlay.with-mask[data-v-74241f0c]{background:#0009}.upgrade-dialog[data-v-74241f0c]{position:relative;height:480px;background:#fff;border-radius:24px;box-shadow:0 12px 32px #00000014;margin:auto}.dialog-close[data-v-74241f0c]{width:16px;height:16px;position:absolute;cursor:pointer;background-repeat:no-repeat;background-position:center;background-size:contain}[dir=ltr] .dialog-close[data-v-74241f0c]{right:-20px}[dir=rtl] .dialog-close[data-v-74241f0c]{left:-20px}.dialog-content[data-v-74241f0c]{display:flex;height:100%}.content-left[data-v-74241f0c]{width:456px;padding:48px;display:flex;flex-direction:column;justify-content:center}.dialog-title[data-v-74241f0c]{font-size:20px;font-weight:600;margin-bottom:24px;color:#000}.features-list[data-v-74241f0c]{display:flex;flex-direction:column;gap:12px;margin-bottom:60px}.feature-item[data-v-74241f0c]{display:flex;align-items:center;gap:8px}.check-icon[data-v-74241f0c]{color:#2962ff;flex-shrink:0}.feature-text[data-v-74241f0c]{font-size:14px;font-weight:500;line-height:1.5;color:#000}.feature-text.highlight[data-v-74241f0c]{color:#2962ff}.upgrade-button[data-v-74241f0c]{font-weight:500;font-size:16px;height:48px;display:flex;align-items:center;justify-content:center;border-radius:12px;cursor:pointer;color:#fff;background:radial-gradient(67.24% 88.54% at 52.67% 100%,#5adeff,#2986ff)}.content-right[data-v-74241f0c]{display:flex;align-items:center;justify-content:center}.upgrade-image[data-v-74241f0c]{width:480px;height:100%;background-repeat:no-repeat;background-position:center;background-size:contain}.word-translate-bubble[data-v-eaaa630d]{position:absolute;display:flex;align-items:center;justify-content:center;border-radius:4px;gap:2px;height:28px;padding-right:6px;padding-left:6px;background:#f7f7f7;z-index:2147483647;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014;color:#333;font-size:14px;-webkit-user-select:none;user-select:none;cursor:pointer}.word-translate-bubble .translate-text-sharp-angle[data-v-eaaa630d]{position:absolute;width:4px;height:4px;background:#f7f7f7;border:.5px solid rgb(207,207,207);box-shadow:0 6px 12px #00000014}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle[data-v-eaaa630d]{transform:rotate(45deg)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle[data-v-eaaa630d]{transform:rotate(-45deg)}.word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-eaaa630d]{top:-2px;inset-inline-start:10px;border-bottom:none!important}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-eaaa630d]{border-right:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-eaaa630d]{border-left:none!important}.word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-eaaa630d]{bottom:-2px;border-top:none!important;inset-inline-end:10px}[dir=ltr] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-eaaa630d]{border-left:none!important}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-eaaa630d]{border-right:none!important}.word-translate-bubble.black-theme[data-v-eaaa630d]{background:#000;color:#fff;border:.5px solid rgb(54,54,54)}.word-translate-bubble.black-theme .translate-text-sharp-angle[data-v-eaaa630d]{background:#000;border:.5px solid rgb(54,54,54)}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-top[data-v-eaaa630d]{inset-inline-end:10px;inset-inline-start:unset}[dir=rtl] .word-translate-bubble .translate-text-sharp-angle.sharp-bottom[data-v-eaaa630d]{inset-inline-start:10px;inset-inline-end:unset}.mail-setting-container[data-v-e5740f48]{position:relative}.mail-setting-btn[data-v-e5740f48]{height:40px;width:50px;display:flex;align-items:center;justify-content:center}.mail-welcome-banner[data-v-e5740f48]{position:absolute;top:100%;min-width:360px;background-color:#fff;border:1px solid rgb(224,224,224);border-radius:16px;z-index:2147483647;box-shadow:0 12px 32px #00000014}.banner-content[data-v-e5740f48]{padding:20px}.header-section[data-v-e5740f48]{position:relative;display:flex;margin-bottom:16px}.title[data-v-e5740f48]{flex:1;font-size:14px;font-weight:600;line-height:24px;color:#000000e6}[dir=ltr] .title[data-v-e5740f48]{margin-left:6px}[dir=rtl] .title[data-v-e5740f48]{margin-right:6px}[dir=ltr] .close-button[data-v-e5740f48]{margin-left:4px}[dir=rtl] .close-button[data-v-e5740f48]{margin-right:4px}.feature-item[data-v-e5740f48]{display:flex;align-items:center;margin-bottom:10px;gap:6px}.feature-item[data-v-e5740f48]:last-child{margin-bottom:0}.feature-text[data-v-e5740f48]{flex:1;font-size:14px;font-weight:400;color:#0009}.separator[data-v-e5740f48]{width:100%;height:1px;background-color:#0000001a}.bottom-section[data-v-e5740f48]{display:flex;align-items:center;justify-content:space-between;padding:16px 20px}.enable-text[data-v-e5740f48]{font-size:14px;font-weight:400;color:#000000e6}.mail-setting-btn-red-hot[data-v-e5740f48]{position:absolute;top:8px;width:4px;height:4px;border-radius:50%;background:#ff6c52}[dir=ltr] .mail-setting-btn-red-hot[data-v-e5740f48]{right:8px}[dir=rtl] .mail-setting-btn-red-hot[data-v-e5740f48]{left:8px}[data-v-17b61cdd] .base-select .select-options .option-list .option{min-width:260px}.mail-translate-banner-container[data-v-17b61cdd]{position:relative;font-size:14px;font-weight:400;-webkit-user-select:none;user-select:none;padding-bottom:10px}.translate-btn[data-v-17b61cdd]{width:fit-content;display:inline-flex;vertical-align:middle;margin-top:4px;min-width:220px;position:relative;align-items:center;height:40px;cursor:pointer}[dir=ltr] .translate-btn[data-v-17b61cdd]{text-align:left;margin-right:8px}[dir=rtl] .translate-btn[data-v-17b61cdd]{text-align:right;margin-left:8px}.translate-btn .logo-container[data-v-17b61cdd]{flex:1;display:flex;height:100%;gap:8px;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .logo-container[data-v-17b61cdd]{padding-left:8px;padding-right:16px;border-top-left-radius:48px;border-bottom-left-radius:48px}[dir=rtl] .translate-btn .logo-container[data-v-17b61cdd]{padding-right:8px;padding-left:16px;border-top-right-radius:48px;border-bottom-right-radius:48px}.translate-btn .logo-container .logo[data-v-17b61cdd]{width:24px;height:24px;display:flex;align-items:center;justify-content:center;background-color:#2962ff;border-radius:50%}.translate-btn .logo-container .text-content[data-v-17b61cdd]{flex:1;font-weight:600;color:#2962ff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.translate-btn .logo-container[data-v-17b61cdd]:hover{background-color:#f0f0f0}.translate-btn .logo-container[data-v-17b61cdd]:active,.translate-btn .logo-container.active[data-v-17b61cdd]{background-color:#e0e0e0}.translate-btn .setting-container[data-v-17b61cdd]{display:flex;width:44px;height:100%;align-items:center;justify-content:center;border:1px solid rgb(224,224,224)}[dir=ltr] .translate-btn .setting-container[data-v-17b61cdd]{border-left:none;border-top-right-radius:48px;border-bottom-right-radius:48px}[dir=rtl] .translate-btn .setting-container[data-v-17b61cdd]{border-right:none;border-top-left-radius:48px;border-bottom-left-radius:48px}.translate-btn .setting-container[data-v-17b61cdd]:hover{background-color:#f0f0f0}.translate-btn .setting-container[data-v-17b61cdd]:active,.translate-btn .setting-container.active[data-v-17b61cdd]{background-color:#e0e0e0}.translate-btn .translate-setting-container[data-v-17b61cdd]{position:absolute;top:calc(100% + 8px);z-index:1}[dir=ltr] .translate-btn .translate-setting-container[data-v-17b61cdd]{right:0}[dir=rtl] .translate-btn .translate-setting-container[data-v-17b61cdd]{left:0}.translate-btn .exceed-limit-tip[data-v-17b61cdd]{position:absolute;z-index:1;width:270px;top:calc(100% + 8px)}[dir=ltr] .translate-btn .exceed-limit-tip[data-v-17b61cdd]{right:50%;transform:translate(50%)}[dir=rtl] .translate-btn .exceed-limit-tip[data-v-17b61cdd]{left:50%;transform:translate(-50%)}.send-email-btn[data-v-17b61cdd]{display:inline-flex;vertical-align:middle;width:fit-content;gap:4px;height:40px;margin-top:4px;padding:0 16px;cursor:pointer;align-items:center;border:1px solid rgb(224,224,224);border-radius:48px}[dir=ltr] .send-email-btn[data-v-17b61cdd]{text-align:left;margin-right:8px}[dir=rtl] .send-email-btn[data-v-17b61cdd]{text-align:right;margin-left:8px}.send-email-btn[data-v-17b61cdd]:hover{background-color:#f0f0f0}.send-email-btn[data-v-17b61cdd]:active,.send-email-btn.active[data-v-17b61cdd]{background-color:#e0e0e0}.send-email-btn .send-mail-icon[data-v-17b61cdd]{opacity:.9}.send-email-btn .send-text-content[data-v-17b61cdd]{color:#000;opacity:.9;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.btn-disabled[data-v-17b61cdd]{opacity:.5;cursor:not-allowed}.btn-disabled[data-v-17b61cdd]:hover,.btn-disabled[data-v-17b61cdd]:active,.btn-disabled.active[data-v-17b61cdd]{background-color:transparent!important}@media (max-width: 730px){.mail-translate-banner-container[data-v-17b61cdd]{display:flex;flex-direction:column}}.caption-window-container[data-v-d1944dd0]{position:absolute;width:100%;top:0;pointer-events:none;z-index:10;font-size:16px;color:#ffffffe6;font-weight:400;line-height:150%;transition:bottom .1s ease-in-out}[dir=ltr] .caption-window-container[data-v-d1944dd0]{left:0}[dir=rtl] .caption-window-container[data-v-d1944dd0]{right:0}.caption-window-content[data-v-d1944dd0]{position:absolute;left:40px;right:40px;bottom:5px;display:flex;flex-direction:column;align-items:center}.caption-window-text[data-v-d1944dd0]{background-color:#000000bf;padding:2px 8px;white-space:pre-wrap;display:none}.subtitle-guide-dialog-container[data-v-e6e519b9]{max-width:400px;min-width:320px;width:max-content;white-space:normal;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 32px #00000014;padding:20px 24px 24px;box-sizing:border-box;display:flex;flex-direction:column;text-shadow:none;font-size:14px}.subtitle-guide-dialog-container .dialog-title[data-v-e6e519b9]{color:#000000e6;font-weight:600;line-height:20px;margin-bottom:8px}.subtitle-guide-dialog-container .dialog-description[data-v-e6e519b9]{color:#0009;margin-bottom:20px}.subtitle-guide-dialog-container .dialog-actions[data-v-e6e519b9]{display:flex;gap:8px;justify-content:end}.subtitle-guide-dialog-container .got-it-button[data-v-e6e519b9]{height:40px;padding-left:16px;padding-right:16px;font-weight:600}.subtitle-guide-dialog-container .explore-button[data-v-e6e519b9]{height:40px;font-weight:600}.subtitle-icon[data-v-64fd24a9]{display:inline-flex;align-items:center;justify-content:center}.menu-cell[data-v-de94c478]{display:flex;align-items:center;justify-content:space-between;min-height:48px;padding:0 24px}.menu-cell[data-v-de94c478]:hover{background-color:#ffffff1a}.menu-cell.disabled[data-v-de94c478]:hover{background-color:transparent}.menu-cell .menu-cell-left[data-v-de94c478]{display:flex;align-items:center;gap:8px;flex:1}.menu-cell .menu-cell-right[data-v-de94c478]{display:flex;align-items:center;gap:4px}.menu-container[data-v-20d5d8e7]{display:flex;flex-direction:column;background-color:#000c;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:8px 0;box-shadow:0 2px 4px #0000004d}.menu-divider[data-v-f1c6b8bc]{height:1px;background-color:#fff3;margin:2px 24px}.select-list-item[data-v-cab79358]{display:flex;gap:8px;align-items:center;height:48px;padding:0 24px}.select-list-item[data-v-cab79358]:hover{background-color:#ffffff1a}.menu-header[data-v-4535d3fb]{display:flex;align-items:center;gap:8px;height:48px;padding:0 24px;overflow:hidden}.menu-header .menu-header-title[data-v-4535d3fb]{font-weight:700}.service-list-container[data-v-11d9fc6d]{flex:1;overflow:auto}.group-title[data-v-11d9fc6d]{padding:0 24px;display:flex;gap:8px;margin-top:16px;margin-bottom:8px;align-items:center}.group-title .group-title-text[data-v-11d9fc6d]{font-size:12px;color:#fff9;font-weight:600}.service-item[data-v-11d9fc6d]{display:flex;align-items:center;gap:8px;flex:1}.service-desc[data-v-11d9fc6d]{font-size:12px;color:#fff9}.upgrade-prompt-card[data-v-b253b8d0]{position:relative;white-space:normal;padding:20px 24px 24px;text-shadow:none;min-width:360px;background:#fff;border:1px solid rgb(224,224,224);border-radius:16px;box-shadow:0 12px 24px #00000014;cursor:default}.upgrade-prompt-card .close-button[data-v-b253b8d0]{position:absolute;top:18px;cursor:pointer}[dir=ltr] .upgrade-prompt-card .close-button[data-v-b253b8d0]{right:18px}[dir=rtl] .upgrade-prompt-card .close-button[data-v-b253b8d0]{left:18px}.upgrade-prompt-card .title[data-v-b253b8d0]{margin-bottom:16px;font-size:14px;font-weight:600;color:#000000e6}.upgrade-prompt-card .promo-section[data-v-b253b8d0]{display:flex;align-items:flex-start;gap:12px;margin-bottom:20px}.upgrade-prompt-card .gift-icon[data-v-b253b8d0]{width:28px;height:28px;flex-shrink:0}.upgrade-prompt-card .promo-text[data-v-b253b8d0]{flex:1;font-size:14px;color:#000000e6}.upgrade-prompt-card .promo-color-text[data-v-b253b8d0]{color:#ff851a;font-weight:600}.upgrade-prompt-card .button-group[data-v-b253b8d0]{display:flex;gap:12px;justify-content:end}.upgrade-prompt-card .skip-button[data-v-b253b8d0],.upgrade-prompt-card .participate-button[data-v-b253b8d0]{height:40px;font-weight:600;padding:12px}.try-ai-model-tip-wrapper[data-v-eda2ac46]{min-width:260px;max-width:300px;width:max-content;white-space:normal;position:relative;border-radius:8px;box-shadow:0 12px 32px #0d0d0d14;text-shadow:none}.try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{position:absolute;z-index:0;top:0;bottom:0;border-radius:inherit}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{left:0;right:0;background:linear-gradient(90deg,#47c8ff,#2962ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip-bg[data-v-eda2ac46]{right:0;left:0;background:linear-gradient(-90deg,#47c8ff,#2962ff)}.try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{position:relative;font-size:12px;line-height:1.5;border-radius:inherit;border:1px solid transparent;background-color:#fff;background-clip:padding-box}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 34px 12px 16px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip[data-v-eda2ac46]{padding:12px 16px 12px 34px}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .tip-text[data-v-eda2ac46]{color:#333}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-text-fill-color:transparent;color:transparent;font-weight:600;font-size:12px;cursor:pointer;position:relative;display:inline-block}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{background:linear-gradient(-90deg,#2962ff,#47c8ff)}[dir] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]{-webkit-background-clip:text;background-clip:text}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{content:"";position:absolute;bottom:0;width:100%;height:1px}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{left:0;background:linear-gradient(90deg,#2962ff,#47c8ff)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:after{right:0;background:linear-gradient(-90deg,#2962ff,#47c8ff)}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:hover{opacity:.8}.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn[data-v-eda2ac46]:active,.try-ai-model-tip-wrapper .try-ai-model-tip .tip-content .try-text-btn.active[data-v-eda2ac46]{opacity:1}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]{position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow[data-v-eda2ac46]:after{content:"";position:absolute;width:0;height:0}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{bottom:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-top:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{top:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-top:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-bottom[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{top:-5px;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:5px solid #4a9eff}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{left:50%;transform:translate(-50%)}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]{right:50%;transform:translate(50%)}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{bottom:-6px;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:4px solid white}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{left:-5px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-top[data-v-eda2ac46]:after{right:-5px}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-right[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{top:50%;transform:translateY(-50%);border-top:6px solid transparent;border-bottom:6px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{left:-5px;border-right:5px solid #4a9eff}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]{right:-5px;border-left:5px solid #4a9eff}.try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{top:-5px;border-top:5px solid transparent;border-bottom:5px solid transparent}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{right:-6px;border-right:4px solid white}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .arrow.arrow-left[data-v-eda2ac46]:after{left:-6px;border-left:4px solid white}.try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{position:absolute;top:6px;cursor:pointer}[dir=ltr] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{right:6px}[dir=rtl] .try-ai-model-tip-wrapper .try-ai-model-tip .icon-close[data-v-eda2ac46]{left:6px}.quick-button-container[data-v-693b0bf1]{position:relative;margin:0 16px;padding:0;height:100%;cursor:pointer;z-index:2147483647;display:flex;align-items:center;justify-content:center;font-size:16px;white-space:nowrap;font-weight:400;line-height:20px}.quick-button-container .logo-container[data-v-693b0bf1]{position:relative;width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer}.quick-button-container .logo-container .logo-outer-border[data-v-693b0bf1]{position:absolute;width:36px;height:36px;border:1px solid rgba(255,255,255,.6);border-radius:10px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border[data-v-693b0bf1]{width:30px;height:30px;border:1px solid rgb(255,255,255);border-radius:7px;display:flex;align-items:center;justify-content:center;transition:opacity .2s ease}.quick-button-container .logo-container .logo-outer-border .logo-inner-border .logo-image[data-v-693b0bf1]{width:24px;height:24px;border-radius:4px}.quick-button-container .logo-container.hide-borders .logo-outer-border[data-v-693b0bf1],.quick-button-container .logo-container.hide-borders .logo-outer-border .logo-inner-border[data-v-693b0bf1]{border-color:transparent}.quick-button-container .subtitle-popup-container[data-v-693b0bf1]{position:absolute;bottom:calc(100% - 4px)}.quick-button-container .subtitle-popup-container.hide-borders[data-v-693b0bf1]{bottom:calc(100% - 8px)}.quick-button-container .exceed-limit-tip[data-v-693b0bf1]{width:300px;text-shadow:none;white-space:normal}.quick-button-container .no-caption-tip[data-v-693b0bf1],.quick-button-container .error-tip[data-v-693b0bf1],.quick-button-container .download-tip[data-v-693b0bf1]{color:#fff;font-size:12px;line-height:16px;border-radius:8px;font-weight:400;padding:8px 12px;background-color:#000000bf;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 32px #00000040}.quick-button-container .error-tip[data-v-693b0bf1]{display:flex;align-items:center;gap:4px}.quick-button-container .error-tip .error-tip-close[data-v-693b0bf1] svg path{stroke:currentColor;fill:currentColor}.quick-button-container[data-v-693b0bf1] ::-webkit-scrollbar{width:4px}.quick-button-container[data-v-693b0bf1] ::-webkit-scrollbar-thumb{background-color:#afafaf;border-radius:12px}.root[data-v-0c0be04a]{height:0px!important;width:0px!important;font-size:14px;line-height:normal;letter-spacing:normal;cursor:auto;color:initial;font-style:normal;font-weight:400;font-variant:normal;font-stretch:normal;word-spacing:normal;text-transform:none;text-indent:0;text-align:start;text-shadow:none;visibility:visible;white-space:normal}')})();
var Ru=Object.defineProperty;var Nu=(t,e,n)=>e in t?Ru(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ce=(t,e,n)=>Nu(t,typeof e!="symbol"?e+"":e,n);import{c as ku,B as vt,_ as at,u as vn,a as jt,b as Ho,d as is,e as Tn,E as Er,f as ss,g as or,h as Vo,i as Bu,j as Gr,k as Ou,l as Pu,o as un,v as qt,L as Fu,m as zo,n as jo,w as rr,p as Yo,q as os,M as Xo,C as Mu,r as Ko,T as Fr,s as Qo,t as Zo,x as ls}from"./useViewportBoundary-cun8lXEj.js";import{i as Jo,r as C,d as je,m as yn,u as Xn,c as re,o as B,F as kt,a as rn,n as lt,b as T,e as ve,f as fe,t as ce,g as Uu,h as Tt,j as Z,w as Te,k as Bt,s as ot,M as Ie,l as ct,p as ye,q as k,R as Lt,v as el,x as j,y as ft,z as pt,A as rt,S as Ee,B as mt,C as Mr,D as an,E as dn,G as gn,H as De,I as Qt,O as Br,P as zt,J as St,K as Ma,L as sa,N as Xs,Q as ji,T as V,U as Ur,V as $u,W as Mn,X as ze,Y as Ja,Z as Yi,_ as Ks,$ as qu,a0 as nt,a1 as ei,a2 as ht,a3 as _r,a4 as Jr,a5 as Qs,a6 as Ra,a7 as tl,a8 as zn,a9 as nl,aa as rl,ab as Ln,ac as Fe,ad as la,ae as tt,af as Un,ag as Wt,ah as _n,ai as Je,aj as cn,ak as us,al as Wu,am as ga,an as cs,ao as Zs,ap as nn,aq as ds,ar as Gu,as as Hu,at as ba,au as Vu,av as ha,aw as zu,ax as ps,ay as _t,az as al,aA as Ft,aB as ju,aC as fs,aD as nr,aE as Yu,aF as hi,aG as il,aH as Xu,aI as ln,aJ as Dn,aK as $r,aL as ma,aM as Js,aN as Ku,aO as Qu,aP as Zu,aQ as Ju,aR as eo,aS as mi,aT as ec,aU as tc,aV as nc,aW as rc,aX as Xi,aY as Or,aZ as ac,a_ as ic,a$ as xr,b0 as vi,b1 as sc,b2 as sl,b3 as Ei,b4 as oc,b5 as Hr,b6 as ti,b7 as ni,b8 as Ua,b9 as to,ba as Fn,bb as lc,bc as uc,bd as no,be as cc,bf as dc,bg as Ki,bh as yr,bi as pc,bj as ol,bk as ea,bl as fc,bm as gc,bn as hc,bo as mc,bp as vc,bq as ll,br as Ec,bs as _c,bt as ro,bu as Tc,bv as wc,bw as bc}from"./academia-Cma1O4UX.js";import{t as xc}from"./translations-d0LIz0Lj.js";(function(){var t=window.Document.prototype.createElement,e=window.Document.prototype.createElementNS,n=window.Document.prototype.importNode,r=window.Document.prototype.prepend,a=window.Document.prototype.append,i=window.DocumentFragment.prototype.prepend,s=window.DocumentFragment.prototype.append,o=window.Node.prototype.cloneNode,l=window.Node.prototype.appendChild,c=window.Node.prototype.insertBefore,u=window.Node.prototype.removeChild,f=window.Node.prototype.replaceChild,h=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),b=window.Element.prototype.attachShadow,S=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),x=window.Element.prototype.getAttribute,N=window.Element.prototype.setAttribute,_=window.Element.prototype.removeAttribute,E=window.Element.prototype.toggleAttribute,g=window.Element.prototype.getAttributeNS,p=window.Element.prototype.setAttributeNS,m=window.Element.prototype.removeAttributeNS,d=window.Element.prototype.insertAdjacentElement,J=window.Element.prototype.insertAdjacentHTML,q=window.Element.prototype.prepend,W=window.Element.prototype.append,oe=window.Element.prototype.before,Y=window.Element.prototype.after,H=window.Element.prototype.replaceWith,X=window.Element.prototype.remove,A=window.HTMLElement,D=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),y=window.HTMLElement.prototype.insertAdjacentElement,F=window.HTMLElement.prototype.insertAdjacentHTML,G=new Set;"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(v){return G.add(v)});function K(v){var w=G.has(v);return v=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(v),!w&&v}var de=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function ne(v){var w=v.isConnected;if(w!==void 0)return w;if(de(v))return!0;for(;v&&!(v.__CE_isImportDocument||v instanceof Document);)v=v.parentNode||(window.ShadowRoot&&v instanceof ShadowRoot?v.host:void 0);return!(!v||!(v.__CE_isImportDocument||v instanceof Document))}function we(v){var w=v.children;if(w)return Array.prototype.slice.call(w);for(w=[],v=v.firstChild;v;v=v.nextSibling)v.nodeType===Node.ELEMENT_NODE&&w.push(v);return w}function Q(v,w){for(;w&&w!==v&&!w.nextSibling;)w=w.parentNode;return w&&w!==v?w.nextSibling:null}function Le(v,w,I){for(var U=v;U;){if(U.nodeType===Node.ELEMENT_NODE){var P=U;w(P);var z=P.localName;if(z==="link"&&P.getAttribute("rel")==="import"){if(U=P.import,I===void 0&&(I=new Set),U instanceof Node&&!I.has(U))for(I.add(U),U=U.firstChild;U;U=U.nextSibling)Le(U,w,I);U=Q(v,P);continue}else if(z==="template"){U=Q(v,P);continue}if(P=P.__CE_shadowRoot)for(P=P.firstChild;P;P=P.nextSibling)Le(P,w,I)}U=U.firstChild?U.firstChild:Q(v,U)}}function ie(){var v=!(Ge==null||!Ge.noDocumentConstructionObserver),w=!(Ge==null||!Ge.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=w,this.I=!v}function O(v,w,I,U){var P=window.ShadyDOM;if(v.shadyDomFastWalk&&P&&P.inUse){if(w.nodeType===Node.ELEMENT_NODE&&I(w),w.querySelectorAll)for(v=P.nativeMethods.querySelectorAll.call(w,"*"),w=0;w<v.length;w++)I(v[w])}else Le(w,I,U)}function M(v,w){v.j=!0,v.m.push(w)}function ee(v,w){v.j=!0,v.g.push(w)}function Ae(v,w){v.j&&O(v,w,function(I){return Re(v,I)})}function Re(v,w){if(v.j&&!w.__CE_patched){w.__CE_patched=!0;for(var I=0;I<v.m.length;I++)v.m[I](w);for(I=0;I<v.g.length;I++)v.g[I](w)}}function Ue(v,w){var I=[];for(O(v,w,function(P){return I.push(P)}),w=0;w<I.length;w++){var U=I[w];U.__CE_state===1?v.connectedCallback(U):Me(v,U)}}function pe(v,w){var I=[];for(O(v,w,function(P){return I.push(P)}),w=0;w<I.length;w++){var U=I[w];U.__CE_state===1&&v.disconnectedCallback(U)}}function ge(v,w,I){I=I===void 0?{}:I;var U=I.J,P=I.upgrade||function(se){return Me(v,se)},z=[];for(O(v,w,function(se){if(v.j&&Re(v,se),se.localName==="link"&&se.getAttribute("rel")==="import"){var me=se.import;me instanceof Node&&(me.__CE_isImportDocument=!0,me.__CE_registry=document.__CE_registry),me&&me.readyState==="complete"?me.__CE_documentLoadHandled=!0:se.addEventListener("load",function(){var xe=se.import;if(!xe.__CE_documentLoadHandled){xe.__CE_documentLoadHandled=!0;var He=new Set;U&&(U.forEach(function(bt){return He.add(bt)}),He.delete(xe)),ge(v,xe,{J:He,upgrade:P})}})}else z.push(se)},U),w=0;w<z.length;w++)P(z[w])}function Me(v,w){try{var I=w.ownerDocument,U=I.__CE_registry,P=U&&(I.defaultView||I.__CE_isImportDocument)?Ne(U,w.localName):void 0;if(P&&w.__CE_state===void 0){P.constructionStack.push(w);try{try{if(new P.constructorFunction!==w)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{P.constructionStack.pop()}}catch(xe){throw w.__CE_state=2,xe}if(w.__CE_state=1,w.__CE_definition=P,P.attributeChangedCallback&&w.hasAttributes()){var z=P.observedAttributes;for(P=0;P<z.length;P++){var se=z[P],me=w.getAttribute(se);me!==null&&v.attributeChangedCallback(w,se,null,me,null)}}ne(w)&&v.connectedCallback(w)}}catch(xe){Ye(xe)}}ie.prototype.connectedCallback=function(v){var w=v.__CE_definition;if(w.connectedCallback)try{w.connectedCallback.call(v)}catch(I){Ye(I)}},ie.prototype.disconnectedCallback=function(v){var w=v.__CE_definition;if(w.disconnectedCallback)try{w.disconnectedCallback.call(v)}catch(I){Ye(I)}},ie.prototype.attributeChangedCallback=function(v,w,I,U,P){var z=v.__CE_definition;if(z.attributeChangedCallback&&-1<z.observedAttributes.indexOf(w))try{z.attributeChangedCallback.call(v,w,I,U,P)}catch(se){Ye(se)}};function qe(v,w,I,U){var P=w.__CE_registry;if(P&&(U===null||U==="http://www.w3.org/1999/xhtml")&&(P=Ne(P,I)))try{var z=new P.constructorFunction;if(z.__CE_state===void 0||z.__CE_definition===void 0)throw Error("Failed to construct '"+I+"': The returned value was not constructed with the HTMLElement constructor.");if(z.namespaceURI!=="http://www.w3.org/1999/xhtml")throw Error("Failed to construct '"+I+"': The constructed element's namespace must be the HTML namespace.");if(z.hasAttributes())throw Error("Failed to construct '"+I+"': The constructed element must not have any attributes.");if(z.firstChild!==null)throw Error("Failed to construct '"+I+"': The constructed element must not have any children.");if(z.parentNode!==null)throw Error("Failed to construct '"+I+"': The constructed element must not have a parent node.");if(z.ownerDocument!==w)throw Error("Failed to construct '"+I+"': The constructed element's owner document is incorrect.");if(z.localName!==I)throw Error("Failed to construct '"+I+"': The constructed element's local name is incorrect.");return z}catch(se){return Ye(se),w=U===null?t.call(w,I):e.call(w,U,I),Object.setPrototypeOf(w,HTMLUnknownElement.prototype),w.__CE_state=2,w.__CE_definition=void 0,Re(v,w),w}return w=U===null?t.call(w,I):e.call(w,U,I),Re(v,w),w}function Ye(v){var w="",I="",U=0,P=0;v instanceof Error?(w=v.message,I=v.sourceURL||v.fileName||"",U=v.line||v.lineNumber||0,P=v.column||v.columnNumber||0):w="Uncaught "+String(v);var z=void 0;ErrorEvent.prototype.initErrorEvent===void 0?z=new ErrorEvent("error",{cancelable:!0,message:w,filename:I,lineno:U,colno:P,error:v}):(z=document.createEvent("ErrorEvent"),z.initErrorEvent("error",!1,!0,w,I,U),z.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),z.error===void 0&&Object.defineProperty(z,"error",{configurable:!0,enumerable:!0,get:function(){return v}}),window.dispatchEvent(z),z.defaultPrevented||console.error(v)}function wt(){var v=this;this.g=void 0,this.F=new Promise(function(w){v.l=w})}wt.prototype.resolve=function(v){if(this.g)throw Error("Already resolved.");this.g=v,this.l(v)};function dt(v){var w=document;this.l=void 0,this.h=v,this.g=w,ge(this.h,this.g),this.g.readyState==="loading"&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function We(v){v.l&&v.l.disconnect()}dt.prototype.G=function(v){var w=this.g.readyState;for(w!=="interactive"&&w!=="complete"||We(this),w=0;w<v.length;w++)for(var I=v[w].addedNodes,U=0;U<I.length;U++)ge(this.h,I[U])};function ke(v){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(w){return w()},this.i=!1,this.v=[],this.h=v,this.D=v.I?new dt(v):void 0}ke.prototype.H=function(v,w){var I=this;if(!(w instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");gt(this,v),this.s.set(v,w),this.v.push(v),this.i||(this.i=!0,this.o(function(){return Be(I)}))},ke.prototype.define=function(v,w){var I=this;if(!(w instanceof Function))throw new TypeError("Custom element constructors must be functions.");gt(this,v),et(this,v,w),this.v.push(v),this.i||(this.i=!0,this.o(function(){return Be(I)}))};function gt(v,w){if(!K(w))throw new SyntaxError("The element name '"+w+"' is not valid.");if(Ne(v,w))throw Error("A custom element with name '"+(w+"' has already been defined."));if(v.A)throw Error("A custom element is already being defined.")}function et(v,w,I){v.A=!0;var U;try{var P=I.prototype;if(!(P instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var z=function(bt){var Dt=P[bt];if(Dt!==void 0&&!(Dt instanceof Function))throw Error("The '"+bt+"' callback must be a function.");return Dt},se=z("connectedCallback"),me=z("disconnectedCallback"),xe=z("adoptedCallback"),He=(U=z("attributeChangedCallback"))&&I.observedAttributes||[]}catch(bt){throw bt}finally{v.A=!1}return I={localName:w,constructorFunction:I,connectedCallback:se,disconnectedCallback:me,adoptedCallback:xe,attributeChangedCallback:U,observedAttributes:He,constructionStack:[]},v.u.set(w,I),v.C.set(I.constructorFunction,I),I}ke.prototype.upgrade=function(v){ge(this.h,v)};function Be(v){if(v.i!==!1){v.i=!1;for(var w=[],I=v.v,U=new Map,P=0;P<I.length;P++)U.set(I[P],[]);for(ge(v.h,document,{upgrade:function(xe){if(xe.__CE_state===void 0){var He=xe.localName,bt=U.get(He);bt?bt.push(xe):v.u.has(He)&&w.push(xe)}}}),P=0;P<w.length;P++)Me(v.h,w[P]);for(P=0;P<I.length;P++){for(var z=I[P],se=U.get(z),me=0;me<se.length;me++)Me(v.h,se[me]);(z=v.B.get(z))&&z.resolve(void 0)}I.length=0}}ke.prototype.get=function(v){if(v=Ne(this,v))return v.constructorFunction},ke.prototype.whenDefined=function(v){if(!K(v))return Promise.reject(new SyntaxError("'"+v+"' is not a valid custom element name."));var w=this.B.get(v);if(w)return w.F;w=new wt,this.B.set(v,w);var I=this.u.has(v)||this.s.has(v);return v=this.v.indexOf(v)===-1,I&&v&&w.resolve(void 0),w.F},ke.prototype.polyfillWrapFlushCallback=function(v){this.D&&We(this.D);var w=this.o;this.o=function(I){return v(function(){return w(I)})}};function Ne(v,w){var I=v.u.get(w);if(I)return I;if(I=v.s.get(w)){v.s.delete(w);try{return et(v,w,I())}catch(U){Ye(U)}}}ke.prototype.define=ke.prototype.define,ke.prototype.upgrade=ke.prototype.upgrade,ke.prototype.get=ke.prototype.get,ke.prototype.whenDefined=ke.prototype.whenDefined,ke.prototype.polyfillDefineLazy=ke.prototype.H,ke.prototype.polyfillWrapFlushCallback=ke.prototype.polyfillWrapFlushCallback;function Qe(v,w,I){function U(P){return function(z){for(var se=[],me=0;me<arguments.length;++me)se[me]=arguments[me];me=[];for(var xe=[],He=0;He<se.length;He++){var bt=se[He];if(bt instanceof Element&&ne(bt)&&xe.push(bt),bt instanceof DocumentFragment)for(bt=bt.firstChild;bt;bt=bt.nextSibling)me.push(bt);else me.push(bt)}for(P.apply(this,se),se=0;se<xe.length;se++)pe(v,xe[se]);if(ne(this))for(se=0;se<me.length;se++)xe=me[se],xe instanceof Element&&Ue(v,xe)}}I.prepend!==void 0&&(w.prepend=U(I.prepend)),I.append!==void 0&&(w.append=U(I.append))}function ae(v){Document.prototype.createElement=function(w){return qe(v,this,w,null)},Document.prototype.importNode=function(w,I){return w=n.call(this,w,!!I),this.__CE_registry?ge(v,w):Ae(v,w),w},Document.prototype.createElementNS=function(w,I){return qe(v,this,I,w)},Qe(v,Document.prototype,{prepend:r,append:a})}function be(v){function w(U){return function(P){for(var z=[],se=0;se<arguments.length;++se)z[se]=arguments[se];se=[];for(var me=[],xe=0;xe<z.length;xe++){var He=z[xe];if(He instanceof Element&&ne(He)&&me.push(He),He instanceof DocumentFragment)for(He=He.firstChild;He;He=He.nextSibling)se.push(He);else se.push(He)}for(U.apply(this,z),z=0;z<me.length;z++)pe(v,me[z]);if(ne(this))for(z=0;z<se.length;z++)me=se[z],me instanceof Element&&Ue(v,me)}}var I=Element.prototype;oe!==void 0&&(I.before=w(oe)),Y!==void 0&&(I.after=w(Y)),H!==void 0&&(I.replaceWith=function(U){for(var P=[],z=0;z<arguments.length;++z)P[z]=arguments[z];z=[];for(var se=[],me=0;me<P.length;me++){var xe=P[me];if(xe instanceof Element&&ne(xe)&&se.push(xe),xe instanceof DocumentFragment)for(xe=xe.firstChild;xe;xe=xe.nextSibling)z.push(xe);else z.push(xe)}for(me=ne(this),H.apply(this,P),P=0;P<se.length;P++)pe(v,se[P]);if(me)for(pe(v,this),P=0;P<z.length;P++)se=z[P],se instanceof Element&&Ue(v,se)}),X!==void 0&&(I.remove=function(){var U=ne(this);X.call(this),U&&pe(v,this)})}function Oe(v){function w(P,z){Object.defineProperty(P,"innerHTML",{enumerable:z.enumerable,configurable:!0,get:z.get,set:function(se){var me=this,xe=void 0;if(ne(this)&&(xe=[],O(v,this,function(Dt){Dt!==me&&xe.push(Dt)})),z.set.call(this,se),xe)for(var He=0;He<xe.length;He++){var bt=xe[He];bt.__CE_state===1&&v.disconnectedCallback(bt)}return this.ownerDocument.__CE_registry?ge(v,this):Ae(v,this),se}})}function I(P,z){P.insertAdjacentElement=function(se,me){var xe=ne(me);return se=z.call(this,se,me),xe&&pe(v,me),ne(se)&&Ue(v,me),se}}function U(P,z){function se(me,xe){for(var He=[];me!==xe;me=me.nextSibling)He.push(me);for(xe=0;xe<He.length;xe++)ge(v,He[xe])}P.insertAdjacentHTML=function(me,xe){if(me=me.toLowerCase(),me==="beforebegin"){var He=this.previousSibling;z.call(this,me,xe),se(He||this.parentNode.firstChild,this)}else if(me==="afterbegin")He=this.firstChild,z.call(this,me,xe),se(this.firstChild,He);else if(me==="beforeend")He=this.lastChild,z.call(this,me,xe),se(He||this.firstChild,null);else if(me==="afterend")He=this.nextSibling,z.call(this,me,xe),se(this.nextSibling,He);else throw new SyntaxError("The value provided ("+String(me)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.")}}b&&(Element.prototype.attachShadow=function(P){if(P=b.call(this,P),v.j&&!P.__CE_patched){P.__CE_patched=!0;for(var z=0;z<v.m.length;z++)v.m[z](P)}return this.__CE_shadowRoot=P}),S&&S.get?w(Element.prototype,S):D&&D.get?w(HTMLElement.prototype,D):ee(v,function(P){w(P,{enumerable:!0,configurable:!0,get:function(){return o.call(this,!0).innerHTML},set:function(z){var se=this.localName==="template",me=se?this.content:this,xe=e.call(document,this.namespaceURI,this.localName);for(xe.innerHTML=z;0<me.childNodes.length;)u.call(me,me.childNodes[0]);for(z=se?xe.content:xe;0<z.childNodes.length;)l.call(me,z.childNodes[0])}})}),Element.prototype.setAttribute=function(P,z){if(this.__CE_state!==1)return N.call(this,P,z);var se=x.call(this,P);N.call(this,P,z),z=x.call(this,P),v.attributeChangedCallback(this,P,se,z,null)},Element.prototype.setAttributeNS=function(P,z,se){if(this.__CE_state!==1)return p.call(this,P,z,se);var me=g.call(this,P,z);p.call(this,P,z,se),se=g.call(this,P,z),v.attributeChangedCallback(this,z,me,se,P)},Element.prototype.removeAttribute=function(P){if(this.__CE_state!==1)return _.call(this,P);var z=x.call(this,P);_.call(this,P),z!==null&&v.attributeChangedCallback(this,P,z,null,null)},E&&(Element.prototype.toggleAttribute=function(P,z){if(this.__CE_state!==1)return E.call(this,P,z);var se=x.call(this,P),me=se!==null;return z=E.call(this,P,z),me!==z&&v.attributeChangedCallback(this,P,se,z?"":null,null),z}),Element.prototype.removeAttributeNS=function(P,z){if(this.__CE_state!==1)return m.call(this,P,z);var se=g.call(this,P,z);m.call(this,P,z);var me=g.call(this,P,z);se!==me&&v.attributeChangedCallback(this,z,se,me,P)},y?I(HTMLElement.prototype,y):d&&I(Element.prototype,d),F?U(HTMLElement.prototype,F):J&&U(Element.prototype,J),Qe(v,Element.prototype,{prepend:q,append:W}),be(v)}var Ze={};function le(v){function w(){var I=this.constructor,U=document.__CE_registry.C.get(I);if(!U)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var P=U.constructionStack;if(P.length===0)return P=t.call(document,U.localName),Object.setPrototypeOf(P,I.prototype),P.__CE_state=1,P.__CE_definition=U,Re(v,P),P;var z=P.length-1,se=P[z];if(se===Ze)throw Error("Failed to construct '"+U.localName+"': This element was already constructed.");return P[z]=Ze,Object.setPrototypeOf(se,I.prototype),Re(v,se),se}w.prototype=A.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:w}),window.HTMLElement=w}function Se(v){function w(I,U){Object.defineProperty(I,"textContent",{enumerable:U.enumerable,configurable:!0,get:U.get,set:function(P){if(this.nodeType===Node.TEXT_NODE)U.set.call(this,P);else{var z=void 0;if(this.firstChild){var se=this.childNodes,me=se.length;if(0<me&&ne(this)){z=Array(me);for(var xe=0;xe<me;xe++)z[xe]=se[xe]}}if(U.set.call(this,P),z)for(P=0;P<z.length;P++)pe(v,z[P])}}})}Node.prototype.insertBefore=function(I,U){if(I instanceof DocumentFragment){var P=we(I);if(I=c.call(this,I,U),ne(this))for(U=0;U<P.length;U++)Ue(v,P[U]);return I}return P=I instanceof Element&&ne(I),U=c.call(this,I,U),P&&pe(v,I),ne(this)&&Ue(v,I),U},Node.prototype.appendChild=function(I){if(I instanceof DocumentFragment){var U=we(I);if(I=l.call(this,I),ne(this))for(var P=0;P<U.length;P++)Ue(v,U[P]);return I}return U=I instanceof Element&&ne(I),P=l.call(this,I),U&&pe(v,I),ne(this)&&Ue(v,I),P},Node.prototype.cloneNode=function(I){return I=o.call(this,!!I),this.ownerDocument.__CE_registry?ge(v,I):Ae(v,I),I},Node.prototype.removeChild=function(I){var U=I instanceof Element&&ne(I),P=u.call(this,I);return U&&pe(v,I),P},Node.prototype.replaceChild=function(I,U){if(I instanceof DocumentFragment){var P=we(I);if(I=f.call(this,I,U),ne(this))for(pe(v,U),U=0;U<P.length;U++)Ue(v,P[U]);return I}P=I instanceof Element&&ne(I);var z=f.call(this,I,U),se=ne(this);return se&&pe(v,U),P&&pe(v,I),se&&Ue(v,I),z},h&&h.get?w(Node.prototype,h):M(v,function(I){w(I,{enumerable:!0,configurable:!0,get:function(){for(var U=[],P=this.firstChild;P;P=P.nextSibling)P.nodeType!==Node.COMMENT_NODE&&U.push(P.textContent);return U.join("")},set:function(U){for(;this.firstChild;)u.call(this,this.firstChild);U!=null&&U!==""&&l.call(this,document.createTextNode(U))}})})}var Ge=window.customElements;function Xe(){var v=new ie;le(v),ae(v),Qe(v,DocumentFragment.prototype,{prepend:i,append:s}),Se(v),Oe(v),window.CustomElementRegistry=ke,v=new ke(v),document.__CE_registry=v,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:v})}Ge&&!Ge.forcePolyfill&&typeof Ge.define=="function"&&typeof Ge.get=="function"||Xe(),window.__CE_installPolyfill=Xe}).call(self);const yc="__wps-translate-entry-content-css__";class Ac extends HTMLElement{constructor(){super(...arguments);Ce(this,"shadow",null);Ce(this,"vueApp",null);Ce(this,"appComponent",null);Ce(this,"props")}connectedCallback(){if(!this.shadow){this.shadow=this.attachShadow({mode:"open"});const n=window[yc];n&&n.forEach(r=>{var i;const a=document.createElement("style");a.appendChild(document.createTextNode(r)),(i=this.shadow)==null||i.appendChild(a)})}!this.vueApp&&this.appComponent&&(this.vueApp=this.createVueApp(this.shadow,this.appComponent,this.props))}disconnectedCallback(){this.vueApp&&this.vueApp.unmount(),this.vueApp=null,this.shadow=null}createVueApp(n,r,a){const i=ku(r,a||{});return i.use(Jo),i.mount(n),i}cleanup(){this.disconnectedCallback()}}function Cc(t){customElements.get(t)||customElements.define(t,Ac)}function sr(t,e,n=!0,r){if(n){let i=document.querySelectorAll(t);i&&(i.forEach(s=>s.remove()),i=null)}Cc(t);const a=document.createElement(t);return a.appComponent=e,r&&(a.props=r),a}const Sc=C();function gs(){return{skuInfo:Sc}}const Dc={class:"buy-sku"},Lc=["onClick"],Ic={class:"permit-text flex-jc-sb"},Rc={class:"title"},Nc={key:0,class:"popular-tag"},kc={class:"price-text flex-jc-sb"},Bc={class:"price"},Oc={class:"price-value"},Pc={class:"price-unit"},Fc={class:"price-total-text"},Mc=je({__name:"BuySku",props:yn({skuList:{}},{modelValue:{default:void 0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const e=Xn(t,"modelValue");function n(a){e.value=a}function r(a){var i;return(a==null?void 0:a.item_label_text)==="Free"?`${a.currency_symbol}0`:((i=a==null?void 0:a.first_exp_info)==null?void 0:i.price_display)||(a==null?void 0:a.avg_price)}return(a,i)=>(B(),re("div",Dc,[a.skuList.length?(B(!0),re(kt,{key:0},rn(a.skuList,s=>{var o,l,c,u,f;return B(),re("div",{class:lt(["buy-sku-item",{selected:s.id===((o=e.value)==null?void 0:o.id)}]),key:s.id,onClick:h=>n(s)},[T("div",Ic,[T("div",Rc,[fe(vt,{icon:s.id===((l=e.value)==null?void 0:l.id)?"radio-checked":"radio",size:16},null,8,["icon"]),T("span",null,ce(s.permit_text),1)]),(c=s.shop_style)!=null&&c.cont?(B(),re("div",Nc,ce((u=s.shop_style)==null?void 0:u.cont),1)):ve("",!0)]),T("div",kc,[T("div",Bc,[T("span",Oc,ce(r(s)),1),T("span",Pc,ce(((f=s==null?void 0:s.shop_style)==null?void 0:f.custom_unit)||s.price_unit),1)]),T("div",Fc,ce(a.$t("buy.billed",[s.description])),1)])],10,Lc)}),128)):(B(),re(kt,{key:1},rn(2,s=>T("div",{key:s,class:"buy-sku-item"},i[0]||(i[0]=[Uu('<div class="permit-text skeleton" data-v-4db0bd4c><div class="title skeleton-item" data-v-4db0bd4c></div></div><div class="price-text skeleton flex-jc-sb" data-v-4db0bd4c><div class="price skeleton-item" data-v-4db0bd4c></div><div class="price-total-text skeleton-item" data-v-4db0bd4c></div></div>',2)]))),64))]))}}),Uc=at(Mc,[["__scopeId","data-v-4db0bd4c"]]),$c={class:"buy-dialog"},qc={class:"close-btn-wrapper"},Wc={class:"logo-wrapper"},Gc=["src"],Hc={class:"dialog-content"},Vc={class:"header-section"},zc={class:"limit-text"},jc={key:0,class:"limit-text-prefix"},Yc={class:"upgrade-text"},Xc={style:{"font-weight":"600"}},Kc={class:"features-list"},Qc=["src"],Zc={class:"feature-text-group"},Jc={class:"feature-title-group"},ed={class:"feature-title"},td={class:"feature-right-icons"},nd=["src"],rd={class:"feature-desc"},ad={class:"footer-section"},id=je({__name:"BuyDialog",emits:["close"],setup(t){const{t:e,locale:n}=Tt(),{skuInfo:r}=gs(),{showMask:a,closePageDialog:i,refreshPaymentDialogShow:s,buyDialogPosition:o,buyDialogSource:l}=vn(),c=C(),u=Z(()=>{var m,d;return((d=(m=r.value)==null?void 0:m.shopList)==null?void 0:d.slice(1))||[]}),f=Z(()=>{var m;return((m=r.value)==null?void 0:m.window_id)||0}),h=Z(()=>{var d,J,q,W,oe;const m=((J=(d=c.value)==null?void 0:d.first_exp_info)==null?void 0:J.price_display)||e("common.free");return((oe=(W=(q=c.value)==null?void 0:q.shop_style)==null?void 0:W.sku_btn_text)==null?void 0:oe.replace("{symbolTrialPrice}",m))||e("buy.buyNow")}),b=Z(()=>o.value==="web_image_translate_text_link"||o.value==="plugin_image_translate_setting"?"imageBall.limitTip":l.value==="web_text_extraction"?"imageBall.extractLimitTip":o.value==="web_subtitle_translate_download"?"buy.subtitleDownloadExceedTip":["plugin_dropdownlist_switch_service","plugin_textbox_translate_page_switch_service","plugin_select_to_translate_switch_service","plugin_gmail_integration_switch_service","plugin_image_translate_setting_switch_service","web_subtitle_translate_ai_payment"].includes(o.value)?"buy.otherAIClickTip":o.value==="plugin_improve_writing_pro_style"?"buy.continueUsingIt":"buy.4oExceedTip"),S=Z(()=>o.value==="plugin_improve_writing_pro_style"?"buy.proImproveWriteStyle":""),x=Z(()=>o.value==="plugin_improve_writing_pro_style"?[{icon:"writingstyles",title:e("buy.feature.title4"),description:e("buy.feature.desc4"),rightIcons:[]},{icon:"aimodel",title:e("buy.feature.title1"),description:e("buy.feature.desc1"),rightIcons:["gpt","deepseek","gemini","aws"]},{icon:"bilingleview",title:e("buy.feature.title2"),description:e("buy.feature.desc2"),rightIcons:["doc","pdf","ppt","excel"]}]:[{icon:"aimodel",title:e("buy.feature.title1"),description:e("buy.feature.desc1"),rightIcons:["gpt","deepseek","gemini","aws"]},{icon:"bilingleview",title:e("buy.feature.title2"),description:e("buy.feature.desc2"),rightIcons:["doc","pdf","ppt","excel"]},{icon:"explain",title:e("buy.feature.title3"),description:e("buy.feature.desc3"),rightIcons:[]}]),N=Z(()=>({position:o.value,utm_source:l.value,style:1,entry:"web_translate"}));Te(u,m=>{m.length>0&&!c.value&&(c.value=m[0])},{immediate:!0});const _=m=>chrome.runtime.getURL(`public/buypopup/${m}`),E=()=>{i(),k.fireEvent(Lt.OVERSEA_PRICING_PAGE,{action:"click",item:"close",...N.value})},g=()=>{var oe;const m={entry:"anydoc_web",utm_source:l.value,position:o.value},d=u.value.findIndex(Y=>{var H;return Y.id===((H=c.value)==null?void 0:H.id)});if(d===-1)return;const J="https://checkout.wps.com",q=Object.keys(m).filter(Y=>m[Y]).map(Y=>`${Y}=${m[Y]}`).join("&"),W=`${J}/checkout/${f.value}/${d+1}?platform=web&${q}&lang=${n.value}`;window.open(W,"_blank"),i(),s.value=!0,k.fireEvent(Lt.OVERSEA_PRICING_PAGE,{action:"click",item:((oe=c.value)==null?void 0:oe.period_unit)==="Y"?"buy_now_annual":"buy_now_monthly",...N.value})},p=()=>{i(),ct(`${ye.priceUrl}?source=${l.value}&position=${o.value}`),k.fireEvent(Lt.OVERSEA_PRICING_PAGE,{action:"click",item:"view_details",...N.value})};return Bt(async()=>{r.value||(r.value=await ot(Ie.GET_SKU_INFO,{locale:n.value})),r.value||(i(),ct(`${ye.priceUrl}?source=get_sku_info_failed&position=${o.value}`)),k.fireEvent(Lt.OVERSEA_PRICING_PAGE,{action:"show",...N.value})}),(m,d)=>{const J=el("i18n-t");return B(),re("div",{class:lt(["buy-dialog-overlay",{"with-mask":j(a)}])},[T("div",$c,[T("div",qc,[fe(vt,{icon:"close",size:20,onClick:E})]),T("div",Wc,[T("img",{width:"36",height:"36",src:_("upgrade.png")},null,8,Gc)]),T("div",Hc,[T("div",Vc,[T("div",zc,[S.value?(B(),re("span",jc,ce(m.$t(S.value)),1)):ve("",!0),fe(J,{keypath:b.value,tag:S.value?"span":"div"},{default:ft(()=>[T("span",Yc,ce(m.$t("common.upgradePro")),1),T("span",Xc,ce(m.$t("model.advancedModels")),1)]),_:1},8,["keypath","tag"])])]),T("div",Kc,[(B(!0),re(kt,null,rn(x.value,q=>(B(),re("div",{key:q.title,class:"feature-item"},[T("img",{src:_(`${q.icon}.png`),class:"feature-main-icon"},null,8,Qc),T("div",Zc,[T("div",Jc,[T("div",ed,ce(q.title),1),T("div",td,[(B(!0),re(kt,null,rn(q.rightIcons,W=>(B(),re("img",{key:W,src:_(`${W}.png`),class:"right-icon"},null,8,nd))),128))])]),T("div",rd,ce(q.description),1)])]))),128))]),fe(Uc,{style:{"margin-top":"24px"},"sku-list":u.value,modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=q=>c.value=q)},null,8,["sku-list","modelValue"]),T("div",ad,[T("div",{class:"buy-button common-button-gradient",onClick:g},ce(h.value),1),T("div",{class:"view-details",onClick:p},ce(m.$t("buy.viewMoreDetails")),1)])])])],2)}}}),sd=at(id,[["__scopeId","data-v-7dcab905"]]),{userSettings:ul,settingRefreshedFlag:od}=pt(),{onlineParams:ld}=an(),ao=C(!1);Te(ul,async(t,e)=>{if(od.value){if(!t.pageTranslation.continueTranslateEnable){Mr(Ee.CONTINUE_TRANSLATE_FLAG);return}t.pageTranslation.continueTranslateTime!==e.pageTranslation.continueTranslateTime&&await rt(Ee.CONTINUE_TRANSLATE_FLAG)&&mt(Ee.CONTINUE_TRANSLATE_FLAG,!0,t.pageTranslation.continueTranslateTime*60*1e3)}});function ri(){return{checkDialogAndUpdateUsageInfo:async()=>{var o;let{continueTranslateEnable:n,continueTranslateTime:r}=ul.value.pageTranslation;const a=await rt(Ee.TEMP_CONFIGS);if(a&&a.continueTranslateEnable!==void 0&&(n=a.continueTranslateEnable,r=a.continueTranslateTime||15),n&&r>0){await rt(Ee.CONTINUE_TRANSLATE_FLAG)||mt(Ee.CONTINUE_TRANSLATE_FLAG,!0,r*60*1e3);return}Mr(Ee.CONTINUE_TRANSLATE_FLAG);const i=(o=ld.value)==null?void 0:o.continueTranslate;if(!i)return;const s=await rt(Ee.CONTINUE_TRANSLATE_USE_INFO);if(!s){mt(Ee.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1});return}if(Date.now()-s.time<i.duration*60*1e3)if(s.count++,s.count>=i.count){Mr(Ee.CONTINUE_TRANSLATE_USE_INFO);const l=await rt(Ee.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME);(!l||Date.now()-l>i.dialogGap*24*60*60*1e3)&&(ao.value=!0,mt(Ee.CONTINUE_TRANSLATE_DIALOG_SHOW_TIME,Date.now()))}else mt(Ee.CONTINUE_TRANSLATE_USE_INFO,s);else mt(Ee.CONTINUE_TRANSLATE_USE_INFO,{time:Date.now(),count:1})},continueTranslateDialogShow:ao,checkPageContinueTranslate:async n=>{const{userSettings:r}=pt();let{continueTranslateEnable:a}=r.value.pageTranslation;const i=await rt(Ee.CONTINUE_TRANSLATE_FLAG),s=await rt(Ee.TEMP_CONFIGS);return s&&s.continueTranslateEnable!==void 0&&(a=s.continueTranslateEnable),n===r.value.targetLanguage?!1:!!(a&&i)}}}const ud={class:"continue-translate-dialog"},cd={class:"dialog-header"},dd=["src"],pd={class:"dialog-content"},fd={class:"description"},gd={class:"duration-selector"},hd={style:{"font-size":"16px","font-weight":"600"}},md={class:"setting-item"},vd={class:"setting-item-label"},Ed={class:"dialog-footer"},_d=je({__name:"ContinueTranslateSetting",props:{pageLanguage:{}},setup(t){const e=t,{locale:n,t:r}=Tt(),{continueTranslateDialogShow:a}=ri(),{notifyUserSettings:i,getSettingByKey:s,userSettings:o}=pt(),l=C(ye.defaultLanguage),c=C(!1),u=Z(()=>dn(n.value)),f=()=>chrome.runtime.getURL("public/logo/icon-128.png"),h=Z(()=>{const g=gn(l.value);return g?r(`language.${l.value}`)||g.label:r("language.en")}),b=Z(()=>[{value:0,label:r("common.off")},{value:15,label:r("continueTranslate.minutes",["15"])},{value:30,label:r("continueTranslate.minutes",["30"])},{value:60,label:r("continueTranslate.hour")},{value:180,label:r("continueTranslate.hours",["3"])}]),S=C(15);Te(S,g=>{k.reportClickEvent("plugin_always_translate_popup","always_translate_duration_list_select",{selected_item:g})});const x=g=>{k.reportClickEvent("plugin_always_translate_popup",g?"open_always_translate_lang_site":"close_always_translate_lang_site",{selected_item:l.value})},N=()=>{k.reportClickEvent("plugin_always_translate_popup","always_translate_duration")},_=()=>{a.value=!1,k.reportClickEvent("plugin_always_translate_popup","close")},E=async()=>{a.value=!1;const g=s("pageTranslation");S.value===0?g.continueTranslateEnable=!1:(g.continueTranslateEnable=!0,g.continueTranslateTime=S.value),c.value?!g.newAlwaysTranslateLanguage.includes(l.value)&&g.newAlwaysTranslateLanguage.push(l.value):(g.alwaysTranslateLanguage.includes(l.value)&&(g.alwaysTranslateEnabled=!1,g.alwaysTranslateLanguage=[]),g.newAlwaysTranslateLanguage=g.newAlwaysTranslateLanguage.filter(m=>m!==l.value)),i({pageTranslation:g});let p=S.value.toString();c.value&&(p=`${p}||${l.value}`),k.reportClickEvent("plugin_always_translate_popup","confirm",{selected_item:p})};return Bt(async()=>{var J;l.value=((J=gn(e.pageLanguage||""))==null?void 0:J.value)||ye.defaultLanguage;const{alwaysTranslateLanguage:g,alwaysTranslateEnabled:p,newAlwaysTranslateLanguage:m}=o.value.pageTranslation,d=g.includes(l.value)&&p;c.value=m.includes(l.value)||d}),(g,p)=>(B(),re("div",ud,[T("div",cd,[T("div",{class:"header-logo",style:De({"flex-direction":u.value?"row-reverse":"row","justify-content":u.value?"flex-end":"flex-start"})},[T("img",{src:f(),class:"logo-icon"},null,8,dd),p[2]||(p[2]=T("div",{class:"logo-name"}," AnyDoc Translator ",-1))],4),fe(jt,{icon:"close",size:28,onClick:_})]),T("div",pd,[T("p",fd,ce(j(r)("continueTranslate.desc")),1),T("div",gd,[fe(Ho,{onClick:N,modelValue:S.value,"onUpdate:modelValue":p[0]||(p[0]=m=>S.value=m),options:b.value,size:"medium",class:"duration-select"},{labelDesc:ft(()=>[T("span",hd,ce(j(r)("continueTranslate.durationLabel")),1)]),_:1},8,["modelValue","options"])]),T("div",md,[T("div",vd,ce(g.$t("settings.alwaysTranslate",[h.value])),1),fe(is,{modelValue:c.value,"onUpdate:modelValue":p[1]||(p[1]=m=>c.value=m),onChange:x},null,8,["modelValue"])])]),T("div",Ed,[fe(Tn,{class:"confirm-btn",size:"large",block:"",type:"primary",onClick:E},{default:ft(()=>[Qt(ce(j(r)("common.confirm")),1)]),_:1})])]))}}),Td=at(_d,[["__scopeId","data-v-7490fb5a"]]),wd=C(!1);function cl(){return{onBoardingShow:wd}}const{userInfo:$a}=St(),dl=C(!1),pl=C(!1),fl=C(!1),gl=C(!1),ra={[zt.HOVER_BALL]:dl,[Br.TEXTBOX]:pl,[Br.SELECT_TEXT]:fl,[Br.SUBTITLE]:gl};let xa={disable:!1,gap:3,times:2};Te($a,()=>{$a.value&&Object.values(ra).forEach(t=>{t.value=!1})});function va(){const t=async()=>{if($a.value)return;const a=await rt(Ee.NO_LOGIN_TRANSLATE_USE_TIME,0);await mt(Ee.NO_LOGIN_TRANSLATE_USE_TIME,a+1)},e=async a=>{await r()&&(ra[a]&&(ra[a].value=!0),await mt(Ee.LOGIN_TIPS_SHOW_TIME,Date.now()))},n=async a=>{ra[a]&&(ra[a].value=!1)},r=async()=>{var o;if($a.value)return!1;const{onlineParams:a}=an();if((o=a.value)!=null&&o.loginGuid&&(xa=a.value.loginGuid),xa.disable)return!1;const i=await rt(Ee.NO_LOGIN_TRANSLATE_USE_TIME,0),s=await rt(Ee.LOGIN_TIPS_SHOW_TIME);return!!(!s&&i>=xa.times||s&&Date.now()-s>xa.gap*24*60*60*1e3)};return{loginTipShow:dl,textBoxLoginTipShow:pl,selectTextLoginTipShow:fl,subtitleLoginTipShow:gl,setNoLoginTranslateUseCount:t,showLoginTipGuid:e,checkLoginTipShow:r,closeLoginTipGuid:n}}class Na{static debounce(e,n){let r=null;return function(){r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,arguments)},n)}}static throttle(e,n){let r=0;return function(){const a=Date.now();a-r>n&&(e.apply(this,arguments),r=a)}}static isBlockStyleElement(e){const n=window.getComputedStyle(e).getPropertyValue("display"),r=window.getComputedStyle(e,"::after").getPropertyValue("display"),a=["block","flex","grid","table","table-row-group","table-row","table-cell","table-column","table-column-group","table-header-group","table-footer-group","table-caption","inline-table","list-item","-webkit-box"];return a.includes(n)||a.includes(r)}}class bd{constructor(e,n,r){this.debug=!1,this.appName=e,this.siteRules=n,this.debug=r,this.loadStyles()}get TAG(){return{CONTAINER:`${this.appName}-translation`,LOADING:`${this.appName}-tanslation-loading`,ERROR:`${this.appName}-tanslation-error`,RESULT:`${this.appName}-tanslation-text`}}get CLASS(){return{INLINE:`${this.appName}-translation-inline`,BLOCK:`${this.appName}-translation-block`,THEME:`${this.appName}-translation-theme`,REPLACE:`${this.appName}-translation-replace`,CLEAR_LINE_CLAMP:`${this.appName}-translation-clear-line-clamp`}}get styles(){const e=this.siteRules.map(n=>n.styleHandler?n.styleHandler(this.TAG,this.CLASS):"").join(`
`);return`
      ${this.TAG.CONTAINER}.${this.CLASS.INLINE} {
        margin: 0 0 0 4px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} {
        display: block;
        margin: 8px 0;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} + br {
        display: none;
      }
      ${this.TAG.CONTAINER} ${this.TAG.LOADING} {
        display: inline-block;
        width: 14px;
        height: 14px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-top: 2px solid transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        vertical-align: middle;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT} {
        display: inline-block;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT} {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}:empty {
        display: none;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.REPLACE} {
        display: initial;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-default {}
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-weakness {
        opacity: .6;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary,
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-primary * {
        color: #007bff;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        background-color: #117efe0f;
        padding: 0 5px;
      }
      ${this.TAG.CONTAINER}.${this.CLASS.BLOCK} ${this.TAG.RESULT}.${this.CLASS.THEME}-highlight {
        padding: 12px;
      }
      ${this.TAG.CONTAINER} ${this.TAG.RESULT}.${this.CLASS.THEME}-underline {
        display: inline;
        border-bottom: 1px dotted;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR} {
        display: inline-block;
        width: 14px;
        height: 14px;
        vertical-align: middle;
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUpJREFUOE+lkzFLA1EQhGdCigSxFCy0EDsFQSGgwU6ws7DQLk309uUHmEIQoiAWRrB9t4mN+APsbLWxENQiGLSzsPAX2HkrCRpiPEmOvHr2Y2dnHjHkY9x8oVAYyWQyMwBmSY6RfCLZ9N6/9ur/AIIgWCdZBfBpZvck3wEsAlgys5NarVbuhvwCiMgVgGWS5TAMfbfQObcC4AhAg+SlmeXCMKx0AM65HTM7BJBX1Yc4a8VicTSdTp8BWCN53AG0PGez2WcAF6q6+99dRaQCYBvABIADVd1vbxAEQY7kHYA5VW30C0ZEpqMomqzX69dtgHNuy8z2VHWq33BsCkMDkloolUrzURS9qOpH28KgR2xpRWQDwHkqlcp77x8TxfgNuAVw85PWwEUSkVUzq5Jsrb75c8wkVV4AcNrbk0E+0zjJNzNrxjU0FpCkC1+cAZgR0ELvzwAAAABJRU5ErkJggg==');
        background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;
        cursor: pointer;
        opacity: .7;
        position: relative;
        z-index: 1;
      }
      ${this.TAG.CONTAINER} ${this.TAG.ERROR}:hover {
        opacity: 1;
      }
      .${this.CLASS.CLEAR_LINE_CLAMP} {
        -webkit-line-clamp: none !important;
      }
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      ${e}
    `}renderLoading(e){const n=this.findOrCreateContainerElement(e),r=n.querySelector(this.TAG.LOADING)||document.createElement(this.TAG.LOADING);n.contains(r)||(n.innerHTML="",n.appendChild(r))}renderResult(e,n,r=!1,a="default",i=!1,s=!1){const o=this.findOrCreateContainerElement(e);o.innerHTML="";const l=o.querySelector(this.TAG.RESULT)||document.createElement(this.TAG.RESULT);r?l.classList.add(this.CLASS.REPLACE):l.classList.add(`${this.CLASS.THEME}-${a}`),i?e.nodes.forEach((c,u)=>{if(c.nodeType===Node.TEXT_NODE)l.appendChild(document.createTextNode(n[u]));else{const f=b=>{var S,x,N;for(let _=0;_<(((S=b.children)==null?void 0:S.length)??0);_++){const E=b.children[_];if(((x=E.textContent)==null?void 0:x.trim())===((N=c.textContent)==null?void 0:N.trim()))return f(E)}return b},h=c.cloneNode(!0);f(h).textContent=n[u],l.appendChild(h)}}):l.textContent=n[0],s&&(l.style.direction="rtl",l.style.textAlign="right"),e.nodes.forEach(c=>{if(r)e.element.contains(c)&&e.element.removeChild(c);else if(!e.element.contains(c))try{e.element.insertBefore(c,o)}catch{}}),o.contains(l)||o.appendChild(l),window.getComputedStyle(e.element).getPropertyValue("-webkit-line-clamp")!=="none"&&e.element.classList.add(this.CLASS.CLEAR_LINE_CLAMP)}renderError(e,n){const r=this.findOrCreateContainerElement(e),a=r.querySelector(this.TAG.ERROR)||document.createElement(this.TAG.ERROR);a.onclick=i=>{i.preventDefault(),i.stopPropagation(),n(a)},r.contains(a)||(r.innerHTML="",r.appendChild(a))}restore(e){if(e.translationElement&&e.element.contains(e.translationElement)){let n=document.createDocumentFragment();e.nodes.forEach(r=>{e.element.contains(r)||n.appendChild(r)}),e.translationElement.replaceWith(n),e.translationElement=null,e.element.classList.contains(this.CLASS.CLEAR_LINE_CLAMP)&&e.element.classList.remove(this.CLASS.CLEAR_LINE_CLAMP)}}removeTranslationElements(e){const n=(e==null?void 0:e.excludeTargets)||[];((e==null?void 0:e.container)||document).querySelectorAll(this.TAG.CONTAINER).forEach(r=>{n.find(a=>a.translationElement===r)||r.remove()})}isTranslationElement(e){return e.tagName===this.TAG.CONTAINER.toUpperCase()||!!e.closest(this.TAG.CONTAINER)}loadStyles(e=document.head){const n=`${this.appName}-translation-styles`;if(e.querySelector(`#${n}`))return;const r=document.createElement("style");r.id=n,r.textContent=this.styles,e.appendChild(r)}findOrCreateContainerElement(e){let n=e.translationElement;if(n)return n;n=document.createElement(this.TAG.CONTAINER),e.translationElement=n,this.isTargetRenderAsBlock(e)?n.classList.add(this.CLASS.BLOCK):n.classList.add(this.CLASS.INLINE),this.debug&&n.addEventListener("click",()=>{console.log(e)});const r=e.nodes[e.nodes.length-1];return r.nextSibling&&e.element.contains(r.nextSibling)?e.element.insertBefore(n,r.nextSibling):e.element.appendChild(n),n}isTargetRenderAsBlock(e){if(e.element.closest("button"))return!1;const n=e.element.closest("a");if(n&&e.element.tagName!=="A"&&!Na.isBlockStyleElement(n.firstElementChild))return!1;if(/[\u4e00-\u9fa5\u3040-\u30ff\uac00-\ud7af]/.test(e.text)){const a=parseInt(getComputedStyle(e.element).height,10),i=parseInt(getComputedStyle(e.element).fontSize,10),s=parseInt(getComputedStyle(e.element).lineHeight,10)||i;if(a>=s*2)return!0}const r=e.text.trim();return r.split(" ").length-1>=3||r.length>35}}class xd{async translate(e=[],n="",r="",a){return e.length?(e=e.map(i=>i||`
`),(await(await fetch("https://translate-pa.googleapis.com/v1/translateHtml",{method:"POST",headers:{"Content-Type":"application/json+protobuf","X-Goog-Api-Key":"AIzaSyATBXajvzQLTDHEQbcpq0Ihe0vWDHmO520"},body:JSON.stringify([[e,n||"auto",r],"te_lib"]),signal:a})).json())[0]):[]}}class yd{constructor(){this.authorizationToken="",this.authorizationTokenExpires=0,this.authorizationTokenExpiresDuration=6e4}async translate(e=[],n="",r="",a){if(!e.length)return[];const i=await this.getAuthorizationToken(),s=e.map(o=>({Text:o}));return(await(await fetch(`https://api-edge.cognitive.microsofttranslator.com/translate?from=${n}&to=${r}&api-version=3.0&includeSentenceLength=true`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+i},body:JSON.stringify(s),signal:a})).json()).map(o=>o.translations[0].text)}async getAuthorizationToken(e){if(Date.now()>this.authorizationTokenExpires){const n=await this.fetchAuthorizationToken(e);return this.authorizationTokenExpires=Date.now()+this.authorizationTokenExpiresDuration,n}return this.authorizationToken}async fetchAuthorizationToken(e){const n=await fetch("https://edge.microsoft.com/translate/auth",{signal:e});return this.authorizationToken=await n.text(),this.authorizationToken}}class Ad{async translate(e=[],n="",r="",a){if(!e.length)return[];if(!r)return e;n=n?n.includes("-")?n.split("-")[0]:n:"",r=r.includes("-")?r.split("-")[0]:r;const i=await this.getAccessToken(a),s=new URLSearchParams;s.append("srv","tr-url-widget"),s.append("id",`${i}-0-0`),s.append("format","text"),s.append("lang",`${n?n+"-":""}${r}`),e.forEach(l=>{s.append("text",l)});const o=s.toString();return(await(await fetch(`https://translate.yandex.net/api/v1/tr.json/translate?${o}`,{signal:a})).json()).text}async getAccessToken(e){const n=(await(await fetch("https://translate.yandex.net/website-widget/v1/widget.js?widgetId=ytWidget&pageLang=es&widgetTheme=light&autoMode=false",{signal:e})).text()).match(/sid\:\s\'[0-9a-f\.]+/);return n&&n[0]&&n[0].length>7?n[0].substring(6):""}}class Cd{constructor(e="google",n=!0,r=100){this.services={google:new xd,microsoft:new yd,yandex:new Ad},this.serviceName="google",this.abortController=new AbortController,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.delay=200,this.requests=[],this.timer=null,this.listeners={},this.serviceName=e,this.mergeRequests=n,this.maxTextCountPerRequest=r}register(e,n){if(this.services[e])throw new Error(`Service "${e}" already exists`);this.services[e]=n}setServiceName(e){if(!this.services[e])throw new Error(`Service "${e}" not found`);this.serviceName=e}async translate(e,n,r){const a=this.services[this.serviceName];if(!a)throw new Error(`Service "${this.serviceName}" not found`);if(!this.mergeRequests){const s=Date.now(),o=await a.translate(e,n,r,this.abortController.signal),l=Date.now()-s;return this.emit("request",{from:n,to:r,texts:e,results:o,duration:l}),o}const i=Math.random().toString(36).substring(2,10);return this.requests.push({id:i,from:n,to:r,texts:e}),this.maxTextCountPerRequest&&this.requests.length>=this.maxTextCountPerRequest?(this.processRquests(),this.requests=[]):this.timer||(this.timer=setTimeout(()=>{this.processRquests(),this.timer=null,this.requests=[]},this.delay)),new Promise((s,o)=>{this.on(i,l=>{if(this.off(i),l instanceof Error){o(l);return}s(l)})})}abort(){this.abortController.abort(),this.abortController=new AbortController}async processRquests(){const e={};for(let r=0;r<this.requests.length;r++){const a=this.requests[r],{from:i,to:s}=a,o=`${i}-${s}`;e[o]?e[o].push(a):e[o]=[a]}const n=this.services[this.serviceName];for(let r in e){const{from:a,to:i}=e[r][0],s=[],o=[];e[r].forEach(c=>{o.push(...c.texts),c.texts.forEach(()=>{s.push(c.id)})});const l=Date.now();n.translate(o,a,i,this.abortController.signal).then(c=>{const u=Date.now()-l;return this.emit("request",{from:a,to:i,texts:o,results:c,duration:u}),c}).then(c=>{const u={};c.forEach((f,h)=>{const b=s[h];u[b]?u[b].push(f):u[b]=[f]});for(let f in u)this.emit(f,u[f])}).catch(c=>{new Set(s).forEach(u=>{this.emit(u,c)})})}}on(e,n){if(this.listeners[e])throw new Error(`Event "${e}" already exists`);this.listeners[e]=n}emit(e,n){const r=this.listeners[e];r&&r(n)}off(e){delete this.listeners[e]}}const Sd=[{name:"GITHUB",urlRegex:/^(https?:\/\/)?(www\.)?github\.com\/.*$/,elementHandler:t=>!(t.tagName==="TABLE"&&t.getAttribute("aria-labelledby")==="folders-and-files")},{name:"REDDIT",urlRegex:/^(https?:\/\/)?(www\.)?reddit\.com\/.*$/,styleHandler:(t,e)=>`
        ${t.CONTAINER} {
          visibility: visible !important;
        }
        ${t.CONTAINER} * {
          visibility: visible !important;
        }
      `}],Dd="1.0.26";class hl{constructor(e={}){this.version=Dd,this.appName="wpstranslate",this.enabled=!1,this.sourceLanguage="",this.targetLanguage="en",this.serviceName="google",this.hoverMode=!1,this.onlyTranslateMainContent=!0,this.translateSameLanguage=!1,this.replaceMode=!1,this.maxTaskCount=60,this.keepStyles=!0,this.rangeOffset=300,this.theme="default",this.tasks=[],this.documentTitle="",this.documentTitleTranslation="",this.documentTitleTranslating=!1,this.mergeRequests=!0,this.maxTextCountPerRequest=100,this.debug=!1,this.watch=!0,this.ignoreElementSelector="",this.ignoreElementTags=["SCRIPT","NOSCRIPT","STYLE","CODE","PRE","SVG","IMG","VIDEO","AUDIO","CANVAS","CITE"],this.nonMainContentElementTags=["ASIDE","FOOTER","HEADER","NAV"],this.minimalTargetElementTags=["P","H1","H2","H3","H4","H5","H6","OPTION"],this.separateElementTags=["BUTTON","SELECT","LABEL","LI","TD","TH"],this.beforeRetry=null,this.tempTarget=null,this.windowEventsHandler=Na.debounce(()=>{this.watch&&this.translateDocument()},100).bind(this),this.mutaionHandler=Na.debounce(n=>{if(!this.watch)return;let r=n.filter(a=>!this.renderer.isTranslationElement(a.target));r.length>0&&(this.renderer.removeTranslationElements({excludeTargets:this.tasks.map(a=>a.target)}),r.forEach(a=>{(this.replaceMode?this.tasks.filter(i=>i.target.element===a.target&&!Array.from(a.addedNodes).every(s=>s instanceof HTMLElement&&this.renderer.isTranslationElement(s))):this.tasks.filter(i=>i.target.element===a.target&&i.target.nodes.some(s=>!s.isConnected))).forEach(i=>{const s=i.target.element;this.removeTranslationTask(i),this.parseNode(s,o=>{this.addTranslationTask(o)})})}),this.translateDocument())},100).bind(this),this.mutationObserver=null,this.mousePosition={x:0,y:0},this.mousemoveHandler=this.handleMouseMove.bind(this),this.keydownHandler=this.handleKeyDown.bind(this),this.siteRules=Sd.filter(n=>n.urlRegex.test(window.location.href)),this.parseOptions(e),this.renderer=new bd(this.appName,this.siteRules,this.debug),this.service=new Cd(this.serviceName,this.mergeRequests,this.maxTextCountPerRequest),this.hoverMode&&this.enableHoverMode()}get isRTL(){const e=["ar","he","fa","ps","ur"],n=this.targetLanguage.split("-")[0];return e.includes(n)}enable(){this.enabled=!0,this.resetErrorTasks(),this.renderTasks(),this.translateDocument(),window.addEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.addEventListener("resize",this.windowEventsHandler),this.observeMutation(document.body)}disable(){this.enabled=!1,this.restoreDocument(),this.clearUnfinishedTasks(),window.removeEventListener("scroll",this.windowEventsHandler,{capture:!0}),window.removeEventListener("resize",this.windowEventsHandler),this.disconnectMutation()}toggle(){this.enabled?this.disable():this.enable()}addService(e,n){this.service.register(e,n)}setService(e){this.serviceName!==e&&(this.documentTitleTranslation="",this.serviceName=e,this.service.setServiceName(e),this.enabled&&(this.disable(),this.enable()))}setSourceLanguage(e){this.sourceLanguage!==e&&(this.documentTitleTranslation="",this.sourceLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTargetLanguage(e){this.targetLanguage!==e&&(this.documentTitleTranslation="",this.targetLanguage=e,this.enabled&&(this.disable(),this.enable()))}setTheme(e){this.theme!==e&&(this.theme=e,this.rerender())}setReplaceMode(e){this.replaceMode!==e&&(this.replaceMode=e,this.rerender())}setWatch(e){this.watch=e}setOnlyTranslateMainContent(e){this.onlyTranslateMainContent!==e&&(this.onlyTranslateMainContent=e,this.enabled&&(this.disable(),this.enable()))}setKeepStyles(e){this.keepStyles!==e&&(this.keepStyles=e,this.enabled&&(this.disable(),this.enable()))}enableHoverMode(){this.hoverMode||(this.hoverMode=!0,window.addEventListener("mousemove",this.mousemoveHandler),window.addEventListener("keydown",this.keydownHandler))}disableHoverMode(){this.hoverMode&&(this.hoverMode=!1,window.removeEventListener("mousemove",this.mousemoveHandler),window.removeEventListener("keydown",this.keydownHandler))}translateElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.parseNode(n,r=>{this.addTranslationTask(r,!0)},{checkInView:!1})}restoreElement(e){const n=typeof e=="string"?document.querySelector(e):e;n&&this.tasks.filter(r=>r.target.element===n||n.contains(r.target.element)).forEach(r=>{this.renderer.restore(r.target)})}parseOptions(e){["appName","serviceName","sourceLanguage","targetLanguage","hoverMode","onlyTranslateMainContent","translateSameLanguage","maxTaskCount","keepStyles","rangeOffset","theme","replaceMode","mergeRequests","maxTextCountPerRequest","debug","watch","ignoreElementSelector","beforeRetry"].forEach(n=>{e[n]!==void 0&&(this[n]=e[n])})}async translateDocumentTitle(){if(this.documentTitle||(this.documentTitle=document.title),this.documentTitleTranslation)document.title=this.documentTitleTranslation;else if(this.isTextToBeTranslated(this.documentTitle)){if(this.documentTitleTranslating)return;this.documentTitleTranslating=!0;const e=await this.filterTextsAndTranslate([this.documentTitle],this.sourceLanguage,this.targetLanguage);this.documentTitleTranslation=e[0],this.enabled&&(document.title=this.documentTitleTranslation)}}restoreDocumentTitle(){document.title=this.documentTitle}translateDocument(){this.enabled&&(this.translateDocumentTitle(),this.parseDocument(e=>{this.addTranslationTask(e)}))}restoreDocument(){this.restoreDocumentTitle(),this.tasks.forEach(e=>{this.renderer.restore(e.target)})}parseDocument(e){this.parseNode(document.body,e),this.tempTarget&&(e(this.tempTarget),this.tempTarget=null)}parseNode(e,n,r){var o,l;let{checkVisible:a=!0,checkInView:i=!0,checkMainContent:s=!0}=r||{};if(e.nodeType===Node.TEXT_NODE){const c=e.textContent.trim(),u=e.parentElement;if(u){const f=e.nextSibling&&e.nextSibling.nodeName==="BR";this.processTarget(c,u,e,!!f,n)}}else if(e.nodeType===Node.ELEMENT_NODE){const c=e;if(this.ignoreElementSelector&&c.matches(this.ignoreElementSelector)){this.debugParseElement(c,"[SKIP ELEMENT] IGNORE_ELEMENT_SELECTOR_MATCH | SELECTOR: "+this.ignoreElementSelector);return}for(let u of this.siteRules)if(u.elementHandler&&!u.elementHandler(c)){this.debugParseElement(c,"[SKIP ELEMENT] SITE_RULE_MATCH | RULE: "+u.name);return}if(c.shadowRoot&&(this.renderer.loadStyles(c.shadowRoot),this.parseNode(c.shadowRoot,n,{checkVisible:a,checkInView:i}),this.observeMutation(c.shadowRoot)),this.renderer.isTranslationElement(c)){this.debugParseElement(c,"[SKIP ELEMENT] IS_TRANSLATION_ELEMENT");return}if(this.ignoreElementTags.includes(c.tagName)){this.debugParseElement(c,"[SKIP ELEMENT] IS_IGNORE_ELEMENT_TAG");return}if(s&&this.nonMainContentElementTags.includes(c.tagName))if(this.onlyTranslateMainContent){this.debugParseElement(c,"[SKIP ELEMENT] IS_NON_MAIN_CONTENT_ELEMENT");return}else{setTimeout(()=>{this.parseNode(c,n,{checkVisible:a,checkInView:i,checkMainContent:!1})},100);return}if(a&&this.isElementInvisible(c))if(this.isElementDropdown(c))a=!1;else{this.debugParseElement(c,"[SKIP ELEMENT] IS_INVISIBLE");return}if(this.isMinimalTargetElement(c)){let u=a?(o=c.innerText)==null?void 0:o.trim():(l=c.textContent)==null?void 0:l.trim();u=u||"";const f=this.rangeOffset,h=c.getBoundingClientRect(),b=h.top-f>window.innerHeight||h.bottom+f<0||h.left-f>window.innerWidth||h.right+f<0;!i||!b?(this.debugParseElement(c,"[PROCESS ELEMENT] MINIMAL_TARGET_ELEMENT"),this.processTarget(u,c,e,!0,n)):this.debugParseElement(c,"[SKIP ELEMENT] IS_OUT_OF_VIEW");return}this.debugParseElement(c,"[SKIP ELEMENT] RECURSIVE_CHILD_NODES"),this.getChildNodes(c).forEach(u=>{this.parseNode(u,n,{checkVisible:a,checkInView:i})})}else if(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const c=e;this.getChildNodes(c).forEach(u=>{this.parseNode(u,n,{checkVisible:a,checkInView:i})})}}processTarget(e,n,r,a=!1,i){if(r.translatorParsed){const l=this.findTargetByNode(r);if(l){i(l);return}}r.translatorParsed=!0;const s=r.nodeType===Node.TEXT_NODE?[r]:this.getChildNodes(n).filter(l=>l.textContent),o={text:e,element:n,nodes:s};if(a){this.tempTarget&&i(this.tempTarget),i(o),this.tempTarget=null;return}if(!this.tempTarget){this.tempTarget=o;return}if(o.element===this.tempTarget.element){this.tempTarget.text+=" "+o.text,this.tempTarget.nodes.push(...o.nodes);return}i(this.tempTarget),this.tempTarget=o}isMinimalTargetElement(e){var r;const n=(r=e.textContent)==null?void 0:r.trim();return n&&this.hasElementChild(e,a=>{var i;return n===((i=a.textContent)==null?void 0:i.trim())})?!1:this.minimalTargetElementTags.includes(e.tagName)?!0:!this.hasElementChild(e,a=>!!(Na.isBlockStyleElement(a)||this.minimalTargetElementTags.includes(a.tagName)||this.separateElementTags.includes(a.tagName)||a.shadowRoot||a.nodeName==="BR"),{})}addTranslationTask(e,n=!1){if(!this.isTextToBeTranslated(e.text))return null;let r={serviceName:this.serviceName,from:this.sourceLanguage,to:this.targetLanguage,pending:!0,done:!1,error:!1,target:e,text:e.text,result:"",results:[]};const a=this.tasks.find(i=>i.serviceName===r.serviceName&&i.from===r.from&&i.to===r.to&&i.text===r.text&&i.target.element===r.target.element&&i.target.nodes[0]===r.target.nodes[0]);return r=a||r,a||(this.tasks.push(r),(this.enabled||n)&&this.renderer.renderLoading(r.target)),n?this.executeTranslationTask(r,!0):this.processTranslationTaskQueue(),r}removeTranslationTask(e){this.tasks=this.tasks.filter(n=>n!==e),this.renderer.restore(e.target),this.tempTarget&&this.tempTarget.element===e.target.element&&(this.tempTarget=null)}async processTranslationTaskQueue(){if(!this.enabled)return;const e=this.tasks.filter(i=>i.serviceName===this.serviceName&&i.from===this.sourceLanguage&&i.to===this.targetLanguage),n=e.filter(i=>!i.done&&!i.pending),r=e.filter(i=>i.pending);if(r.length===0)return;const a=r[0];n.length<this.maxTaskCount&&(await this.executeTranslationTask(a),this.processTranslationTaskQueue())}async executeTranslationTask(e,n=!1){if(e.pending=!1,e.done){e.error||this.renderTaskResult(e);return}const r=this.tasks.find(a=>a.done&&a.result&&!a.error&&a.serviceName===e.serviceName&&a.from===e.from&&a.to===e.to&&a.text===e.text&&(!this.keepStyles||a.target.nodes.map(i=>i.textContent).join(",")===e.target.nodes.map(i=>i.textContent).join(",")));if(r){e.results=r.results,e.result=r.result,this.renderTaskResult(e),e.done=!0;return}this.renderer.renderLoading(e.target);try{const a=this.keepStyles?e.target.nodes.map(s=>(s==null?void 0:s.innerText)||s.textContent||""):[e.text],i=await this.filterTextsAndTranslate(a,e.from,e.to);e.results=i,e.result=i.join(""),(this.enabled||n)&&this.renderTaskResult(e)}catch(a){if(a.name==="AbortError"){e.pending=!0,e.done=!1;return}e.error=!0,(this.enabled||n)&&this.renderer.renderError(e.target,this.retryErrorTasks.bind(this))}finally{e.pending=!1,e.done=!0}}resetErrorTasks(e=()=>{}){this.tasks.forEach(n=>{n.error&&(n.error=!1,n.done=!1,n.pending=!0,e(n))})}retryErrorTasks(e){this.beforeRetry&&this.beforeRetry(e)||(this.enabled?(this.resetErrorTasks(),this.disable(),this.enable()):this.hoverMode&&this.resetErrorTasks(n=>{this.executeTranslationTask(n,!0)}))}isTextToBeTranslated(e){return!(!e.trim()||/^[\d\s.,:;!?(){}[\]<>|@#$%^&*+=\-_`~\\\/]*$/.test(e)||/^[\uE000-\uF8FF]|[\uDB80-\uDBBF][\uDC00-\uDFFF]|[\uDBC0-\uDBFF][\uDC00-\uDFFF]*$/.test(e))}hasElementChild(e,n,r){const{recurse:a=!0}=r||{},i=this.getChildNodes(e);for(let s=0;s<i.length;s++){const o=i[s];if(o.nodeType===Node.ELEMENT_NODE){const l=o;if(n(l)||a&&this.hasElementChild(l,n,{recurse:a}))return!0}}return!1}findTargetByNode(e){const n=this.tasks.find(r=>r.target.nodes.includes(e)||r.target.element===e);return n?n.target:null}getChildNodes(e){return Array.from(e.childNodes).filter(n=>!(n.nodeType===Node.ELEMENT_NODE&&this.renderer.isTranslationElement(n)))}handleMouseMove(e){this.mousePosition={x:e.clientX,y:e.clientY}}handleKeyDown(e){this.enabled||e.key==="Shift"&&this.toggleTranslateElementAtMousePosition()}toggleTranslateElementAtMousePosition(){const e=document.elementFromPoint(this.mousePosition.x,this.mousePosition.y);if(!e)return;const n=this.getClosetMinimalTargetElement(e);n&&this.parseNode(n,r=>{r!=null&&r.translationElement?this.renderer.restore(r):this.addTranslationTask(r,!0)})}getClosetMinimalTargetElement(e){if(this.isMinimalTargetElement(e))return e;let n=e.parentElement;return n?this.getClosetMinimalTargetElement(n):null}rerender(){this.enabled&&this.tasks.forEach(e=>{e.done&&!e.error&&this.renderTaskResult(e)})}isElementInvisible(e){const n=window.getComputedStyle(e);return n.display==="none"||n.visibility==="hidden"||n.opacity==="0"}isElementDropdown(e){const n=[/dropdown/i,/select/i,/menu/i,/popup/i,/context-menu/i,/panel/i];for(const r of n)if(r.test(e.className))return!0;return!1}clearUnfinishedTasks(){this.tasks=this.tasks.filter(e=>e.done),this.service.abort()}renderTaskResult(e){if(!(e.serviceName!==this.serviceName||e.from!==this.sourceLanguage||e.to!==this.targetLanguage)){if(!this.translateSameLanguage&&e.text===e.result){this.renderer.restore(e.target);return}this.renderer.renderResult(e.target,e.results,this.replaceMode,this.theme,this.keepStyles,this.isRTL)}}renderTasks(){this.tasks.forEach(e=>{e.serviceName===this.serviceName&&e.from===this.sourceLanguage&&e.to===this.targetLanguage&&(e.done?e.error?this.renderer.renderError(e.target,this.retryErrorTasks.bind(this)):this.renderTaskResult(e):e.pending||this.renderer.renderLoading(e.target))})}debugParseElement(e,n){this.debug&&e===null&&console.log(n,e)}observeMutation(e){this.mutationObserver||(this.mutationObserver=new MutationObserver(this.mutaionHandler)),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class","style"],childList:!0,subtree:!0})}disconnectMutation(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}async filterTextsAndTranslate(e,n,r){const a=[],i=[];for(let o=0;o<e.length;o++){const l=e[o];this.isTextToBeTranslated(l)&&(a.push(l),i.push(o))}const s=await this.service.translate(a,n,r);for(let o=0;o<i.length;o++){const l=i[o];e[l]=s[o]}return e}}const _i=C(""),Ti=C(""),wi=C(!1),bi=C(!1),xi=C(),yi=C(""),Ai=C(""),Ci=C(!1),Si=C(!1),Di=C();let fr=[...Ma];function Vr(){const t=(u,f)=>{u===V.EXPLAIN?Ti.value+=f:Ai.value+=f},e=(u,f,h)=>{u===V.EXPLAIN?(wi.value=f,bi.value=!0,xi.value=h):(Ci.value=f,Si.value=!0,Di.value=h)},n=()=>{Ti.value="",wi.value=!1,bi.value=!1,xi.value=void 0,_i.value="",Ai.value="",Ci.value=!1,Si.value=!1,Di.value=void 0,yi.value=""},r=u=>u===V.EXPLAIN?_i.value:yi.value,a=(u,f)=>{u===V.EXPLAIN?_i.value=f||Ur():yi.value=f||Ur()},i=u=>{fr=fr.filter(f=>f!==u),fr.length===0&&c()},s=()=>{const u=$u.find(f=>f.website.some(h=>window.location.hostname.includes(h)));return u?[...u.styles]:[]},o=()=>Ma.length-fr.length,l=()=>{const u=[];for(;u.length<sa;){const x=Xs[Math.floor(Math.random()*Xs.length)];u.includes(x)||(i(x),u.push(x))}const h=o()===0?s():[];for(h.forEach(x=>{i(x)});h.length<ji;){const x=fr[Math.floor(Math.random()*fr.length)];h.includes(x)||(i(x),h.push(x))}const b=sa+ji;return[...u,...h].slice(0,b).join("||")},c=()=>{fr=[...Ma]};return{explainText:Ti,explainError:wi,explainDone:bi,explainErrorCode:xi,improveWriteText:Ai,improveWriteError:Ci,improveWriteErrorCode:Di,improveWriteDone:Si,addExplainImproveWriteText:t,setExplainImproveWriteError:e,resetExplainImproveWrite:n,getCurrentRequestId:r,setCurrentRequestId:a,getRecommendImproveWriteStyles:l,resetUsedImproveWriteStyles:c,getUsedVipStylesCount:o}}async function hs(t){const n={initial_service:await rt(Ee.INITIAL_SERVICE),status:"processing",...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,n)}async function ml(t){const n={initial_service:await rt(Ee.INITIAL_SERVICE),...t};t.feature==="plugin_translate_website"&&(n.current_page_no=window.scrollY||document.documentElement.scrollTop),k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,n)}function vl(t,e){return t===ze.SUCCESS?"success":t===ze.EXTEND_LIMIT?"failed_exceed_freetrial_aimodel_limit":t===ze.NOT_LOGIN?"failed_not_login":t===ze.PRIVILEGE_INSUFFICIENT?"failed_privilege_insufficient":t===ze.USER_STOP_GENERATE?"failed_user_stop_generate":t===ze.NO_SERVER?"failed_network_error":`failed_${e}`}async function zr(t,e){const n=t.texts.reduce((u,f)=>u+f.text.length,0),r=Date.now(),a=Ur();let i=ye.defaultSourceLanguage;if(!t.from&&e.feature==="plugin_translate_website")try{i=await ot(Ie.DETECT_PAGE_LANGUAGE)}catch{}hs({position:e.position,text_num:n,source_language:`auto_detect_${t.from||i}`,target_language:t.to,service:t.service,feature:e.feature,request_id:a});const s={...t,requestId:a},l=Mn(t.service)?await ot(Ie.TRANSLATE_TEXT,s):await xc(s),c=Date.now()-r;return ml({position:e.position,request_id:a,text_num:n,source_language:`auto_detect_${t.from||i}`,target_language:t.to,service:t.service,feature:e.feature,loading_duration:c,status:vl(l==null?void 0:l.code,l==null?void 0:l.msg)}),l}async function El(t,e){var c;const{texts:n,from:r,to:a,service:i}=t,s=[];for(let u=0;u<n.length;u+=Ks)s.push(n.slice(u,u+Ks));const o=qu,l=[];for(let u=0;u<s.length;u+=o){const h=s.slice(u,u+o).map(async S=>await zr({service:i,texts:S.map(N=>({text:String(N)})),from:r,to:a,type:V.WEBSITE},e)),b=await Promise.all(h);for(const S of b)if(S.code===ze.SUCCESS&&S.data){const x=((c=S.data)==null?void 0:c.map(N=>N.text))||[];l.push(...x)}else throw S}return l}let ua,qa=null;async function Ld(t,e){var i;const n=t.input.length;let r=ye.defaultSourceLanguage;try{r=await ot(Ie.DETECT_PAGE_LANGUAGE)}catch{}ua={position:e.position,text_num:n,source_language:`auto_detect_${r}`,target_language:t.targetLanguage,service:((i=Ja.find(s=>s.engineCode===t.engineCode))==null?void 0:i.value)||"",feature:e.feature,request_id:t.requestId},qa=Date.now(),hs(ua);const a=t.translateType===V.EXPLAIN?Yi.TRANSLATE_EXPLAIN:Yi.TRANSLATE_IMPROVE_WRITE;ot(Ie.CHAT_COMPLETIONS,{...t,scene:a,reportParams:e})}async function Li(t){if(!qa)return;const e={request_id:t.requestId};t.done?(e.loading_duration=Date.now()-qa,e.status=vl(t.code,t.msg)):e.status="processing",ml({...ua,...e})}async function Id(t,e){var i;const n=t.input.length;let r=ye.defaultSourceLanguage;try{r=await ot(Ie.DETECT_PAGE_LANGUAGE)}catch{}ua={position:e.position,text_num:n,source_language:`auto_detect_${r}`,target_language:`auto_detect_${r}`,service:((i=Ja.find(s=>s.engineCode===t.engineCode))==null?void 0:i.value)||"",feature:e.feature,request_id:t.requestId,improve_writing_styles:t.styles},qa=Date.now(),hs(ua);const a=Yi.TRANSLATE_IMPROVE_WRITE_STYLES;ot(Ie.CHAT_COMPLETIONS,{...t,scene:a,reportParams:e,targetLanguage:r})}function Rd(t,e){const r=Date.now();let a=null;return{resultPromise:new Promise(async s=>{await Id({...t},e),a=setInterval(()=>{if(Date.now()-r>12e4){a&&(clearInterval(a),a=null),s({code:ze.REQUEST_TIMEOUT});return}const{improveWriteDone:o,improveWriteText:l,improveWriteError:c,improveWriteErrorCode:u}=Vr();if(c.value){a&&(clearInterval(a),a=null),s({code:u.value||ze.UNKNOWN_ERROR});return}else if(o.value&&!c.value){a&&(clearInterval(a),a=null);try{const f=JSON.parse(l.value);nt.info("styles:",f),s({code:ze.SUCCESS,data:f})}catch{s({code:ze.UNKNOWN_ERROR})}return}},300)}),abort:()=>{a&&clearInterval(a),a=null}}}let ms=null,Xt=null;const ir=new Map;let jn;const Wa={},{userSettings:io}=pt(),so={};let Nd=class{constructor(e){Ce(this,"service");this.service=e}async translate(e,n,r){var c,u,f;const a=ms,{targetLanguage:i,serviceName:s}=jn,o={targetLanguage:i,serviceName:s},l=e.map((h,b)=>h.trim()===""?{index:b,value:h}:null).filter(h=>h!==null);e=e.filter(h=>h.trim()!=="");try{const h=await El({texts:e,from:n,to:r,service:this.service},Wa);return nt.info("translate result:",h),l.forEach(({index:b,value:S})=>{h.splice(b,0,S)}),(c=ir.get(a))==null||c("success",o),h}catch(h){if(h.code===ze.EXTEND_LIMIT)(u=ir.get(a))==null||u("limit",o);else throw nt.error(":",h.msg),(f=ir.get(a))==null||f("error",o),new Error(h.msg)}}},kd=class{constructor(e){Ce(this,"service");this.service=e}async translate(e,n,r){var c,u,f;const a=ms,{targetLanguage:i,serviceName:s}=jn,o={targetLanguage:i,serviceName:s},l=await zr({service:this.service,texts:e.map(h=>({text:String(h)})),from:n,to:r,type:V.WEBSITE},Wa);if(l.code===ze.SUCCESS&&l.data)return(c=ir.get(a))==null||c("success",o),((u=l.data)==null?void 0:u.map(b=>b.text))||[];throw(f=ir.get(a))==null||f("error",o),nt.error(":",l.msg),new Error(l.msg)}};const oo=t=>{if(!Xt)return;const e=ei(t);jn.serviceName=t,jn.maxTaskCount=e,Xt.maxTaskCount=e,so[t]||(Mn(t)?Xt.addService(t,new Nd(t)):Xt.addService(t,new kd(t)),so[t]=t),Xt.setService(t)};function _l(){return{translateElement:async(i,s)=>{if(!i)return;ms=i;const o=io.value.translationService,l=io.value.targetLanguage;Xt?(jn.serviceName!==o&&oo(o),jn.targetLanguage!==l&&(jn.targetLanguage=l,Xt.setTargetLanguage(l))):(jn={translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:ei(o),appName:ye.appName,targetLanguage:l,replaceMode:!0,theme:"default"},Xt=new hl(jn),oo(o)),ir.set(i,s),Xt==null||Xt.restoreElement(i),Xt==null||Xt.translateElement(i)},restoreElement:i=>{i&&Xt&&Xt.restoreElement(i)},setReportParams:(i,s)=>{Wa.position=i,Wa.feature=s},deleteElementResult:i=>{ir.delete(i)},restoreAllElement:()=>{var i;if(Xt)try{for(const s of ir.keys())(i=s.selfRestore)==null||i.call(s)}catch{}}}}const Ii=C(!1);let Ri={disable:!1,closeGap:7,showGap:60,useGap:2,useTimes:3};function qr(){return{pluginCommentGuidShow:Ii,setPluginUseTime:async()=>{var b;const{onlineParams:n}=an();(b=n.value)!=null&&b.pluginComment&&(Ri=n.value.pluginComment);const r=await rt(Ee.FIRST_USE_TIME),a=await rt(Ee.USE_COUNT,0)+1;if(await mt(Ee.USE_COUNT,a),!r){await mt(Ee.FIRST_USE_TIME,Date.now());return}if(Ri.disable)return;const{useGap:i,showGap:s,closeGap:o,useTimes:l}=Ri,c=await rt(Ee.PLUGIN_COMMENT_GUID_SHOW_TIME),f=await rt(Ee.PLUGIN_COMMENT_GUID_GAP)==="go"?s:o,h=async()=>{Ii.value=!0,await mt(Ee.PLUGIN_COMMENT_GUID_SHOW_TIME,Date.now()),await mt(Ee.PLUGIN_COMMENT_GUID_GAP,"close")};if(!c&&Date.now()-r>i*24*60*60*1e3&&a>=l){await h();return}if(c&&f&&Date.now()-c>f*24*60*60*1e3){await h();return}},closePluginCommentGuid:async n=>{Ii.value=!1,await rt(Ee.PLUGIN_COMMENT_GUID_GAP)!=="go"&&(n==="go"&&await mt(Ee.PLUGIN_COMMENT_GUID_GAP,"go"),n==="close"&&await mt(Ee.PLUGIN_COMMENT_GUID_GAP,"close"))}}}const Bd=["dir"],Od=je({__name:"WebTranslateExceedLimitTip",props:{pageTranslateScene:{},targetElement:{default:void 0}},emits:["close"],setup(t,{expose:e,emit:n}){const{isPageTranslated:r,pageTranslateOptionsVersion:a}=lr(),{locale:i}=Tt(),s=t,o=n,l=C(null),c=C({}),u=C("50%"),f=C("top"),h=Z(()=>f.value==="top"?"bottom":"top"),b=Z(()=>s.pageTranslateScene===zt.HOVER_BALL?"plugin_floatingball_translate_website":s.pageTranslateScene===zt.DROPDOWN?"plugin_dropdown_translate_website":s.pageTranslateScene===zt.CONTEXT_MENU?"plugin_rightclickmenu_translate_website":(s.pageTranslateScene===zt.TRANSLATE_BAR,"other")),S=Z(()=>dn(i.value)?"rtl":"ltr"),x=(H,X,A)=>H.top>=(X||100)+A?"top":"bottom",N=()=>{if(!s.targetElement)return;const H=s.targetElement.getBoundingClientRect(),X=300,A=100,D=8;let y=A,F=X;if(l.value){const O=l.value.getBoundingClientRect();O.width>0&&(F=O.width),O.height>0&&(y=O.height)}f.value=x(H,y,D);const G=H.left+H.width/2,K=G-F/2,de=Math.max(10,Math.min(K,window.innerWidth-F-10)),ne=G-de,we=20,Q=F-20,Le=Math.max(we,Math.min(ne,Q));u.value=`${Le}px`;let ie;f.value==="top"?ie=H.top-y-D:ie=H.bottom+D,ie<10?ie=10:ie+y>window.innerHeight-10&&(ie=window.innerHeight-y-10),c.value={position:"fixed",top:`${ie}px`,left:`${de}px`,zIndex:"1000000"}};let _=null;const E=()=>{_!==null&&window.clearTimeout(_),_=window.setTimeout(()=>{N(),_=null},16)},g=Z(()=>({...c.value,width:"300px",maxWidth:"90vw"})),p=()=>{var A;o("close");const H=(A=l.value)==null?void 0:A.getRootNode(),X=H==null?void 0:H.host;X!=null&&X.onClose?X.onClose():X==null||X.remove()},m=H=>{if(!l.value)return;const X=H.target;l.value.contains(X)||p()};let d=null,J=null,q=null,W=null;const oe=()=>{s.targetElement&&(ht(()=>{N()}),d=new ResizeObserver(()=>{E()}),d.observe(s.targetElement),d.observe(document.documentElement),J=new MutationObserver(()=>{E()}),J.observe(s.targetElement,{attributes:!0,attributeFilter:["style","class"],childList:!1,subtree:!1}),q=()=>{E()},window.addEventListener("scroll",q,!0),document.addEventListener("scroll",q,!0),W=()=>{E()},window.addEventListener("resize",W))},Y=()=>{d&&(d.disconnect(),d=null),J&&(J.disconnect(),J=null),q&&(window.removeEventListener("scroll",q,!0),document.removeEventListener("scroll",q,!0),q=null),W&&(window.removeEventListener("resize",W),W=null),_!==null&&(window.clearTimeout(_),_=null)};return Te(()=>s.targetElement,(H,X)=>{X&&Y(),H&&ht(()=>{oe()})}),Te([r,a],()=>{p()}),Bt(()=>{ht(()=>{document.addEventListener("click",m,!0),s.targetElement&&oe()})}),_r(()=>{document.removeEventListener("click",m,!0),Y()}),e({close:p}),(H,X)=>(B(),re("div",{ref_key:"containerRef",ref:l,dir:S.value,class:"translate-error-exceed-limit-tip-container anydoc-translate-ignore",style:De(g.value)},[fe(Er,{class:"message-tip",scene:"plugin_translate_web_retry_free_trial_limit",position:h.value,reportPosition:b.value,offset:u.value,onClose:p},null,8,["position","reportPosition","offset"])],12,Bd))}}),Pd=at(Od,[["__scopeId","data-v-0d6b1902"]]);let Pr,Nt=null,Pt;const ka=new Map,Ni={},ki={[Jr.ORIGINAL]:"default",[Jr.COLORED]:"primary",[Jr.GHOSTED]:"weakness",[Jr.HIGHLIGHT]:"highlight",[Jr.UNDERLINED]:"underline"},Ga={},kn=C(!1),lo=C(0),{restoreAllElement:Fd}=_l(),{userInfo:Md}=St(),Ud="anydoc-translate-error-exceed-limit-tip-wrapper",$d=Z(()=>{var t;return(t=Md.value)==null?void 0:t.isVip});function Ba(){if(!Pt)return"";const e=Object.keys(Pt).sort().reduce((n,r)=>(typeof Pt[r]=="function"||(n[r]=Pt[r]),n),{});return JSON.stringify(e)}class qd{constructor(e){Ce(this,"service");this.service=e}async translate(e,n,r){const a=e.map((i,s)=>i.trim()===""?{index:s,value:i}:null).filter(i=>i!==null);e=e.filter(i=>i.trim()!=="");try{const i=await El({texts:e,from:n,to:r,service:this.service},Ga);return nt.info("translate result:",i),a.forEach(({index:s,value:o})=>{i.splice(s,0,o)}),i}catch(i){if(i.code===ze.EXTEND_LIMIT)ka.set(Ba(),!0),Tl();else if(i.code===ze.NOT_LOGIN||i.code===ze.ERROR_DEVICE_ID){const{setUserInfo:s}=St();s(void 0),Oa(Ln.GOOGLE)}else throw i}}}class Wd{constructor(e){Ce(this,"service");this.service=e}async translate(e,n,r){var i;const a=await zr({service:this.service,texts:e.map(s=>({text:String(s)})),from:n,to:r,type:V.WEBSITE},Ga);if(a.code===ze.SUCCESS&&a.data)return((i=a.data)==null?void 0:i.map(o=>o.text))||[];throw nt.error(":",a.msg),new Error(a.msg)}}async function Tl(t=!1){var a;const{hoverBallExceedLimitTipShow:e}=ss(),{exceedLimitDialogShow:n,showMask:r}=vn();if(Pr===zt.DROPDOWN)ot(Ie.TRANSLATE_EXCEED_LIMIT);else if(Pr===zt.CONTEXT_MENU)n.value=!0,r.value=!1;else if(Pr===zt.HOVER_BALL){const{onlineParams:i}=an(),s=((a=i.value)==null?void 0:a.limitTipGap)||3,o=await rt(Ee.HOVER_BALL_EXCEED_LIMIT_TIP_CLOSE_CLICK);if((!o||Date.now()-o>s*24*60*60*1e3)&&(e.value=!0),!t){const{userSettings:l,notifyUserSettings:c}=pt(),u=l.value.services.find(h=>!h.isAIService&&!h.isVipService),f=u?u.value:Ln.GOOGLE;c({translationService:f}),ot(Ie.CONTENT_SCRIPT_CHANGE_TRANSLATE_OPTIONS,{service:f,scene:zt.HOVER_BALL})}}}async function Gd(){const{userSettings:t}=pt(),e=await rt(Ee.TEMP_CONFIGS);return e&&e.translationService?e.translationService:t.value.translationService}async function Hd(){const{userSettings:t}=pt(),e=await rt(Ee.TEMP_CONFIGS);return e&&e.targetLanguage?e.targetLanguage:t.value.targetLanguage}async function Vd(){const{userSettings:t}=pt(),e=await rt(Ee.TEMP_CONFIGS);return e&&e.displayTheme?e.displayTheme:t.value.pageTranslation.theme}async function zd(){const{userSettings:t}=pt(),e=await rt(Ee.TEMP_CONFIGS);return e&&e.displayMode?e.displayTheme:t.value.pageTranslation.displayMode}const Oa=t=>{if(!Nt)return;const e=ei(t),n=nl(t);Pt.serviceName=t,Pt.maxTaskCount=e,Pt.maxTextCountPerRequest=n,Nt.maxTaskCount=e,Nt.service&&(Nt.service.maxTextCountPerRequest=n),Ni[t]?Nt.setService(Ni[t]):(Mn(t)?Nt.addService(t,new qd(t)):Nt.addService(t,new Wd(t)),Ni[t]=t,Nt.setService(t))};function lr(){const{setupGoogleDocsTranslatePageObserver:t,cleanupGoogleDocsTranslatePageObserver:e}=or(),n=()=>{kn.value=!kn.value,ot(Ie.CHANGE_CONTEXT_MENU_BY_TRANSLATE_STATUS,kn.value),kn.value&&Mn(Pt.serviceName)&&ka.has(Ba())&&Tl(!0),rl()&&(kn.value?t(()=>kn.value):e())},r=async(u="")=>{var E;const{onlineParams:f}=an(),h=(E=f.value)==null?void 0:E.openPdfProPage,{setPluginUseTime:b}=qr(),S=Ra(location.href);let x="plugin_floatingball_translate_academia";u==="contextMenu"?x="plugin_rightclickmenu_translate_academia":u==="dropdown"?x="plugin_dropdown_translate_academia":u==="translateBar"?x="plugin_translate_pdf":u==="academia"&&(x="plugin_academia_translate_bar");const N=location.href,_={plugin:"anydoc",position:x};h&&(_.isPdf=1),S?_.academia_url=encodeURIComponent(N):_.pdf_url=encodeURIComponent(N),ct(`${ye.fileTranslateRedirectPage}?${new URLSearchParams(_).toString()}`),b()},a=async u=>{var g;Pr=u;const{setPluginUseTime:f}=qr(),{setNoLoginTranslateUseCount:h}=va();if(tl()){r(u);return}const b=await zd(),S=await Vd(),x=await Gd(),N=await Hd(),_=b===zn.REPLACE;Nt?(Pt.serviceName!==x&&Oa(x),Pt.targetLanguage!==N&&(Pt.targetLanguage=N,Nt.setTargetLanguage(N)),Pt.replaceMode!==_&&(Pt.replaceMode=_,s(_?zn.REPLACE:zn.SIDE_BY_SIDE,S))):(Pt={ignoreElementSelector:".anydoc-translate-ignore",rangeOffset:100,translateSameLanguage:!0,onlyTranslateMainContent:!1,maxTaskCount:ei(x),maxTextCountPerRequest:nl(x),appName:ye.appName,targetLanguage:N,replaceMode:_,theme:ki[S],beforeRetry:p=>{if(!p)return!1;if(kn.value&&Mn(Pt.serviceName)&&ka.has(Ba())){const m=sr(Ud,Pd,!0,{targetElement:p,pageTranslateScene:Pr});document.body.appendChild(m);const d=()=>{m.remove()};return m.onClose=d,!0}return!1}},Nt=new hl(Pt),Oa(x),mt(Ee.WEB_TRANSLATOR_SDK_VERSION,Nt.version),(g=Nt.ignoreElementTags)!=null&&g.push&&Nt.ignoreElementTags.push("OPTION"));const{hideExceedLimitTip:E}=ss();E(),kn.value||Fd(),Nt.toggle(),n(),kn.value&&(f(),h())},i=()=>{Nt&&(Nt.toggle(),n())},s=(u,f)=>{Nt&&(u===zn.REPLACE?(Pt.replaceMode=!0,Nt.setReplaceMode(!0)):(Nt.setReplaceMode(!1),Nt.setTheme(ki[f]),Pt.replaceMode=!1,Pt.theme=ki[f]))},o=u=>{if(Pr=u.scene||zt.DROPDOWN,!Nt)return;const f=u.sourceLanguage!==void 0&&u.sourceLanguage!==Pt.sourceLanguage,h=u.targetLanguage!==void 0&&u.targetLanguage!==Pt.targetLanguage,b=u.service!==void 0&&u.service!==Pt.serviceName,S=f||h||b;u.sourceLanguage&&(Pt.sourceLanguage=u.sourceLanguage,Nt.setSourceLanguage(u.sourceLanguage)),u.targetLanguage&&(Pt.targetLanguage=u.targetLanguage,Nt.setTargetLanguage(u.targetLanguage)),u.service&&Oa(u.service),S&&(lo.value+=1)},l=u=>{Nt&&Nt.setWatch(u)},c=(u,f)=>{Ga.position=u,Ga.feature=f};return Te($d,u=>{const f=Ba();u&&f&&ka.delete(f)}),{isPageTranslated:Qs(kn),pageTranslateOptionsVersion:Qs(lo),translatePage:a,translatePdfPage:r,showOriginPage:i,setTranslatePageStyle:s,changeTranslateOptions:o,setWatchTranslate:l,setReportParams:c}}const jd=C(!0),Yd=C();function vs(){return{isWindowActive:jd,currentWindowId:Yd}}const Xd={class:"hover-ball-onboarding-container",style:{right:"calc(100% + 8px)"}},Kd={class:"hover-ball-onboarding-content"},Qd={class:"hover-ball-onboarding-title"},Zd={class:"hover-ball-onboarding-desc"},Jd=je({__name:"HoverBallOnboarding",emits:["close"],setup(t,{emit:e}){const{t:n}=Tt(),r=e,a=()=>{r("close"),k.reportClickEvent("plugin_floatingball_guide_page","close")},i=()=>{r("close"),k.reportClickEvent("plugin_floatingball_guide_page","got_it")},s=()=>chrome.runtime.getURL("/public/images/hoverball-onboarding.png");return(o,l)=>(B(),re("div",Xd,[fe(jt,{icon:"close",size:28,class:"hover-ball-onboarding-close",onClick:a}),T("div",{class:"hover-ball-onboarding-image",style:De({backgroundImage:`url(${s()})`})},null,4),T("div",Kd,[T("div",Qd,ce(j(n)("hoverBall.onBoarding.title")),1),T("div",Zd,ce(j(n)("hoverBall.onBoarding.desc")),1),fe(Tn,{size:"large",block:"",type:"primary",onClick:i,class:"hover-ball-onboarding-button"},{default:ft(()=>[Qt(ce(j(n)("hoverBall.onBoarding.btn")),1)]),_:1})])]))}}),ep=at(Jd,[["__scopeId","data-v-e0b307f8"]]),tp={class:"onetap-login-tip"},np={class:"header-container",style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},rp={class:"title"},ap={class:"brand-container"},ip=["src"],sp={class:"brand-text"},op={key:1,class:"description"},lp={class:"description-text"},up=["src"],cp={class:"login-button-text"},dp=["src"],pp={class:"login-button-text"},fp=je({__name:"OnetapLoginTip",props:{source:{}},emits:["close","googleLogin","otherLogin"],setup(t,{emit:e}){const{userSettings:n}=pt(),{isRtl:r}=Vo(),a=e,i=t,s=Z(()=>{const f=n.value.services.filter(S=>n.value.enabledServices.includes(S.value)),h={[Ln.CHATGPT]:"ChatGPT",[Ln.DEEP_SEEK]:"DeepSeek",[Ln.GEMINI]:"Gemini",[Ln.HAIKU]:"Claude"},b=f.find(S=>S.isAIService&&!S.isVipService);return b?{icon:chrome.runtime.getURL(`public/modelIcons/small/${b.icon}.svg`),name:h[b.value]}:null}),o=f=>chrome.runtime.getURL(`public/images/${f}.png`),l=()=>{a("close"),k.reportClickEvent(i.source,"close")},c=()=>{ct(`${ye.googleLoginPage}?feature=${i.source}`),k.reportClickEvent(i.source,"sign_in_with_google"),setTimeout(()=>{a("close")},200)},u=()=>{ct(`${ye.loginUrl}?feature=${i.source}`),a("otherLogin"),k.reportClickEvent(i.source,"sign_in_with_another_way"),setTimeout(()=>{a("close")},200)};return Bt(()=>{k.reportShowEvent(i.source)}),(f,h)=>(B(),re("div",tp,[T("div",np,[T("h3",rp,ce(f.$t("onetapLoginTips.title")),1),fe(jt,{style:{"margin-top":"-4px"},icon:"close",size:24,onClick:l})]),s.value?(B(),Fe(j(la),{key:0,keypath:"onetapLoginTips.desc",class:"description description-text",tag:"div"},{default:ft(()=>[T("div",ap,[T("img",{src:s.value.icon,class:"brand-icon"},null,8,ip),T("span",sp,ce(s.value.name),1)])]),_:1})):(B(),re("div",op,[T("span",lp,ce(f.$t("hoverBall.loginTips.btn")),1)])),T("div",{class:"login-button google-login",onClick:c},[T("img",{src:o("google"),class:"login-button-icon"},null,8,up),T("span",cp,ce(f.$t("onetapLoginTips.googleLogin")),1),fe(vt,{icon:"arrow-down",style:De(j(r)?{rotate:"90deg"}:{rotate:"-90deg"}),size:14},null,8,["style"])]),T("div",{class:"login-button",onClick:u},[T("img",{src:o("login-icon"),class:"login-button-icon"},null,8,dp),T("span",pp,ce(f.$t("onetapLoginTips.otherLogin")),1)])]))}}),ai=at(fp,[["__scopeId","data-v-2a3e1960"]]),gp={class:"confirm-container"},hp={class:"confirm-header"},mp={class:"title"},vp={class:"confirm-content"},Ep={class:"confirm-footer"},_p=je({__name:"SecondConfirm",props:{source:{},title:{},options:{}},emits:["close","confirm"],setup(t,{emit:e}){const{t:n}=Tt(),{userInfo:r,contentScriptRefreshUserInfo:a}=St(),i=e,s=t,o=C(s.options[0].value),l=Z(()=>s.source==="select_text"?"plugin_select_to_retention_page":s.source==="input_ball"?"plugin_textbox_retention_page":s.source==="image_ball"?"plugin_image_translate_retention_page":"plugin_floatingball_retention_page"),c=()=>{i("close"),k.reportClickEvent(l.value,"close")},u=()=>{i("confirm",o.value);const h=["this_time_closed_until_next_visit","disabled_for_current_page","disable_permanently"][Number(o.value)-1];k.reportClickEvent(l.value,"confirm_list_selected",{selected_item:h})},f=()=>{const h={hover_ball:ye.hoverBallSettingPage,select_text:ye.selectSettingPage,input_ball:ye.textBoxSettingPage,image_ball:ye.imageSettingPage}[s.source];let b;if(r.value)b=`${h}?source=plugin`;else{let S="plugin_textbox_translate_page";s.source==="select_text"&&(S="plugin_select_to_translate_page");const x=encodeURIComponent(`${h}?source=plugin&from=extensionLogin`);b=`${ye.loginUrl}?feature=${S}&cb=${x}`}ct(b),k.reportClickEvent(l.value,"jump_to_settings")};return Bt(()=>{a()}),(h,b)=>(B(),re("div",gp,[T("div",hp,[T("div",mp,ce(s.title),1),fe(jt,{icon:"close",onClick:c})]),T("div",vp,[fe(Bu,{modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=S=>o.value=S),gap:12,options:h.options},null,8,["modelValue","options"]),fe(j(la),{keypath:"settings.canBeReEnable",class:"settings-can-be-re-enable",tag:"div"},{default:ft(()=>[T("span",{class:"settings-can-be-re-enable-link",onClick:f},ce(j(n)("common.setting")),1)]),_:1})]),T("div",Ep,[fe(Tn,{onClick:u,class:"confirm-button",type:"primary"},{default:ft(()=>[Qt(ce(j(n)("common.confirm")),1)]),_:1})])]))}}),ii=at(_p,[["__scopeId","data-v-a3738775"]]),Tp={class:"actionContainer"},wp={key:0,class:"red-hot",style:{right:"2px"}},bp=["src"],xp=["src"],yp=je({__name:"HoverBall",emits:["close"],setup(t,{emit:e}){const n=e,{t:r}=Tt(),{contentScriptRefreshUserInfo:a,userInfo:i}=St(),{onlineParams:s}=an(),{isPageTranslated:o,setTranslatePageStyle:l}=lr(),{userSettings:c,notifyUserSettings:u,getSettingByKey:f}=pt(),{onBoardingShow:h}=cl(),{isWindowActive:b}=vs(),{hoverBallExceedLimitTipShow:S}=ss(),{loginTipShow:x,checkLoginTipShow:N,showLoginTipGuid:_}=va(),{showLanguageSameTip:E,checkLanguageSameTip:g,closeLanguageSameTip:p}=Pu(),{giftText:m,giftType:d}=Gr(),{checkDialogAndUpdateUsageInfo:J}=ri(),q=tt("containerRef"),W=tt("giftBallContainerRef"),oe=tt("translateIconRef"),Y=tt("secondConfirmRef"),H=tt("loginTipRef"),X=C(!1),A=C(null),D=C(!1),y=C(c.value.pageTranslation.displayMode===zn.SIDE_BY_SIDE),F=C(!1),G=C(!1),K=C(""),de=C({top:"0px",right:"0px"}),ne=C(!1),we=Z(()=>[{value:"1",label:r("hoverBall.closeOneTime")},{value:"2",label:r("hoverBall.disableOnePage")},{value:"3",label:r("hoverBall.disable")}]),Q=C(0),{y:Le,isDragging:ie}=Ou(oe),O=Z(()=>[{icon:y.value?"showOrigin":"hideOrigin",click:ke,tip:y.value?r("hoverBall.tips.replace"):r("hoverBall.tips.sidebyside")},{icon:"moreTools",click:et,tip:r("common.translateFileAndMore")},{icon:"open-setting",click:Ne,tip:r("common.setting")},{icon:"feedback-grey",click:Qe,tip:r("common.feedback")}]),M=Z(()=>W.value?40:0),ee=Z(()=>{if(q.value&&Y.value){const w=q.value.clientHeight,I=Y.value.$el.clientHeight,U=window.innerHeight-Q.value-w;return U>I-16?{top:`${w-16}px`,right:`${q.value.clientWidth-4}px`}:{top:`${w-(I-U)-16}px`,right:`${q.value.clientWidth+4}px`}}return{}}),Ae=Z(()=>{if(q.value&&H.value){const v=H.value.$el.getBoundingClientRect();if(v.bottom>window.innerHeight)return{transform:`translateY(${window.innerHeight-v.bottom-10}px)`}}return{}}),Re=Z(()=>{const v=c.value.targetLanguage,w=gn(v);return w?r(`language.${w.value}`)||w.label:r("language.en")}),Ue=Z(()=>E.value||x.value||h.value||ie.value||X.value);Te(b,v=>{v===!0&&document.visibilityState==="visible"&&Ge()}),Te(c,v=>{y.value=v.pageTranslation.displayMode===zn.SIDE_BY_SIDE}),Te(ie,v=>{G.value=!1,v===!1&&mt(Ee.HOVER_BALL_POSITION,Q.value)}),Te(x,v=>{v===!1&&(X.value=!1)}),Te(Le,v=>{if(q.value){const I=window.innerHeight-q.value.clientHeight;Q.value=Math.min(Math.max(v-2-M.value,0),I)}}),Te(S,v=>{v&&p()});let pe=null;Te(X,v=>{clearTimeout(pe),v===!1&&(D.value=!1),!h.value&&v===!0&&(pe=setTimeout(()=>{var w;k.reportShowEvent("plugin_floatingball_page"),(w=i.value)!=null&&w.isVip||k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"show",item:"plugin_floatingball_page_get_trial",type:d.value==="1"?"1":"6"})},500))}),Te(o,v=>{v||p()}),Te(E,v=>{v&&k.reportShowEvent("plugin_floatingball_page_samelanguage_notice")}),un(Y,()=>{D.value=!1,X.value=!1},{ignore:[q]});const ge=v=>chrome.runtime.getURL(`public/images/${v}.png`),Me=async()=>{if(o.value){p(),ot(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:zt.HOVER_BALL,translate:!1});return}if(J(),x.value)return;await N()?(_(zt.HOVER_BALL),k.reportShowEvent("plugin_floatingball_login_guide_page")):(!S.value&&g(),ot(Ie.CONTENT_SCRIPT_TRANSLATE_PAGE,{scene:zt.HOVER_BALL,translate:!0}))},qe=v=>{v&&a(),!E.value&&!x.value&&!h.value&&!D.value&&(X.value=v)};let Ye=0;const wt=()=>{Ye=Date.now()},dt=()=>{Date.now()-Ye<200&&(k.reportClickEvent("plugin_floatingball_page",o.value?"show_original":"translate"),Me())},We=(v,w)=>{if(ie.value){G.value=!1;return}const I=v.target.getBoundingClientRect();G.value=!0,de.value={top:`${I.top+I.height/2}px`,right:"44px"},K.value=w},ke=()=>{y.value=!y.value;const v=f("pageTranslation");v.displayMode=y.value?zn.SIDE_BY_SIDE:zn.REPLACE,u({pageTranslation:v}),l(v.displayMode,v.theme),ot(Ie.SET_IFRAME_TRANSLATE_PAGE_STYLE,{theme:v.theme,displayMode:v.displayMode}),ot(Ie.SET_OTHER_TABS_TRANSLATE_PAGE_STYLE,{theme:v.theme,displayMode:v.displayMode}),o.value||Me(),k.reportClickEvent("plugin_floatingball_page",y.value?"open_show_billingual_translation":"close_show_billingual_translation")};function gt(){var w;const v=((w=s.value)==null?void 0:w.imageSites)||[];return _n(location.href,v)}const et=async()=>{F.value=!1,mt(Ee.HOVER_BALL_MORE_TOOLS_CLICK,!0),G.value=!1,X.value=!1;let v="",w="jumpto_translate_file";gt()?(v=`${ye.imagePage}?position=plugin_floatingball_jumpto_translate_image`,w="jumpto_translate_image"):v=`${ye.translatorPage}?position=plugin_floatingball_jumpto_translate_file`,ct(v),k.reportClickEvent("plugin_floatingball_page",w)},Be=()=>{ct(`${ye.priceUrl}?position=plugin_floatingball_page_get_trial`),k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"click",item:"plugin_floatingball_page_get_trial",type:d.value==="1"?"1":"6"})},Ne=()=>{G.value=!1,p(),ot(Ie.OPEN_POPUP),k.reportClickEvent("plugin_floatingball_page","settings")},Qe=()=>{G.value=!1,X.value=!1,ct(`${ye.feedBackPage}?source=plugin&entry=webpage_translate`),k.reportClickEvent("plugin_floatingball_page","feebback")},ae=()=>{h.value||(D.value=!0,k.reportShowEvent("plugin_floatingball_retention_page"),k.reportClickEvent("plugin_floatingball_page","close"))},be=()=>{X.value=!1,D.value=!1},Oe=v=>{D.value=!1,X.value=!1,n("close",v)},Ze=()=>{h.value=!1,ot(Ie.CLOSE_HOVER_BALL_ONBOARDING)},le=()=>{x.value=!1},Se=()=>{S.value=!1,mt(Ee.HOVER_BALL_EXCEED_LIMIT_TIP_CLOSE_CLICK,Date.now())},Ge=async()=>{await rt(Ee.HOVER_BALL_BOARDING)===void 0&&document.visibilityState==="visible"&&b.value&&(mt(Ee.HOVER_BALL_BOARDING,!0),h.value=!0,k.reportShowEvent("plugin_floatingball_guide_page"))};function Xe(v,w){if(w==="local"&&v[Ee.TEMP_CONFIGS]){const{newValue:I}=v[Ee.TEMP_CONFIGS];I&&I.displayMode!==void 0&&(y.value=I.displayMode===zn.SIDE_BY_SIDE)}w==="local"&&v[Ee.HOVER_BALL_MORE_TOOLS_CLICK]&&(F.value=!1)}return Bt(async()=>{Q.value=await rt(Ee.HOVER_BALL_POSITION,window.innerHeight/3),ne.value=!0,await rt(Ee.HOVER_BALL_MORE_TOOLS_CLICK)||(F.value=!0),Ge(),await rt(Ee.HOVER_BALL_BOARDING)===void 0&&document.addEventListener("visibilitychange",Ge),chrome.storage.onChanged.addListener(Xe)}),Un(()=>{document.removeEventListener("visibilitychange",Ge),chrome.storage.onChanged.removeListener(Xe)}),(v,w)=>{var I;return B(),re(kt,null,[Wt(T("div",{class:lt(["hover-ball-container",{hover:Ue.value}]),style:De({top:`${Q.value}px`,right:"1px"}),ref_key:"containerRef",ref:q,onMouseleave:w[5]||(w[5]=U=>qe(!1)),onMouseenter:w[6]||(w[6]=U=>qe(!0))},[(I=j(i))!=null&&I.isVip?ve("",!0):(B(),re("div",{key:0,onClick:Be,class:"gift-ball-container",style:De({visibility:Ue.value?"visible":"hidden"}),onMouseenter:w[0]||(w[0]=U=>We(U,j(m))),onMouseleave:w[1]||(w[1]=U=>G.value=!1),ref_key:"giftBallContainerRef",ref:W},[T("div",{class:"gift-image",style:De({backgroundImage:`url(${ge("gift")})`})},null,4)],36)),T("div",Tp,[T("div",{ref_key:"translateIconRef",ref:oe,onMouseenter:w[2]||(w[2]=U=>We(U,j(o)?j(r)("translate.showOrigin"):j(r)("hoverBall.tips.translate",[Re.value]))),onMouseleave:w[3]||(w[3]=U=>G.value=!1),onMousedown:wt,onMouseup:dt,class:"translateIcon"},[fe(vt,{style:De({rotate:Ue.value?"0deg":"90deg"}),icon:j(o)?"translated":"translate-text-white",size:20},null,8,["style","icon"])],544),T("div",{class:"otherIcons",ref_key:"otherIconsRef",ref:A},[(B(!0),re(kt,null,rn(O.value,U=>(B(),re("div",{key:U.icon,style:{position:"relative"}},[fe(jt,{size:26,icon:U.icon,onMouseenter:P=>We(P,U.tip),onMouseleave:w[4]||(w[4]=P=>G.value=!1),onClick:U.click},null,8,["icon","onMouseenter","onClick"]),U.icon==="moreTools"&&F.value?(B(),re("div",wp)):ve("",!0)]))),128))],512)]),T("img",{class:"closeIcon",style:De({display:Ue.value?"block":"none"}),src:ge("close"),onClick:ae},null,12,bp),j(o)?(B(),re("img",{key:1,src:ge("translateSuccess"),class:"successIcon",style:De({top:`${24+M.value}px`,right:"2px"}),width:"10px",height:"10px"},null,12,xp)):ve("",!0),D.value?(B(),Fe(ii,{key:2,source:"hover_ball",title:j(r)("hoverBall.close"),ref_key:"secondConfirmRef",ref:Y,style:De(ee.value),onClose:be,onConfirm:Oe,options:we.value,class:"hover-ball-close-second-confirm"},null,8,["title","style","options"])):ve("",!0),j(h)?(B(),Fe(ep,{key:3,onClose:Ze})):ve("",!0),j(x)&&!j(h)?(B(),Fe(ai,{key:4,source:"plugin_floatingball_login_guide_page",ref_key:"loginTipRef",ref:H,class:"login-tip-container",style:De([{right:"40px"},Ae.value]),onClose:le},null,8,["style"])):ve("",!0)],38),[[qt,ne.value]]),G.value?(B(),re("div",{key:0,class:"hover-ball-tips",style:De([{transform:"translateY(-50%)"},de.value])},ce(K.value),5)):ve("",!0),j(S)?(B(),Fe(Er,{key:1,class:"message-tip",scene:"plugin_floatingball_page_free_trial_limit",position:"right","report-page-name":"plugin_floatingball_page",style:De({top:`${Q.value+19+M.value}px`,position:"fixed",width:"300px",right:"43px",transform:"translateY(-50%)"}),onClose:Se},null,8,["style"])):ve("",!0),j(E)?(B(),Fe(Fu,{key:2,source:"plugin_floatingball_page_samelanguage_notice",position:"right",switchCanClick:!0,class:"message-tip",style:De({position:"fixed",width:"320px",top:`${Q.value+110+M.value}px`,right:"46px",transform:"translateY(-50%)"}),onSwitchLanguage:w[7]||(w[7]=()=>{Ne(),qe(!1)}),onClose:w[8]||(w[8]=()=>{j(p)(),qe(!1)})},null,8,["style"])):ve("",!0)],64)}}}),Ap=at(yp,[["__scopeId","data-v-8964fea1"]]),en=Je.TRANSLATE_WINDOW_EDGE_GAP;function wl(t){const{locale:e}=Tt(),{initialX:n,initialY:r,containerRef:a,dragZoneRef:i,headerWrapperRef:s,onDragStart:o,onDragEnd:l,isOnResizeEdge:c,isResizing:u}=t,{width:f,height:h}=zo(),{width:b,height:S}=jo(a),x=C({x:n,y:r}),N=C(!1),_=C(null),E=C(0),g=Z(()=>dn(e.value)),p=Y=>{if(c&&c(Y)){Y.stopPropagation(),Y.preventDefault();return}Y.preventDefault(),N.value=!0,s!=null&&s.value&&(s.value.style.cursor="grabbing"),o==null||o();const H=Y.clientX-x.value.x,X=Y.clientY-x.value.y,A=y=>{var K;if(!N.value)return;let F=y.clientX-H,G=y.clientY-X;if(a.value){const de=a.value,{innerWidth:ne,innerHeight:we}=window,Q=de.getBoundingClientRect();if(g.value){const O=((K=i==null?void 0:i.value)==null?void 0:K.clientWidth)||0,M=en+O,ee=ne-Q.width-en+O;F=Math.max(M,Math.min(ee,F))}else{const O=en,M=ne-Q.width-en;F=Math.max(O,Math.min(M,F))}const Le=en,ie=we-Q.height-en;G=Math.max(Le,Math.min(ie,G))}x.value.x=F,x.value.y=G},D=()=>{var y;if(N.value=!1,s!=null&&s.value&&(s.value.style.cursor="grab"),a.value&&(a.value.style.cursor=""),a.value){const{innerHeight:F}=window,G=a.value.getBoundingClientRect(),K=x.value.y,de=F-G.height-en,ne=K>=de-1;_.value={x:x.value.x,top:K,topBeforeBottomed:ne&&((y=_.value)==null?void 0:y.topBeforeBottomed)||null,wasManuallyDragged:!0}}l==null||l(),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",D)},m=()=>{i!=null&&i.value&&i.value.addEventListener("mousedown",p),s!=null&&s.value&&s.value.addEventListener("mousedown",p)},d=Z(()=>{if(g.value&&a.value&&(i!=null&&i.value)){const Y=i.value.clientWidth;return x.value.x-Y}return x.value.x}),J=Z(()=>x.value.y),q=()=>{var de;if(!a.value)return;const Y=a.value,{innerWidth:H,innerHeight:X}=window,A=Y.getBoundingClientRect(),D=A.height,y=!_.value;y&&(_.value={x:x.value.x,top:x.value.y,topBeforeBottomed:null,wasManuallyDragged:!1},E.value=D);const F=!y&&E.value!==D,G=!y&&D>E.value,K=!y&&D<E.value;if(y||!F){const ne=en,we=X-D-en;x.value.y=Math.max(ne,Math.min(we,x.value.y))}else if(G&&_.value){const ne=x.value.y,we=X-D-en;if(ne+D>X-en){const Q=ne;x.value.y=we,_.value.topBeforeBottomed===null&&(_.value.topBeforeBottomed=Q)}}else if(K&&_.value){const ne=_.value;if(ne.topBeforeBottomed!==null&&!(u!=null&&u.value)){const we=ne.topBeforeBottomed,Q=en,Le=X-D-en;x.value.y=Math.max(Q,Math.min(Le,we)),Math.abs(x.value.y-we)<1&&(ne.topBeforeBottomed=null)}}if(_.value&&(_.value.top=x.value.y),g.value){const ne=((de=i==null?void 0:i.value)==null?void 0:de.clientWidth)||0,we=en+ne,Q=H-A.width-en+ne;x.value.x=Math.max(we,Math.min(Q,x.value.x))}else{const ne=en,we=H-A.width-en;x.value.x=Math.max(ne,Math.min(we,x.value.x))}E.value=D},W=()=>{var Y;if(a.value){const H=a.value.getBoundingClientRect();_.value={x:x.value.x,top:x.value.y,topBeforeBottomed:null,wasManuallyDragged:((Y=_.value)==null?void 0:Y.wasManuallyDragged)||!1},E.value=H.height}};return Te([f,h,b,S],()=>ht(()=>q())),{isDragging:N,dragState:x,windowX:d,windowY:J,setupDragListeners:m,initDragListeners:()=>{ht(()=>{m()})},calculatePosition:q,resetIntentPosition:W,handleDragStart:p}}const Cp={class:"extract-text-window-content-zone"},Sp={class:"header-title"},Dp=["title"],Lp=["src"],Ip={class:"extract-text-window-content"},Rp={class:"extract-text-window-footer"},Np={class:"tip-text"},kp=je({__name:"ExtractTextWindow",props:{content:{},top:{},left:{}},emits:["close"],setup(t,{emit:e}){const{t:n}=Tt(),r=t,a=e,i=C(),s=C(),o=C(),l=C(!1),c=C(!1);let u=null;const{windowX:f,windowY:h,isDragging:b,initDragListeners:S}=wl({initialX:r.left,initialY:r.top,containerRef:i,headerWrapperRef:s});un(i,()=>{a("close")});const x=()=>{c.value=!0},N=()=>{k.reportClickEvent("plugin_image_translate_extract_page","close"),a("close")},_=()=>{l.value||(k.reportClickEvent("plugin_image_translate_extract_page","copy"),us(r.content),l.value=!0,u&&clearTimeout(u),u=setTimeout(()=>{l.value=!1},1500))},E=g=>{if((g.ctrlKey||g.metaKey)&&g.key==="c"){const p=window.getSelection();(p==null?void 0:p.toString().trim())&&k.reportClickEvent("plugin_image_translate_extract_page","copy_shotcut")}};return Bt(()=>{S(),k.reportShowEvent("plugin_image_translate_extract_page"),document.addEventListener("keydown",E)}),_r(()=>{document.removeEventListener("keydown",E),u&&clearTimeout(u)}),(g,p)=>(B(),re("div",{class:"extract-text-window-container",style:De({top:`${j(h)}px`,left:`${j(f)}px`}),ref_key:"containerRef",ref:i},[T("div",Cp,[T("div",{class:"extract-text-window-header",style:De({cursor:j(b)?"grabbing":"grab"}),onMousedown:p[0]||(p[0]=rr(()=>{},["prevent"])),ref_key:"headerWrapperRef",ref:s},[T("div",Sp,ce(j(n)("common.extractText")),1),T("div",{onClick:N,title:j(n)("common.close"),class:"window-action-icon"},[T("img",{src:j(cn)("images/windowClose.png"),width:"16px",height:"16px"},null,8,Lp)],8,Dp)],36),T("div",Ip,[T("div",{ref_key:"contentTextRef",ref:o,class:"content-text"},ce(g.content),513)]),T("div",Rp,[fe(jt,{style:{"margin-right":"-8px"},onClick:_,onMouseenter:p[1]||(p[1]=m=>x()),onMouseleave:p[2]||(p[2]=m=>c.value=!1),icon:"copy2",size:30})])]),c.value?(B(),re("div",{key:0,class:lt(["extract-text-window-tip",{"with-icon":l.value}])},[l.value?(B(),Fe(vt,{key:0,icon:"check-white",size:16,class:"tip-icon"})):ve("",!0),T("span",Np,ce(l.value?j(n)("common.copied"):j(n)("common.copy")),1)],2)):ve("",!0)],4))}}),Bp=at(kp,[["__scopeId","data-v-5d491693"]]),Op={class:"translate-setting-container"},Pp={class:"setting-content"},Fp={class:"setting-section"},Mp={class:"setting-section-label"},Up={key:0,class:"setting-section"},$p={class:"setting-section-label"},qp={class:"setting-footer"},Wp=je({__name:"TranslateSetting",props:{languageColumn:{default:1},source:{default:"textbox"}},emits:["close","settingChange"],setup(t,{emit:e}){const n=t,{t:r}=Tt(),{userSettings:a,notifyUserSettings:i,getSettingByKey:s}=pt(),{userInfo:o,contentScriptRefreshUserInfo:l}=St(),{useSelfTranslation:c,imageLanguageOptions:u}=Yo(),f=e,h=C(""),b=C(),S=Z(()=>n.source==="mail"||n.source==="googledocs"),x=Z(()=>n.source==="textbox"?r("translate.translateToTitle"):n.source==="image"?r("translate.imageTranslateToTitle"):n.source==="mail"?r("translate.mailTranslateToTitle"):(n.source==="googledocs",r("translate.translateToTitle"))),N=Z(()=>n.source==="textbox"?"plugin_textbox_translate_page":n.source==="image"?"plugin_image_translate_page":n.source==="mail"?"plugin_mail_translate_page":n.source==="googledocs"?"plugin_googledocs_integration_select_to_translate":"plugin_textbox_translate_page"),_=Z(()=>n.source==="textbox"?r("common.switchService"):r("translate.serviceLabel")),E=Z(()=>N.value),g=Z(()=>n.source==="mail"?"plugin_mail_translate_setting":n.source==="image"?"plugin_image_translate_setting":n.source==="googledocs"?"plugin_googledocs_integration_select_to_translate":"plugin_input_translate_setting"),p=Z(()=>n.source==="image"?c.value:!0),m=()=>{f("close"),S.value?k.reportIntergratedClickEvent("settings_close"):k.reportClickEvent(N.value,"settings_close")},d=()=>{let W;const oe={textbox:ye.textBoxSettingPage,mail:ye.integrationsSettingPage,image:ye.imageSettingPage,googledocs:ye.integrationsSettingPage}[n.source];if(o.value)W=`${oe}?source=plugin`;else{const Y=encodeURIComponent(`${oe}?source=plugin&from=extensionLogin`);W=`${ye.loginUrl}?feature=${E.value}&cb=${Y}`}ct(W),S.value?k.reportIntergratedClickEvent("more_settings"):k.reportClickEvent(N.value,"more_settings")},J=(W,oe=Wu)=>{const Y=gn(W,oe);return Y?Y.value:ye.defaultLanguage},q=()=>{b.value=a.value.translationService,n.source==="textbox"||n.source==="googledocs"?h.value=J(a.value.textboxTranslation.targetLanguage):n.source==="mail"?h.value=J(a.value.targetLanguage):n.source==="image"&&(h.value=J(a.value.imageTranslation.targetLanguage,u.value))};return Bt(async()=>{q(),await l(),q(),Te(b,W=>{i({translationService:W}),f("settingChange")}),Te(h,W=>{if(n.source==="textbox"||n.source==="googledocs"){const oe=s("textboxTranslation");oe.targetLanguage=W,i({textboxTranslation:oe})}else if(n.source==="mail")i({targetLanguage:W});else if(n.source==="image"){const oe=s("imageTranslation");oe.targetLanguage=W,i({imageTranslation:oe})}f("settingChange")})}),(W,oe)=>(B(),re("div",Op,[fe(jt,{class:"close-button",icon:"close",size:24,onClick:m}),T("div",Pp,[T("div",Fp,[T("div",Mp,ce(x.value),1),fe(os,{source:E.value,nativeSelect:!1,"has-icon":!0,column:W.languageColumn,size:"small","is-narrower":!0,modelValue:h.value,"onUpdate:modelValue":oe[0]||(oe[0]=Y=>h.value=Y)},null,8,["source","column","modelValue"])]),p.value?(B(),re("div",Up,[T("div",$p,ce(_.value),1),fe(Xo,{"utm-source":g.value,large:!1,modelValue:b.value,"onUpdate:modelValue":oe[1]||(oe[1]=Y=>b.value=Y),onBuyDialogShow:oe[2]||(oe[2]=Y=>f("close")),"has-label":!1},null,8,["utm-source","modelValue"])])):ve("",!0)]),T("div",qp,[T("div",{class:"more-setting-link",onClick:d},ce(W.$t("common.moreSetting")),1)])]))}}),Es=at(Wp,[["__scopeId","data-v-de14b6a3"]]),Gp={class:"toast-tip-wrapper"},Hp={class:"tip-content"},Vp=je({__name:"ToastTip",props:{position:{default:"bottom"},arrowOffset:{default:"50%"},showCloseButton:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,a=Z(()=>{const s=n.arrowOffset;return n.position==="top"||n.position==="bottom"?{left:s,transform:"translateX(-50%)"}:{top:s,transform:"translateY(-50%)"}});function i(){r("close")}return(s,o)=>(B(),re("div",Gp,[T("div",{class:lt(["toast-tip",{"hide-close-button":!s.showCloseButton}])},[T("div",Hp,[ga(s.$slots,"default",{},void 0,!0)]),s.showCloseButton?(B(),Fe(vt,{key:0,class:"icon-close",icon:"close",size:16,onClick:i})):ve("",!0),T("div",{class:lt(["arrow",`arrow-${s.position}`]),style:De(a.value)},null,6)],2)]))}}),bl=at(Vp,[["__scopeId","data-v-a0cdc0c3"]]);var ya={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var uo;function zp(){return uo||(uo=1,ya.read=function(t,e,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,c=l>>1,u=-7,f=n?a-1:0,h=n?-1:1,b=t[e+f];for(f+=h,i=b&(1<<-u)-1,b>>=-u,u+=o;u>0;i=i*256+t[e+f],f+=h,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=s*256+t[e+f],f+=h,u-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(b?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-c}return(b?-1:1)*s*Math.pow(2,i-r)},ya.write=function(t,e,n,r,a,i){var s,o,l,c=i*8-a-1,u=(1<<c)-1,f=u>>1,h=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:i-1,S=r?1:-1,x=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=u?(o=0,s=u):s+f>=1?(o=(e*l-1)*Math.pow(2,a),s=s+f):(o=e*Math.pow(2,f-1)*Math.pow(2,a),s=0));a>=8;t[n+b]=o&255,b+=S,o/=256,a-=8);for(s=s<<a|o,c+=a;c>0;t[n+b]=s&255,b+=S,s/=256,c-=8);t[n+b-S]|=x*128}),ya}zp();const Qi={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};for(const[t,e]of Object.entries(Qi));function jp(t,e="utf-8"){switch(e.toLowerCase()){case"utf-8":case"utf8":return typeof globalThis.TextDecoder<"u"?new globalThis.TextDecoder("utf-8").decode(t):Yp(t);case"utf-16le":return Xp(t);case"ascii":return Kp(t);case"latin1":case"iso-8859-1":return Qp(t);case"windows-1252":return Zp(t);default:throw new RangeError(`Encoding '${e}' not supported`)}}function Yp(t){let e="",n=0;for(;n<t.length;){const r=t[n++];if(r<128)e+=String.fromCharCode(r);else if(r<224){const a=t[n++]&63;e+=String.fromCharCode((r&31)<<6|a)}else if(r<240){const a=t[n++]&63,i=t[n++]&63;e+=String.fromCharCode((r&15)<<12|a<<6|i)}else{const a=t[n++]&63,i=t[n++]&63,s=t[n++]&63;let o=(r&7)<<18|a<<12|i<<6|s;o-=65536,e+=String.fromCharCode(55296+(o>>10&1023),56320+(o&1023))}}return e}function Xp(t){let e="";for(let n=0;n<t.length;n+=2)e+=String.fromCharCode(t[n]|t[n+1]<<8);return e}function Kp(t){return String.fromCharCode(...t.map(e=>e&127))}function Qp(t){return String.fromCharCode(...t)}function Zp(t){let e="";for(const n of t)n>=128&&n<=159&&Qi[n]?e+=Qi[n]:e+=String.fromCharCode(n);return e}function mn(t){return new DataView(t.buffer,t.byteOffset)}const Jp={len:1,get(t,e){return mn(t).getUint8(e)},put(t,e,n){return mn(t).setUint8(e,n),e+1}},Gt={len:2,get(t,e){return mn(t).getUint16(e,!0)},put(t,e,n){return mn(t).setUint16(e,n,!0),e+2}},ta={len:2,get(t,e){return mn(t).getUint16(e)},put(t,e,n){return mn(t).setUint16(e,n),e+2}},Kt={len:4,get(t,e){return mn(t).getUint32(e,!0)},put(t,e,n){return mn(t).setUint32(e,n,!0),e+4}},ef={len:4,get(t,e){return mn(t).getUint32(e)},put(t,e,n){return mn(t).setUint32(e,n),e+4}},tf={len:4,get(t,e){return mn(t).getInt32(e)},put(t,e,n){return mn(t).setInt32(e,n),e+4}},nf={len:8,get(t,e){return mn(t).getBigUint64(e,!0)},put(t,e,n){return mn(t).setBigUint64(e,n,!0),e+8}};class Hn{constructor(e,n){this.len=e,this.encoding=n}get(e,n=0){const r=e.subarray(n,n+this.len);return jp(r,this.encoding)}}const rf="End-Of-Stream";class hn extends Error{constructor(){super(rf),this.name="EndOfStreamError"}}class af extends Error{constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}class xl{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek(e,n=!1){const r=await this.read(e,n);return this.peekQueue.push(e.subarray(0,r)),r}async read(e,n=!1){if(e.length===0)return 0;let r=this.readFromPeekBuffer(e);if(this.endOfStream||(r+=await this.readRemainderFromStream(e.subarray(r),n)),r===0&&!n)throw new hn;return r}readFromPeekBuffer(e){let n=e.length,r=0;for(;this.peekQueue.length>0&&n>0;){const a=this.peekQueue.pop();if(!a)throw new Error("peekData should be defined");const i=Math.min(a.length,n);e.set(a.subarray(0,i),r),r+=i,n-=i,i<a.length&&this.peekQueue.push(a.subarray(i))}return r}async readRemainderFromStream(e,n){let r=0;for(;r<e.length&&!this.endOfStream;){if(this.interrupted)throw new af;const a=await this.readFromStream(e.subarray(r),n);if(a===0)break;r+=a}if(!n&&r<e.length)throw new hn;return r}}class sf extends xl{constructor(e){super(),this.reader=e}async abort(){return this.close()}async close(){this.reader.releaseLock()}}class of extends sf{async readFromStream(e,n){if(e.length===0)return 0;const r=await this.reader.read(new Uint8Array(e.length),{min:n?void 0:e.length});return r.done&&(this.endOfStream=r.done),r.value?(e.set(r.value),r.value.length):0}}class co extends xl{constructor(e){super(),this.reader=e,this.buffer=null}writeChunk(e,n){const r=Math.min(n.length,e.length);return e.set(n.subarray(0,r)),r<n.length?this.buffer=n.subarray(r):this.buffer=null,r}async readFromStream(e,n){if(e.length===0)return 0;let r=0;for(this.buffer&&(r+=this.writeChunk(e,this.buffer));r<e.length&&!this.endOfStream;){const a=await this.reader.read();if(a.done){this.endOfStream=!0;break}a.value&&(r+=this.writeChunk(e.subarray(r),a.value))}if(!n&&r===0&&this.endOfStream)throw new hn;return r}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}function lf(t){try{const e=t.getReader({mode:"byob"});return e instanceof ReadableStreamDefaultReader?new co(e):new of(e)}catch(e){if(e instanceof TypeError)return new co(t.getReader());throw e}}class _s{constructor(e){this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=e==null?void 0:e.onClose,e!=null&&e.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.readBuffer(r,{position:n})<e.len)throw new hn;return e.get(r,0)}async peekToken(e,n=this.position){const r=new Uint8Array(e.len);if(await this.peekBuffer(r,{position:n})<e.len)throw new hn;return e.get(r,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new hn;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new hn;return e.get(this.numBuffer,0)}async ignore(e){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(e>n)return this.position+=n,n}return this.position+=e,e}async close(){var e;await this.abort(),await((e=this.onClose)==null?void 0:e.call(this))}normalizeOptions(e,n){if(!this.supportsRandomAccess()&&n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return{mayBeLess:!1,offset:0,length:e.length,position:this.position,...n}}abort(){return Promise.resolve()}}const uf=256e3;class cf extends _s{constructor(e,n){super(n),this.streamReader=e,this.fileInfo=(n==null?void 0:n.fileInfo)??{}}async readBuffer(e,n){const r=this.normalizeOptions(e,n),a=r.position-this.position;if(a>0)return await this.ignore(a),this.readBuffer(e,n);if(a<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(r.length===0)return 0;const i=await this.streamReader.read(e.subarray(0,r.length),r.mayBeLess);if(this.position+=i,(!n||!n.mayBeLess)&&i<r.length)throw new hn;return i}async peekBuffer(e,n){const r=this.normalizeOptions(e,n);let a=0;if(r.position){const i=r.position-this.position;if(i>0){const s=new Uint8Array(r.length+i);return a=await this.peekBuffer(s,{mayBeLess:r.mayBeLess}),e.set(s.subarray(i)),a-i}if(i<0)throw new Error("Cannot peek from a negative offset in a stream")}if(r.length>0){try{a=await this.streamReader.peek(e.subarray(0,r.length),r.mayBeLess)}catch(i){if(n!=null&&n.mayBeLess&&i instanceof hn)return 0;throw i}if(!r.mayBeLess&&a<r.length)throw new hn}return a}async ignore(e){const n=Math.min(uf,e),r=new Uint8Array(n);let a=0;for(;a<e;){const i=e-a,s=await this.readBuffer(r,{length:Math.min(n,i)});if(s<0)return s;a+=s}return a}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}class df extends _s{constructor(e,n){super(n),this.uint8Array=e,this.fileInfo={...(n==null?void 0:n.fileInfo)??{},size:e.length}}async readBuffer(e,n){n!=null&&n.position&&(this.position=n.position);const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),a=Math.min(this.uint8Array.length-r.position,r.length);if(!r.mayBeLess&&a<r.length)throw new hn;return e.set(this.uint8Array.subarray(r.position,r.position+a)),a}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}class pf extends _s{constructor(e,n){super(n),this.blob=e,this.fileInfo={...(n==null?void 0:n.fileInfo)??{},size:e.size,mimeType:e.type}}async readBuffer(e,n){n!=null&&n.position&&(this.position=n.position);const r=await this.peekBuffer(e,n);return this.position+=r,r}async peekBuffer(e,n){const r=this.normalizeOptions(e,n),a=Math.min(this.blob.size-r.position,r.length);if(!r.mayBeLess&&a<r.length)throw new hn;const i=await this.blob.slice(r.position,r.position+a).arrayBuffer();return e.set(new Uint8Array(i)),a}close(){return super.close()}supportsRandomAccess(){return!0}setPosition(e){this.position=e}}function ff(t,e){const n=lf(t),r=e??{},a=r.onClose;return r.onClose=async()=>{if(await n.close(),a)return a()},new cf(n,r)}function gf(t,e){return new df(t,e)}function hf(t,e){return new pf(t,e)}var Aa={exports:{}},Bi,po;function mf(){if(po)return Bi;po=1;var t=1e3,e=t*60,n=e*60,r=n*24,a=r*7,i=r*365.25;Bi=function(u,f){f=f||{};var h=typeof u;if(h==="string"&&u.length>0)return s(u);if(h==="number"&&isFinite(u))return f.long?l(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var h=parseFloat(f[1]),b=(f[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return h*i;case"weeks":case"week":case"w":return h*a;case"days":case"day":case"d":return h*r;case"hours":case"hour":case"hrs":case"hr":case"h":return h*n;case"minutes":case"minute":case"mins":case"min":case"m":return h*e;case"seconds":case"second":case"secs":case"sec":case"s":return h*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=r?c(u,f,r,"day"):f>=n?c(u,f,n,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,h,b){var S=f>=h*1.5;return Math.round(u/h)+" "+b+(S?"s":"")}return Bi}var Oi,fo;function vf(){if(fo)return Oi;fo=1;function t(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=l,r.humanize=mf(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let h=0;for(let b=0;b<f.length;b++)h=(h<<5)-h+f.charCodeAt(b),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=n;function r(f){let h,b=null,S,x;function N(..._){if(!N.enabled)return;const E=N,g=Number(new Date),p=g-(h||g);E.diff=p,E.prev=h,E.curr=g,h=g,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let m=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(J,q)=>{if(J==="%%")return"%";m++;const W=r.formatters[q];if(typeof W=="function"){const oe=_[m];J=W.call(E,oe),_.splice(m,1),m--}return J}),r.formatArgs.call(E,_),(E.log||r.log).apply(E,_)}return N.namespace=f,N.useColors=r.useColors(),N.color=r.selectColor(f),N.extend=a,N.destroy=r.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(S!==r.namespaces&&(S=r.namespaces,x=r.enabled(f)),x),set:_=>{b=_}}),typeof r.init=="function"&&r.init(N),N}function a(f,h){const b=r(this.namespace+(typeof h>"u"?":":h)+f);return b.log=this.log,b}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const h=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const b of h)b[0]==="-"?r.skips.push(b.slice(1)):r.names.push(b)}function s(f,h){let b=0,S=0,x=-1,N=0;for(;b<f.length;)if(S<h.length&&(h[S]===f[b]||h[S]==="*"))h[S]==="*"?(x=S,N=b,S++):(b++,S++);else if(x!==-1)S=x+1,N++,b=N;else return!1;for(;S<h.length&&h[S]==="*";)S++;return S===h.length}function o(){const f=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),f}function l(f){for(const h of r.skips)if(s(f,h))return!1;for(const h of r.names)if(s(f,h))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Oi=t,Oi}var go;function Ef(){return go||(go=1,function(t,e){var n={};e.formatArgs=a,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let f=0,h=0;c[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(f++,b==="%c"&&(h=f))}),c.splice(h,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function s(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=vf()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(Aa,Aa.exports)),Aa.exports}var _f=Ef();const Tf=cs(_f),Rr={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},ho={get(t){return{signature:Kt.get(t,0),compressedSize:Kt.get(t,8),uncompressedSize:Kt.get(t,12)}},len:16},wf={get(t){const e=Gt.get(t,6);return{signature:Kt.get(t,0),minVersion:Gt.get(t,4),dataDescriptor:!!(e&8),compressedMethod:Gt.get(t,8),compressedSize:Kt.get(t,18),uncompressedSize:Kt.get(t,22),filenameLength:Gt.get(t,26),extraFieldLength:Gt.get(t,28),filename:null}},len:30},bf={get(t){return{signature:Kt.get(t,0),nrOfThisDisk:Gt.get(t,4),nrOfThisDiskWithTheStart:Gt.get(t,6),nrOfEntriesOnThisDisk:Gt.get(t,8),nrOfEntriesOfSize:Gt.get(t,10),sizeOfCd:Kt.get(t,12),offsetOfStartOfCd:Kt.get(t,16),zipFileCommentLength:Gt.get(t,20)}},len:22},xf={get(t){const e=Gt.get(t,8);return{signature:Kt.get(t,0),minVersion:Gt.get(t,6),dataDescriptor:!!(e&8),compressedMethod:Gt.get(t,10),compressedSize:Kt.get(t,20),uncompressedSize:Kt.get(t,24),filenameLength:Gt.get(t,28),extraFieldLength:Gt.get(t,30),fileCommentLength:Gt.get(t,32),relativeOffsetOfLocalHeader:Kt.get(t,42),filename:null}},len:46};function yl(t){const e=new Uint8Array(Kt.len);return Kt.put(e,0,t),e}const Bn=Tf("tokenizer:inflate"),Pi=256*1024,yf=yl(Rr.DataDescriptor),Ca=yl(Rr.EndOfCentralDirectory);class Ts{constructor(e){this.tokenizer=e,this.syncBuffer=new Uint8Array(Pi)}async isZip(){return await this.peekSignature()===Rr.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(Kt)}async findEndOfCentralDirectoryLocator(){const e=this.tokenizer,n=Math.min(16*1024,e.fileInfo.size),r=this.syncBuffer.subarray(0,n);await this.tokenizer.readBuffer(r,{position:e.fileInfo.size-n});for(let a=r.length-4;a>=0;a--)if(r[a]===Ca[0]&&r[a+1]===Ca[1]&&r[a+2]===Ca[2]&&r[a+3]===Ca[3])return e.fileInfo.size-n+a;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){Bn("Cannot reading central-directory without random-read support");return}Bn("Reading central-directory...");const e=this.tokenizer.position,n=await this.findEndOfCentralDirectoryLocator();if(n>0){Bn("Central-directory 32-bit signature found");const r=await this.tokenizer.readToken(bf,n),a=[];this.tokenizer.setPosition(r.offsetOfStartOfCd);for(let i=0;i<r.nrOfEntriesOfSize;++i){const s=await this.tokenizer.readToken(xf);if(s.signature!==Rr.CentralFileHeader)throw new Error("Expected Central-File-Header signature");s.filename=await this.tokenizer.readToken(new Hn(s.filenameLength,"utf-8")),await this.tokenizer.ignore(s.extraFieldLength),await this.tokenizer.ignore(s.fileCommentLength),a.push(s),Bn(`Add central-directory file-entry: n=${i+1}/${a.length}: filename=${a[i].filename}`)}return this.tokenizer.setPosition(e),a}this.tokenizer.setPosition(e)}async unzip(e){const n=await this.readCentralDirectory();if(n)return this.iterateOverCentralDirectory(n,e);let r=!1;do{const a=await this.readLocalFileHeader();if(!a)break;const i=e(a);r=!!i.stop;let s;if(await this.tokenizer.ignore(a.extraFieldLength),a.dataDescriptor&&a.compressedSize===0){const o=[];let l=Pi;Bn("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let c=-1;for(;c<0&&l===Pi;){l=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),c=Af(this.syncBuffer.subarray(0,l),yf);const u=c>=0?c:l;if(i.handler){const f=new Uint8Array(u);await this.tokenizer.readBuffer(f),o.push(f)}else await this.tokenizer.ignore(u)}Bn(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),i.handler&&await this.inflate(a,Cf(o),i.handler)}else i.handler?(Bn(`Reading compressed-file-data: ${a.compressedSize} bytes`),s=new Uint8Array(a.compressedSize),await this.tokenizer.readBuffer(s),await this.inflate(a,s,i.handler)):(Bn(`Ignoring compressed-file-data: ${a.compressedSize} bytes`),await this.tokenizer.ignore(a.compressedSize));if(Bn(`Reading data-descriptor at pos=${this.tokenizer.position}`),a.dataDescriptor&&(await this.tokenizer.readToken(ho)).signature!==134695760)throw new Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-ho.len}`)}while(!r)}async iterateOverCentralDirectory(e,n){for(const r of e){const a=n(r);if(a.handler){this.tokenizer.setPosition(r.relativeOffsetOfLocalHeader);const i=await this.readLocalFileHeader();if(i){await this.tokenizer.ignore(i.extraFieldLength);const s=new Uint8Array(r.compressedSize);await this.tokenizer.readBuffer(s),await this.inflate(i,s,a.handler)}}if(a.stop)break}}async inflate(e,n,r){if(e.compressedMethod===0)return r(n);if(e.compressedMethod!==8)throw new Error(`Unsupported ZIP compression method: ${e.compressedMethod}`);Bn(`Decompress filename=${e.filename}, compressed-size=${n.length}`);const a=await Ts.decompressDeflateRaw(n);return r(a)}static async decompressDeflateRaw(e){const n=new ReadableStream({start(i){i.enqueue(e),i.close()}}),r=new DecompressionStream("deflate-raw"),a=n.pipeThrough(r);try{const s=await new Response(a).arrayBuffer();return new Uint8Array(s)}catch(i){const s=i instanceof Error?`Failed to deflate ZIP entry: ${i.message}`:"Unknown decompression error in ZIP entry";throw new TypeError(s)}}async readLocalFileHeader(){const e=await this.tokenizer.peekToken(Kt);if(e===Rr.LocalFileHeader){const n=await this.tokenizer.readToken(wf);return n.filename=await this.tokenizer.readToken(new Hn(n.filenameLength,"utf-8")),n}if(e===Rr.CentralFileHeader)return!1;throw e===3759263696?new Error("Encrypted ZIP"):new Error("Unexpected signature")}}function Af(t,e){const n=t.length,r=e.length;if(r>n)return-1;for(let a=0;a<=n-r;a++){let i=!0;for(let s=0;s<r;s++)if(t[a+s]!==e[s]){i=!1;break}if(i)return a}return-1}function Cf(t){const e=t.reduce((a,i)=>a+i.length,0),n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.length;return n}class Sf{constructor(e){this.tokenizer=e}inflate(){const e=this.tokenizer;return new ReadableStream({async pull(n){const r=new Uint8Array(1024),a=await e.readBuffer(r,{mayBeLess:!0});if(a===0){n.close();return}n.enqueue(r.subarray(0,a))}}).pipeThrough(new DecompressionStream("gzip"))}}new globalThis.TextDecoder("utf8");new globalThis.TextEncoder;Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mo(t){const{byteLength:e}=t;if(e===6)return t.getUint16(0)*2**32+t.getUint32(2);if(e===5)return t.getUint8(0)*2**32+t.getUint32(1);if(e===4)return t.getUint32(0);if(e===3)return t.getUint8(0)*2**16+t.getUint16(1);if(e===2)return t.getUint16(0);if(e===1)return t.getUint8(0)}function Df(t,e){if(e==="utf-16le"){const n=[];for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);n.push(a&255,a>>8&255)}return n}if(e==="utf-16be"){const n=[];for(let r=0;r<t.length;r++){const a=t.charCodeAt(r);n.push(a>>8&255,a&255)}return n}return[...t].map(n=>n.charCodeAt(0))}function Lf(t,e=0){const n=Number.parseInt(new Hn(6).get(t,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(n))return!1;let r=8*32;for(let a=e;a<e+148;a++)r+=t[a];for(let a=e+156;a<e+512;a++)r+=t[a];return n===r}const If={get:(t,e)=>t[e+3]&127|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4},Rf=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","rm","ppsm","ppsx","tar.gz","reg","dat"],Nf=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia","application/x-ms-regedit","application/x-ft-windows-registry-hive"],Fi=4100;async function kf(t,e){return new Bf(e).fromBlob(t)}function Mi(t){switch(t=t.toLowerCase(),t){case"application/epub+zip":return{ext:"epub",mime:t};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:t};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:t};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:t};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:t};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:t};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:t};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:t};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:t};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:t};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:t};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:t};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:t};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:t};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:t};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:t};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"}}}function On(t,e,n){n={offset:0,...n};for(const[r,a]of e.entries())if(n.mask){if(a!==(n.mask[r]&t[r+n.offset]))return!1}else if(a!==t[r+n.offset])return!1;return!0}class Bf{constructor(e){Ce(this,"detectConfident",async e=>{if(this.buffer=new Uint8Array(Fi),e.fileInfo.size===void 0&&(e.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=e,await e.peekBuffer(this.buffer,{length:32,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await e.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident(e);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8])){const r=new Sf(e).inflate();let a=!0;try{let i;try{i=await this.fromStream(r)}catch{a=!1}if(i&&i.ext==="tar")return{ext:"tar.gz",mime:"application/gzip"}}finally{a&&await r.cancel()}return{ext:"gz",mime:"application/gzip"}}if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await e.ignore(6);const n=await e.readToken(If);return e.position+n>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(n),this.fromTokenizer(e))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let n;return await new Ts(e).unzip(r=>{switch(r.filename){case"META-INF/mozilla.rsa":return n={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return n={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(a){const i=new TextDecoder("utf-8").decode(a).trim();n=Mi(i)},stop:!0};case"[Content_Types].xml":return{async handler(a){let i=new TextDecoder("utf-8").decode(a);const s=i.indexOf('.main+xml"');if(s===-1){const o="application/vnd.ms-package.3dmanufacturing-3dmodel+xml";i.includes(`ContentType="${o}"`)&&(n=Mi(o))}else{i=i.slice(0,Math.max(0,s));const o=i.lastIndexOf('"'),l=i.slice(Math.max(0,o+1));n=Mi(l)}},stop:!0};default:return/classes\d*\.dex/.test(r.filename)?(n={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0}):{}}}).catch(r=>{if(!(r instanceof hn))throw r}),n??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await e.ignore(28);const n=new Uint8Array(8);return await e.readBuffer(n),On(n,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/ogg; codecs=opus"}:On(n,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:On(n,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:On(n,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:On(n,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:On(n,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){const n=await this.readTiffHeader(!1);if(n)return n}if(this.check([77,77])){const n=await this.readTiffHeader(!0);if(n)return n}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function n(){const o=await e.peekNumber(Jp);let l=128,c=0;for(;!(o&l)&&l!==0;)++c,l>>=1;const u=new Uint8Array(c+1);return await e.readBuffer(u),u}async function r(){const o=await n(),l=await n();l[0]^=128>>l.length-1;const c=Math.min(6,l.length),u=new DataView(o.buffer),f=new DataView(l.buffer,l.length-c,c);return{id:mo(u),len:mo(f)}}async function a(o){for(;o>0;){const l=await r();if(l.id===17026)return(await e.readToken(new Hn(l.len))).replaceAll(/\00.*$/g,"");await e.ignore(l.len),--o}}const i=await r();switch(await a(i.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.checkString("regf"))return{ext:"dat",mime:"application/x-ft-windows-registry-hive"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){const n=new Hn(4,"latin1").get(this.buffer,2);if(n.match("^d*")&&n>=1e3&&n<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await e.ignore(8),await e.readToken(new Hn(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("WEBVTT")&&[`
`,"\r","	"," ","\0"].some(n=>this.checkString(n,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await e.ignore(8);async function n(){return{length:await e.readToken(tf),type:await e.readToken(new Hn(4,"latin1"))}}do{const r=await n();if(r.length<0)return;switch(r.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(r.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&this.buffer[8]&96){const n=new Hn(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(n){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return n.startsWith("3g")?n.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString(`REGEDIT4\r
`))return{ext:"reg",mime:"application/x-ms-regedit"};if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function n(){const r=new Uint8Array(16);return await e.readBuffer(r),{id:r,size:Number(await e.readToken(nf))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const r=await n();let a=r.size-24;if(On(r.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const i=new Uint8Array(16);if(a-=await e.readBuffer(i),On(i,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(On(i,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(a)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Hn(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.checkString("<?xml ",{offset:2,encoding:"utf-16be"})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(this.buffer,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){const n=new DataView(this.buffer.buffer).getUint32(12,!0);if(n>12&&this.buffer.length>=n+16)try{const r=new TextDecoder().decode(this.buffer.subarray(16,n+16));if(JSON.parse(r).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(this.buffer,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\0",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&Lf(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){const n="utf-16le";return this.checkString("<?xml ",{offset:2,encoding:n})?{ext:"xml",mime:"application/xml"}:this.check([255,14],{offset:2})&&this.checkString("SketchUp Model",{offset:4,encoding:n})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:this.checkString(`Windows Registry Editor Version 5.00\r
`,{offset:2,encoding:n})?{ext:"reg",mime:"application/x-ms-regedit"}:void 0}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}});Ce(this,"detectImprecise",async e=>{if(this.buffer=new Uint8Array(Fi),await e.peekBuffer(this.buffer,{length:Math.min(8,e.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await e.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,e.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let n=0;n<=this.options.mpegOffsetTolerance;++n){const r=this.scanMpeg(n);if(r)return r}});this.options={mpegOffsetTolerance:0,...e},this.detectors=[...(e==null?void 0:e.customDetectors)??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:e==null?void 0:e.signal}}async fromTokenizer(e){const n=e.position;for(const r of this.detectors){const a=await r.detect(e);if(a)return a;if(n!==e.position)return}}async fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof e}\``);const n=e instanceof Uint8Array?e:new Uint8Array(e);if((n==null?void 0:n.length)>1)return this.fromTokenizer(gf(n,this.tokenizerOptions))}async fromBlob(e){const n=hf(e,this.tokenizerOptions);try{return await this.fromTokenizer(n)}finally{await n.close()}}async fromStream(e){const n=ff(e,this.tokenizerOptions);try{return await this.fromTokenizer(n)}finally{await n.close()}}async toDetectionStream(e,n){const{sampleSize:r=Fi}=n;let a,i;const s=e.getReader({mode:"byob"});try{const{value:c,done:u}=await s.read(new Uint8Array(r));if(i=c,!u&&c)try{a=await this.fromBuffer(c.subarray(0,r))}catch(f){if(!(f instanceof hn))throw f;a=void 0}i=c}finally{s.releaseLock()}const o=new TransformStream({async start(c){c.enqueue(i)},transform(c,u){u.enqueue(c)}}),l=e.pipeThrough(o);return l.fileType=a,l}check(e,n){return On(this.buffer,e,n)}checkString(e,n){return this.check(Df(e,n==null?void 0:n.encoding),n)}async readTiffTag(e){const n=await this.tokenizer.readToken(e?ta:Gt);switch(this.tokenizer.ignore(10),n){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"}}}async readTiffIFD(e){const n=await this.tokenizer.readToken(e?ta:Gt);for(let r=0;r<n;++r){const a=await this.readTiffTag(e);if(a)return a}}async readTiffHeader(e){const n=(e?ta:Gt).get(this.buffer,2),r=(e?ef:Kt).get(this.buffer,4);if(n===42){if(r>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(r>=8){const i=(e?ta:Gt).get(this.buffer,8),s=(e?ta:Gt).get(this.buffer,10);if(i===28&&s===254||i===31&&s===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(r),await this.readTiffIFD(e)??{ext:"tif",mime:"image/tiff"}}if(n===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg(e){if(this.check([255,224],{offset:e,mask:[255,224]})){if(this.check([16],{offset:e+1,mask:[22]}))return this.check([8],{offset:e+1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:e+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:e+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:e+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}new Set(Rf);new Set(Nf);var Ui={exports:{}},vo;function Of(){return vo||(vo=1,function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(_,E){var g=_[0],p=_[1],m=_[2],d=_[3];g+=(p&m|~p&d)+E[0]-680876936|0,g=(g<<7|g>>>25)+p|0,d+=(g&p|~g&m)+E[1]-389564586|0,d=(d<<12|d>>>20)+g|0,m+=(d&g|~d&p)+E[2]+606105819|0,m=(m<<17|m>>>15)+d|0,p+=(m&d|~m&g)+E[3]-1044525330|0,p=(p<<22|p>>>10)+m|0,g+=(p&m|~p&d)+E[4]-176418897|0,g=(g<<7|g>>>25)+p|0,d+=(g&p|~g&m)+E[5]+1200080426|0,d=(d<<12|d>>>20)+g|0,m+=(d&g|~d&p)+E[6]-1473231341|0,m=(m<<17|m>>>15)+d|0,p+=(m&d|~m&g)+E[7]-45705983|0,p=(p<<22|p>>>10)+m|0,g+=(p&m|~p&d)+E[8]+1770035416|0,g=(g<<7|g>>>25)+p|0,d+=(g&p|~g&m)+E[9]-1958414417|0,d=(d<<12|d>>>20)+g|0,m+=(d&g|~d&p)+E[10]-42063|0,m=(m<<17|m>>>15)+d|0,p+=(m&d|~m&g)+E[11]-1990404162|0,p=(p<<22|p>>>10)+m|0,g+=(p&m|~p&d)+E[12]+1804603682|0,g=(g<<7|g>>>25)+p|0,d+=(g&p|~g&m)+E[13]-40341101|0,d=(d<<12|d>>>20)+g|0,m+=(d&g|~d&p)+E[14]-1502002290|0,m=(m<<17|m>>>15)+d|0,p+=(m&d|~m&g)+E[15]+1236535329|0,p=(p<<22|p>>>10)+m|0,g+=(p&d|m&~d)+E[1]-165796510|0,g=(g<<5|g>>>27)+p|0,d+=(g&m|p&~m)+E[6]-1069501632|0,d=(d<<9|d>>>23)+g|0,m+=(d&p|g&~p)+E[11]+643717713|0,m=(m<<14|m>>>18)+d|0,p+=(m&g|d&~g)+E[0]-373897302|0,p=(p<<20|p>>>12)+m|0,g+=(p&d|m&~d)+E[5]-701558691|0,g=(g<<5|g>>>27)+p|0,d+=(g&m|p&~m)+E[10]+38016083|0,d=(d<<9|d>>>23)+g|0,m+=(d&p|g&~p)+E[15]-660478335|0,m=(m<<14|m>>>18)+d|0,p+=(m&g|d&~g)+E[4]-405537848|0,p=(p<<20|p>>>12)+m|0,g+=(p&d|m&~d)+E[9]+568446438|0,g=(g<<5|g>>>27)+p|0,d+=(g&m|p&~m)+E[14]-1019803690|0,d=(d<<9|d>>>23)+g|0,m+=(d&p|g&~p)+E[3]-187363961|0,m=(m<<14|m>>>18)+d|0,p+=(m&g|d&~g)+E[8]+1163531501|0,p=(p<<20|p>>>12)+m|0,g+=(p&d|m&~d)+E[13]-1444681467|0,g=(g<<5|g>>>27)+p|0,d+=(g&m|p&~m)+E[2]-51403784|0,d=(d<<9|d>>>23)+g|0,m+=(d&p|g&~p)+E[7]+1735328473|0,m=(m<<14|m>>>18)+d|0,p+=(m&g|d&~g)+E[12]-1926607734|0,p=(p<<20|p>>>12)+m|0,g+=(p^m^d)+E[5]-378558|0,g=(g<<4|g>>>28)+p|0,d+=(g^p^m)+E[8]-2022574463|0,d=(d<<11|d>>>21)+g|0,m+=(d^g^p)+E[11]+1839030562|0,m=(m<<16|m>>>16)+d|0,p+=(m^d^g)+E[14]-35309556|0,p=(p<<23|p>>>9)+m|0,g+=(p^m^d)+E[1]-1530992060|0,g=(g<<4|g>>>28)+p|0,d+=(g^p^m)+E[4]+1272893353|0,d=(d<<11|d>>>21)+g|0,m+=(d^g^p)+E[7]-155497632|0,m=(m<<16|m>>>16)+d|0,p+=(m^d^g)+E[10]-1094730640|0,p=(p<<23|p>>>9)+m|0,g+=(p^m^d)+E[13]+681279174|0,g=(g<<4|g>>>28)+p|0,d+=(g^p^m)+E[0]-358537222|0,d=(d<<11|d>>>21)+g|0,m+=(d^g^p)+E[3]-722521979|0,m=(m<<16|m>>>16)+d|0,p+=(m^d^g)+E[6]+76029189|0,p=(p<<23|p>>>9)+m|0,g+=(p^m^d)+E[9]-640364487|0,g=(g<<4|g>>>28)+p|0,d+=(g^p^m)+E[12]-421815835|0,d=(d<<11|d>>>21)+g|0,m+=(d^g^p)+E[15]+530742520|0,m=(m<<16|m>>>16)+d|0,p+=(m^d^g)+E[2]-995338651|0,p=(p<<23|p>>>9)+m|0,g+=(m^(p|~d))+E[0]-198630844|0,g=(g<<6|g>>>26)+p|0,d+=(p^(g|~m))+E[7]+1126891415|0,d=(d<<10|d>>>22)+g|0,m+=(g^(d|~p))+E[14]-1416354905|0,m=(m<<15|m>>>17)+d|0,p+=(d^(m|~g))+E[5]-57434055|0,p=(p<<21|p>>>11)+m|0,g+=(m^(p|~d))+E[12]+1700485571|0,g=(g<<6|g>>>26)+p|0,d+=(p^(g|~m))+E[3]-1894986606|0,d=(d<<10|d>>>22)+g|0,m+=(g^(d|~p))+E[10]-1051523|0,m=(m<<15|m>>>17)+d|0,p+=(d^(m|~g))+E[1]-2054922799|0,p=(p<<21|p>>>11)+m|0,g+=(m^(p|~d))+E[8]+1873313359|0,g=(g<<6|g>>>26)+p|0,d+=(p^(g|~m))+E[15]-30611744|0,d=(d<<10|d>>>22)+g|0,m+=(g^(d|~p))+E[6]-1560198380|0,m=(m<<15|m>>>17)+d|0,p+=(d^(m|~g))+E[13]+1309151649|0,p=(p<<21|p>>>11)+m|0,g+=(m^(p|~d))+E[4]-145523070|0,g=(g<<6|g>>>26)+p|0,d+=(p^(g|~m))+E[11]-1120210379|0,d=(d<<10|d>>>22)+g|0,m+=(g^(d|~p))+E[2]+718787259|0,m=(m<<15|m>>>17)+d|0,p+=(d^(m|~g))+E[9]-343485551|0,p=(p<<21|p>>>11)+m|0,_[0]=g+_[0]|0,_[1]=p+_[1]|0,_[2]=m+_[2]|0,_[3]=d+_[3]|0}function i(_){var E=[],g;for(g=0;g<64;g+=4)E[g>>2]=_.charCodeAt(g)+(_.charCodeAt(g+1)<<8)+(_.charCodeAt(g+2)<<16)+(_.charCodeAt(g+3)<<24);return E}function s(_){var E=[],g;for(g=0;g<64;g+=4)E[g>>2]=_[g]+(_[g+1]<<8)+(_[g+2]<<16)+(_[g+3]<<24);return E}function o(_){var E=_.length,g=[1732584193,-271733879,-1732584194,271733878],p,m,d,J,q,W;for(p=64;p<=E;p+=64)a(g,i(_.substring(p-64,p)));for(_=_.substring(p-64),m=_.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0;p<m;p+=1)d[p>>2]|=_.charCodeAt(p)<<(p%4<<3);if(d[p>>2]|=128<<(p%4<<3),p>55)for(a(g,d),p=0;p<16;p+=1)d[p]=0;return J=E*8,J=J.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(J[2],16),W=parseInt(J[1],16)||0,d[14]=q,d[15]=W,a(g,d),g}function l(_){var E=_.length,g=[1732584193,-271733879,-1732584194,271733878],p,m,d,J,q,W;for(p=64;p<=E;p+=64)a(g,s(_.subarray(p-64,p)));for(_=p-64<E?_.subarray(p-64):new Uint8Array(0),m=_.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0;p<m;p+=1)d[p>>2]|=_[p]<<(p%4<<3);if(d[p>>2]|=128<<(p%4<<3),p>55)for(a(g,d),p=0;p<16;p+=1)d[p]=0;return J=E*8,J=J.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(J[2],16),W=parseInt(J[1],16)||0,d[14]=q,d[15]=W,a(g,d),g}function c(_){var E="",g;for(g=0;g<4;g+=1)E+=r[_>>g*8+4&15]+r[_>>g*8&15];return E}function u(_){var E;for(E=0;E<_.length;E+=1)_[E]=c(_[E]);return _.join("")}u(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function _(E,g){return E=E|0||0,E<0?Math.max(E+g,0):Math.min(E,g)}ArrayBuffer.prototype.slice=function(E,g){var p=this.byteLength,m=_(E,p),d=p,J,q,W,oe;return g!==n&&(d=_(g,p)),m>d?new ArrayBuffer(0):(J=d-m,q=new ArrayBuffer(J),W=new Uint8Array(q),oe=new Uint8Array(this,m,J),W.set(oe),q)}}();function f(_){return/[\u0080-\uFFFF]/.test(_)&&(_=unescape(encodeURIComponent(_))),_}function h(_,E){var g=_.length,p=new ArrayBuffer(g),m=new Uint8Array(p),d;for(d=0;d<g;d+=1)m[d]=_.charCodeAt(d);return E?m:p}function b(_){return String.fromCharCode.apply(null,new Uint8Array(_))}function S(_,E,g){var p=new Uint8Array(_.byteLength+E.byteLength);return p.set(new Uint8Array(_)),p.set(new Uint8Array(E),_.byteLength),p}function x(_){var E=[],g=_.length,p;for(p=0;p<g-1;p+=2)E.push(parseInt(_.substr(p,2),16));return String.fromCharCode.apply(String,E)}function N(){this.reset()}return N.prototype.append=function(_){return this.appendBinary(f(_)),this},N.prototype.appendBinary=function(_){this._buff+=_,this._length+=_.length;var E=this._buff.length,g;for(g=64;g<=E;g+=64)a(this._hash,i(this._buff.substring(g-64,g)));return this._buff=this._buff.substring(g-64),this},N.prototype.end=function(_){var E=this._buff,g=E.length,p,m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d;for(p=0;p<g;p+=1)m[p>>2]|=E.charCodeAt(p)<<(p%4<<3);return this._finish(m,g),d=u(this._hash),_&&(d=x(d)),this.reset(),d},N.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},N.prototype.setState=function(_){return this._buff=_.buff,this._length=_.length,this._hash=_.hash,this},N.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},N.prototype._finish=function(_,E){var g=E,p,m,d;if(_[g>>2]|=128<<(g%4<<3),g>55)for(a(this._hash,_),g=0;g<16;g+=1)_[g]=0;p=this._length*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),m=parseInt(p[2],16),d=parseInt(p[1],16)||0,_[14]=m,_[15]=d,a(this._hash,_)},N.hash=function(_,E){return N.hashBinary(f(_),E)},N.hashBinary=function(_,E){var g=o(_),p=u(g);return E?x(p):p},N.ArrayBuffer=function(){this.reset()},N.ArrayBuffer.prototype.append=function(_){var E=S(this._buff.buffer,_),g=E.length,p;for(this._length+=_.byteLength,p=64;p<=g;p+=64)a(this._hash,s(E.subarray(p-64,p)));return this._buff=p-64<g?new Uint8Array(E.buffer.slice(p-64)):new Uint8Array(0),this},N.ArrayBuffer.prototype.end=function(_){var E=this._buff,g=E.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m,d;for(m=0;m<g;m+=1)p[m>>2]|=E[m]<<(m%4<<3);return this._finish(p,g),d=u(this._hash),_&&(d=x(d)),this.reset(),d},N.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},N.ArrayBuffer.prototype.getState=function(){var _=N.prototype.getState.call(this);return _.buff=b(_.buff),_},N.ArrayBuffer.prototype.setState=function(_){return _.buff=h(_.buff,!0),N.prototype.setState.call(this,_)},N.ArrayBuffer.prototype.destroy=N.prototype.destroy,N.ArrayBuffer.prototype._finish=N.prototype._finish,N.ArrayBuffer.hash=function(_,E){var g=l(new Uint8Array(_)),p=u(g);return E?x(p):p},N})}(Ui)),Ui.exports}var Pf=Of();const Ff=cs(Pf),Mf=["image/jpeg","image/png","image/bmp"],Al=3.7*1024*1024;function Uf(t){return Mf.includes(t)}function $f(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e=(e<<5)-e+r,e=e&e}return Math.abs(e).toString(36)}function qf(t,e,n){let r="";if(e){const a=e.headers.get("Content-Disposition");if(a){const i=a.match(/filename\*?=['"]?(?:UTF-\d['"]*)?([^;\r\n"']*)['"]?;?/i);i&&i[1]&&(r=decodeURIComponent(i[1]))}}if(!r)try{const s=new URL(t).pathname.split("/"),o=s[s.length-1];o&&/\.[a-zA-Z0-9]{2,4}$/.test(o)&&(r=decodeURIComponent(o))}catch{const i=t.match(/[^/]+\.[a-zA-Z]{2,4}(?=[?#]|$)/);i&&(r=i[0])}if(!r){const a=(n==null?void 0:n.type)||"image/png",s={"image/jpeg":"jpg","image/jpg":"jpg","image/png":"png","image/bmp":"bmp","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg","image/avif":"avif","image/heic":"heic","image/heif":"heif","image/tiff":"tiff"}[a]||"jpg";r=`image_${$f(t)}.${s}`}return r}function Wf(t){const e=new Ff.ArrayBuffer,n=2097152,r=Math.ceil(t.byteLength/n);for(let i=0;i<r;i++){const s=i*n,o=Math.min(s+n,t.byteLength),l=t.slice(s,o);e.append(l)}const a=e.end();return e.destroy(),a}async function Gf(t,e=.92){return new Promise((n,r)=>{const a=new Image,i=URL.createObjectURL(t);a.onload=function(){try{const s=document.createElement("canvas"),o=s.getContext("2d");if(!o){r(new Error("Failed to get canvas context"));return}s.width=a.width,s.height=a.height,o.fillStyle="#FFFFFF",o.fillRect(0,0,s.width,s.height),o.drawImage(a,0,0),s.toBlob(l=>{URL.revokeObjectURL(i),l?n(l):r(new Error("Failed to convert to JPG"))},"image/jpeg",e)}catch(s){URL.revokeObjectURL(i),r(s)}},a.onerror=function(){URL.revokeObjectURL(i),r(new Error(`Failed to load image (${t.type})`))},a.src=i})}async function Hf(t,e=Al){return new Promise((n,r)=>{if(t.size<=e){n(t);return}const a=new Image,i=URL.createObjectURL(t);a.onload=function(){try{const s=document.createElement("canvas"),o=s.getContext("2d");if(!o){r(new Error("Failed to get canvas context"));return}let l=a.width,c=a.height,u=t.size>e?Math.sqrt(e/t.size):1,f=!1;const h=(b=.92)=>{s.width=l,s.height=c,o.fillStyle="#FFFFFF",o.fillRect(0,0,l,c),o.drawImage(a,0,0,l,c),s.toBlob(S=>{if(!S){URL.revokeObjectURL(i),r(new Error("Failed to compress image"));return}if(S.size<=e){URL.revokeObjectURL(i),n(S);return}if(l<20||c<20||f){if(b>.2){h(b-.1);return}URL.revokeObjectURL(i),r(new Error("Image size exceeds limit after maximum compression"));return}const N=S.size>e?Math.sqrt(e/S.size):1;if(N>=u?(u-=.1,f=!0):u=N,u<0){URL.revokeObjectURL(i),r(new Error("Image size exceeds limit after maximum compression"));return}l=Math.ceil(a.width*u),c=Math.ceil(a.height*u),h(b)},"image/jpeg",b)};h()}catch(s){URL.revokeObjectURL(i),r(s)}},a.onerror=function(){URL.revokeObjectURL(i),r(new Error("Failed to load image"))},a.src=i})}async function Vf(t,e=!1){const r=new Promise((i,s)=>{setTimeout(()=>{s(new Error("timeout"))},3e4)}),a=(async()=>{let i,s;try{if(s=await fetch(t),!s.ok)return{code:500,msg:`HTTP ${s.status}: ${s.statusText}`};i=await s.blob()}catch{try{const l=await ot(Ie.GET_WEB_IMAGE_CONTENT,{imageUrl:t});if(!l.success||!l.base64Data||!l.mimeType)return nt.error(" background :",l.error),{code:500,msg:l.error??"background_get_image_error"};i=await(await fetch(l.base64Data)).blob(),s=void 0}catch(l){return{code:500,msg:(l==null?void 0:l.message)??"network_error"}}}try{if(e){const f=["jpg","png","bmp","gif","webp","svg","avif","heic","heif","tiff"],h=await kf(i);if(h!=null&&h.ext&&!f.includes(h.ext))return{code:100,msg:"not supported image type"}}if(i.type==="image/gif")return{code:100,msg:"not supported image type"};let o=qf(t,s,i);if(!Uf(i.type)){nt.info(` ${i.type} JPG...`);try{i=await Gf(i),o=o.replace(/\.[^.]+$/,".jpg"),nt.info("")}catch(f){nt.error(":",f)}}if(i.size>Al){nt.info(` ${(i.size/1024/1024).toFixed(2)}MB ...`);try{const f=i.size;i=await Hf(i),nt.info(`: ${(f/1024/1024).toFixed(2)}MB  ${(i.size/1024/1024).toFixed(2)}MB`)}catch(f){return nt.error(":",f),{code:500,msg:(f==null?void 0:f.message)??"network_error"}}}const l=await i.arrayBuffer(),c=Wf(l);return{code:0,msg:"success",info:{blobUrl:URL.createObjectURL(i),md5:c,filename:o}}}catch(o){return{code:500,msg:(o==null?void 0:o.message)??"network_error"}}})();try{return await Promise.race([a,r])}catch(i){return(i==null?void 0:i.message)==="timeout"?{code:400,msg:"timeout"}:{code:500,msg:(i==null?void 0:i.message)??"network_error"}}}function zf(t){location.host==="x.com"&&(t.style.opacity="1")}function jf(t){location.host==="x.com"&&(t.style.opacity="0")}function Eo(t,e){const n={src:t.src,srcset:t.getAttribute("srcset"),sizes:t.getAttribute("sizes"),loading:t.getAttribute("loading"),crossOrigin:t.getAttribute("crossorigin"),dataSrc:t.getAttribute("data-src"),dataLazy:t.getAttribute("data-lazy"),dataSrcset:t.getAttribute("data-srcset"),pictureSourceElements:[]},r=t.closest("picture");return r&&r.querySelectorAll("source").forEach(i=>{n.pictureSourceElements.push({srcset:i.getAttribute("srcset")||"",media:i.getAttribute("media"),type:i.getAttribute("type"),sizes:i.getAttribute("sizes")}),i.remove()}),t.removeAttribute("srcset"),t.removeAttribute("sizes"),t.removeAttribute("data-src"),t.removeAttribute("data-lazy"),t.removeAttribute("data-srcset"),t.removeAttribute("loading"),t.removeAttribute("crossorigin"),t.offsetWidth,t.src=e,zf(t),n}function $i(t,e){const n=t.closest("picture");n&&e.pictureSourceElements.length>0&&e.pictureSourceElements.forEach(r=>{const a=document.createElement("source");r.srcset&&a.setAttribute("srcset",r.srcset),r.media&&a.setAttribute("media",r.media),r.type&&a.setAttribute("type",r.type),r.sizes&&a.setAttribute("sizes",r.sizes),n.insertBefore(a,t)}),e.srcset&&t.setAttribute("srcset",e.srcset),e.sizes&&t.setAttribute("sizes",e.sizes),e.dataSrc&&t.setAttribute("data-src",e.dataSrc),e.dataLazy&&t.setAttribute("data-lazy",e.dataLazy),e.dataSrcset&&t.setAttribute("data-srcset",e.dataSrcset),e.loading&&t.setAttribute("loading",e.loading),e.crossOrigin&&t.setAttribute("crossorigin",e.crossOrigin),t.src=e.src,jf(t)}function Yf(t){try{const r=new URL(t.src,window.location.href).pathname.match(/\.([A-Za-z0-9]+)(?:$|\/)/);if(r)return r[1].toLowerCase()}catch{}if(t.src.startsWith("data:")){const e=t.src.match(/^data:(image\/([a-zA-Z0-9]+));/);if(e)return e[2].toLowerCase()}return""}function Xf(t){const e=window.getComputedStyle(t),n=e.position,r=e.zIndex;let a=null;n!=="static"&&r!=="auto"&&(a=parseInt(r,10));let i=null,s=t.parentElement;for(;s&&s!==document.body;){const l=window.getComputedStyle(s),c=l.position,u=l.zIndex;if(c!=="static"&&u!=="auto"){i=parseInt(u,10);break}s=s.parentElement}return{own:a,inherited:i,effective:a!==null?a:i!==null?i:0}}function Sa(t,e=10,n=1.1){const r=t.getBoundingClientRect(),a=r.width,i=r.height;let s=t.parentElement,o=0,l=null;for(;s&&o<e&&!(s===document.body||s===document.documentElement);){const c=s.getBoundingClientRect(),u=c.width,f=c.height;if(u<=a*n&&f<=i*n||u<a||f<i)l=s;else break;s=s.parentElement,o++}return l||t}const Kf=["onMouseenter","onMouseleave"],Qf=["dir"],Zf=["onMouseenter","onMouseleave","onClick"],Jf=["src"],eg=["src"],tg=["onMouseenter","onMouseleave","onClick"],ng=["onMouseenter","onMouseleave","onClick","title"],rg=["onClick","onMouseenter","onMouseleave"],Ar=100,ag=200,_o=45,Da=5,ig=550,sg=je({__name:"ImageTranslateBall",emits:["close"],setup(t,{emit:e}){const{userSettings:n}=pt(),{userInfo:r,contentScriptRefreshUserInfo:a}=St(),{onlineParams:i}=an(),{setImageTargetInitLanguage:s,imageLanguageOptions:o,useSelfTranslation:l,imageTranslationEngineName:c}=Yo(),{t:u}=Tt(),f=e;let h=!1,b=!1;const S=R=>R.status==="translating"||R.extractingStatus==="extracting",x=R=>R.status==="fail"||R.extractingStatus==="fail",N=R=>R.status==="idle"&&R.extractingStatus==="idle",_=new Map,E=new Map;let g,p=null,m=null;const d=new WeakMap,J=tt("ballContentContainerRef"),q=tt("secondConfirmRef"),W=tt("imageTranslateSettingRef"),oe=tt("popupContainerRef"),Y=tt("tipRef"),H=C(null),X=C({}),A=C(new Map),D=[{value:"1",label:u("hoverBall.closeOneTime")},{value:"2",label:u("hoverBall.disableOnePage")},{value:"3",label:u("hoverBall.disable")}],y=C(""),F=C({}),G=C(!1),K=C({top:0,left:0}),de=C("");function ne(R){return R.extractingStatus==="fail"||R.extractGuidShow?nn()?{left:"28px"}:{right:"28px"}:nn()?{left:"0px"}:{right:"0px"}}function we(){return nn()?"16px":"calc(100% - 16px)"}const Q=Z(()=>{var te;const{imageBlackSites:R=[]}=i.value||{};return!_n(location.href,R)&&n.value.imageTranslation.enable&&!_n(location.href,n.value.imageTranslation.blockedSites)&&(!((te=r.value)!=null&&te.region)||Zs.includes(r.value.region))}),Le=Z(()=>Array.from(A.value.entries()).filter(([,R])=>Q.value&&R.show&&!R.smallSize||S(R)||x(R)).map(([R,L])=>({...L,imgEl:R}))),ie=Z(()=>H.value?A.value.get(H.value):null);function O(R){if(!H.value||!A.value.get(H.value))return null;const te=Le.value.findIndex(he=>he.imgEl===H.value);return te!==-1&&R.value&&R.value.length>te?R.value[te]:null}const M=Z(()=>O(J)),ee=Z(()=>O(q)),Ae=Z(()=>O(W)),Re=Z(()=>O(oe)),Ue=Z(()=>O(Y)),pe=Z(()=>{const R=n.value.imageTranslation.targetLanguage,L=gn(R,o.value);return L?u(`language.${L.value}`)||L.label:u("language.en")});un(Re,R=>{H.value&&(R.target===H.value&&ie.value?(ie.value.expanded=!1,Dt(ie.value)):Qn(H.value))},{ignore:[M]});function ge(){ht(()=>{var Yt,ut;const R={};let L=0,te=0;if(!M.value)return;(Yt=ie.value)!=null&&Yt.secondConfirmShow&&ee.value&&(L=ee.value.$el.getBoundingClientRect().height,te=ee.value.$el.getBoundingClientRect().width),(ut=ie.value)!=null&&ut.imageTranslateSettingShow&&Ae.value&&(L=Ae.value.$el.getBoundingClientRect().height,te=Ae.value.$el.getBoundingClientRect().width);const{bottom:he,right:$e,left:Ve}=M.value.getBoundingClientRect(),Ke=6,Ct=40,Ot=10,xt=window.innerWidth;X.value={},he+Ke+L>window.innerHeight?R.bottom=`${Ct}px`:R.top=`calc(100% + ${Ke}px)`,nn()?R.right=$e<te?`${$e-te-Ot}px`:"0px":R.left=$e+te>xt?`${xt-Ve-te-Ot}px`:"0px",X.value=R})}function Me(R){const L=R.imgEl instanceof Element?Xf(R.imgEl).effective:999,te=S(R)?L+1:2147483647;return nn()?{left:`${R.x}px`,top:`${R.y}px`,zIndex:te}:{right:`${R.x}px`,top:`${R.y}px`,zIndex:te}}const qe=(R,L,te)=>{if(!M.value)return;const he=A.value.get(L);if(!he||he.toastMessage||he.exceedLimitTipShow||S(he))return;const $e=M.value.getBoundingClientRect(),Ve=R.target.getBoundingClientRect(),Ke=$e.right-Ve.right,Ct=Ve.left-$e.left,Ot=Ve.top;F.value={},y.value=te,he.guidShow||he.extractGuidShow?setTimeout(()=>{he.guidShow=!1,he.extractGuidShow=!1,he.showTips=!0},500):he.showTips=!0,ht(()=>{if(!Ue.value)return;const xt=Ue.value.clientWidth,Yt=Ue.value.clientHeight,ut=10,tn=window.innerWidth;if(nn()){const It=Ve.left-(xt-Ve.width)/2;if(It+xt>tn-ut){const Vt=It+xt-(tn-ut);F.value={left:`${Ct-(xt-Ve.width)/2-Vt}px`}}else if(It<ut){const Vt=ut-It;F.value={left:`${Ct-(xt-Ve.width)/2+Vt}px`}}else F.value={left:`${Ct-(xt-Ve.width)/2}px`}}else{const It=Ve.right+(xt-Ve.width)/2;if(It-xt<ut){const Vt=ut-(It-xt);F.value={right:`${Ke-(xt-Ve.width)/2-Vt}px`}}else if(It>tn-ut){const Vt=It-(tn-ut);F.value={right:`${Ke-(xt-Ve.width)/2+Vt}px`}}else F.value={right:`${Ke-(xt-Ve.width)/2}px`}}Yt>Ot-ut?F.value.top=`${$e.height+ut}px`:F.value.top=`-${$e.height+ut}px`})},Ye=R=>{const L=A.value.get(R);L&&(L.showTips=!1)},wt=()=>{A.value.forEach(R=>{R.exceedLimitTipShow=!1,R.status="idle",R.extractingStatus="idle"})},dt=R=>{const L=A.value.get(R);L&&(L.status==="fail"&&k.reportClickEvent("plugin_image_translate_error_page","close"),L.extractingStatus==="fail"&&k.reportClickEvent("plugin_image_extract_error_page","close"),L.toastMessage="",L.status="idle",L.extractingStatus="idle",L.expanded=!1)};function We(R,L){const te=`${n.value.imageTranslation.targetLanguage}-${c.value}`,he=_.get(R);he?he.set(te,L):_.set(R,new Map([[te,L]]))}function ke(R){const L=`${n.value.imageTranslation.targetLanguage}-${c.value}`,te=_.get(R);return te?te.get(L):null}function gt(R,L){L==="ocr"?R.extractingStatus="fail":R.status="fail"}function et(R,L,te){te||(te=u(L==="translate"?"imageBall.translateFail":"imageBall.ocrFail")),R.toastMessage=te,gt(R,L),L==="ocr"?k.reportShowEvent("plugin_image_extract_error_page"):k.reportShowEvent("plugin_image_translate_error_page")}function Be(R,L){R.exceedLimitTipShow=!0,gt(R,L),L==="ocr"?k.reportShowEvent("plugin_text_extraction_text_link",{},Lt.PREMIUM_PROMOTION_POPUP):k.reportShowEvent("plugin_image_translate_text_link")}const Ne=R=>{const L=A.value.get(R);L&&((L.status==="idle"||L.status==="fail")&&k.reportClickEvent("plugin_image_translate_page","translate"),L.status==="success"?Qe(R):Xe(R))},Qe=R=>{var te;const L=A.value.get(R);L&&((te=L.imageSrcObserver)==null||te.disconnect(),L.imageSrcObserver=null,L.status==="success"&&(L.originalState&&$i(R,L.originalState),L.status="idle"))},ae=R=>{const L=A.value.get(R);L&&(L.imageSrcObserver||(L.imageSrcObserver=new MutationObserver(te=>{te.forEach(he=>{var $e;if(he.type==="attributes"&&he.attributeName==="src"){const Ve=he.target,Ke=A.value.get(Ve);if(!Ke)return;($e=Ke.imageSrcObserver)==null||$e.disconnect(),Ke.imageSrcObserver=null,Ke.status==="fail"?(Ke.toastMessage="",Ke.exceedLimitTipShow=!1,Ke.status="idle"):Ke.status==="success"&&Ke.originalState&&(Ke.originalState.src=Ve.src,Qe(Ve))}})}),L.imageSrcObserver.observe(R,{attributes:!0})))},be=async(R,L="translate")=>{if(S(R))return!1;if(await a(),Kn(R),Dt(R),R.toastMessage="",!r.value){const te=L==="ocr"?"plugin_image_extract":"plugin_image_translate",he=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin&position=plugin_floatingball_translate_image`);return ct(`${ye.loginUrl}?feature=${te}&position=plugin_floatingball_translate_image&cb=${he}`),L==="ocr"?k.reportShowEvent("plugin_image_extract_to_login_page"):k.reportShowEvent("plugin_image_translate_to_login_page"),!1}return R.expanded=!1,L==="ocr"?(R.extractingStatus="extracting",R.status==="fail"&&(R.status="idle")):(R.status="translating",R.extractingStatus==="fail"&&(R.extractingStatus="idle")),!0},Oe=async(R,L,te,he="translate")=>{var Ot;const $e=Date.now(),Ve=he==="translate"?"plugin_translate_image":"plugin_extract_image";k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:Ve,stage:"web_image_download",status:"processing",type:he});const Ke=await Vf(R,(Ot=i.value)==null?void 0:Ot.checkImageType),Ct=Ke.info;return Ke.code!==0||!Ct?(k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:Ve,stage:"web_image_download",status:`failed_${Ke.msg}`,duration:Date.now()-$e,type:he}),Ke.code===100?et(L,he,u(he==="ocr"?"imageBall.ocrNotSupportedGif":"imageBall.notSupportedGif")):Ke.code===ze.REQUEST_TIMEOUT?et(L,he,u(he==="ocr"?"imageBall.ocrImageGetFailed":"imageBall.imageGetTimeout")):Ke.code===400?et(L,he,u(he==="ocr"?"imageBall.ocrImageGetTimeout":"imageBall.imageGetTimeout")):et(L,he),null):(k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:Ve,stage:"web_image_download",status:"success",duration:Date.now()-$e,type:he}),Ct)},Ze=async(R,L="translate")=>{var he;const te=await ot(Ie.GET_IMAGE_TRANSLATE_COUNT,{userInfo:r.value,type:L});if(te==null)return et(R,L),!1;if(te===0){if((he=r.value)!=null&&he.isVip){const $e=u(L==="translate"?"imageBall.vipLimitTip":"imageBall.extractVipLimitTip");et(R,L,$e)}else Be(R,L);return!1}return!0},le=async(R,L,te,he,$e="translate")=>{var xt,Yt;const Ve=Gu(n.value.imageTranslation.targetLanguage,o.value,l.value),Ke=Ur(),Ct=await ot(Ie.UPLOAD_IMAGE_REQUEST,{imageUrl:L,filename:te,md5:he,requestId:Ke,userProperties:k.userProperties,reportParams:k.commonParams,to:Ve,type:$e,region:((xt=r.value)==null?void 0:xt.region)||""}),Ot=(Yt=Ct.data)==null?void 0:Yt.fileUuid;return Ct.code!==ze.SUCCESS||!Ot?(Ct.code===ze.REQUEST_TIMEOUT?et(R,$e,u("imageBall.imageGetTimeout")):et(R,$e),null):{fileUuid:Ot,requestId:Ke,toLanguageCode:Ve}},Se=async(R,L,te,he,$e,Ve,Ke="translate")=>{var Yt,ut;const Ct=Ke==="translate"?Ie.TRANSLATE_IMAGE_REQUEST:Ie.IMAGE_OCR_REQUEST,Ot=await ot(Ct,{translateEngine:l.value?"self_engine":"youdao",fileUuid:L,filename:te,md5:he,to:$e,engineName:c.value,requestId:Ve,isVip:((Yt=r.value)==null?void 0:Yt.isVip)||!1,region:((ut=r.value)==null?void 0:ut.region)||"",userProperties:k.userProperties,reportParams:k.commonParams}),xt=Ot.data;return Ot.code!==ze.SUCCESS||!xt?(Ot.code===ze.REQUEST_TIMEOUT?et(R,Ke,u("imageBall.imageGetTimeout")):Ke==="ocr"&&Ot.code===ze.DCAPI_LIMIT_ERROR?Be(R,Ke):et(R,Ke),null):xt},Ge=async R=>{var Jn;mt(Ee.IMAGE_TRANSLATE_BALL_EXTRACT_GUID_SHOW,!0);const L=A.value.get(R);if(!L||(A.value.forEach(An=>{An.extractingStatus==="extracting"&&(An.extractingStatus="idle",v(An.imgEl))}),K.value.top=R.getBoundingClientRect().bottom+5,K.value.left=nn()?L.x:document.documentElement.clientWidth-L.x-ig,k.reportClickEvent("plugin_image_translate_page","extract_text"),!await be(L,"ocr")))return;k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_extract_image",stage:"web_image_download",status:"processing"});const he=await Oe(R.src,L,R,"ocr");if(!he)return;const{blobUrl:$e,md5:Ve,filename:Ke}=he,Ct=An=>{L.extractingStatus==="extracting"&&(L.extractingStatus="idle",de.value=An,G.value=!0)},Ot=E.get(Ve);if(Ot){Ct(Ot);return}if(!await Ze(L,"ocr"))return;const Yt=await le(L,$e,Ke,Ve,"ocr");if(!Yt)return;const{fileUuid:ut,requestId:tn,toLanguageCode:It}=Yt,Vt=await Se(L,ut,Ke,Ve,It,tn,"ocr");if(!Vt)return;const cr=Vt.ocrText;E.set(Ve,cr),Ct(cr),ot(Ie.CONSUME_PERMITS,{component:ds[V.IMAGE_OCR],count:1,requestId:tn,isVip:((Jn=r.value)==null?void 0:Jn.isVip)||!1})},Xe=async R=>{var Jn;const L=A.value.get(R);if(!L||!await be(L))return;if((Jn=r.value)!=null&&Jn.region&&!Zs.includes(r.value.region)){et(L,"translate",u("imageBall.regionNotSupport")),k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"failed_region_not_support"}),ae(R);return}k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{feature:"plugin_translate_image",stage:"check_region",status:"success"});const he=await Oe(R.src,L);if(!he){ae(R);return}const{blobUrl:$e,md5:Ve,filename:Ke}=he,Ct=ke(Ve);if(Ct){L.originalState=Eo(R,Ct),L.status="success",ae(R);return}if(!await Ze(L,"translate")){ae(R);return}const xt=await le(L,$e,Ke,Ve);if(!xt){ae(R);return}const{fileUuid:Yt,requestId:ut,toLanguageCode:tn}=xt,It=await Se(L,Yt,Ke,Ve,tn,ut);if(!It){ae(R);return}const Vt=new Promise(An=>{const Nn=()=>{R.removeEventListener("error",Nn),R.removeEventListener("load",Yr),L.originalState&&$i(R,L.originalState),et(L,"translate"),An()},Yr=()=>{R.removeEventListener("load",Yr),R.removeEventListener("error",Nn),We(Ve,cr),L.status="success",An()};R.addEventListener("load",Yr),R.addEventListener("error",Nn)}),cr=decodeURIComponent(It.resultFileUrl);L.originalState=Eo(R,cr),await Vt,ae(R),p!==R&&v(R),R.isConnected||(I(R),_.delete(Ve),E.delete(Ve))};function v(R){const L=A.value.get(R);L&&(L.toastMessage||L.exceedLimitTipShow||L.status==="success"||x(L)?L.show=!1:N(L)&&I(R))}function w(R){var L,te;(L=R.imageSizeObserver)==null||L.disconnect(),R.imageSizeObserver=null,(te=R.imageSrcObserver)==null||te.disconnect(),R.imageSrcObserver=null}function I(R){const L=A.value.get(R);L&&(w(L),A.value.delete(R))}function U(R){const L=R[R.length-1];if(!L)return;const te=L.target,he=A.value.get(te);if(!he)return;he.show=!1;let $e=0,Ve=0,Ke=0;const Ct=2,Ot=50,xt=()=>{if(!te.isConnected||!A.value.has(te))return;const ut=Sa(te).getBoundingClientRect(),tn=ut.width,It=ut.height;if(Math.abs(tn-$e)<1&&Math.abs(It-Ve)<1?Ke++:(Ke=0,$e=tn,Ve=It),Ke>=Ct){const Vt=tn<Ar||It<Ar;he.smallSize=Vt,he.show=!0,z(he,ut);return}setTimeout(xt,Ot)};setTimeout(xt,Ot)}function P(R,L){const te=R.getBoundingClientRect(),he=te.width<Ar||te.height<Ar,$e=new ResizeObserver(U);$e.observe(L),A.value.set(L,{key:`${Date.now()}_${Math.random()}`,x:nn()?te.left+Da:document.documentElement.clientWidth-te.right+Da,y:te.bottom-_o,show:!0,expanded:!1,status:"idle",secondConfirmShow:!1,imageTranslateSettingShow:!1,hoverImg:!0,imgEl:L,popupCloseClick:!1,showTips:!1,exceedLimitTipShow:!1,guidShow:h&&!he,extractGuidShow:b&&!he,toastMessage:"",smallSize:he,imageSizeObserver:$e,imageSrcObserver:null,extractingStatus:"idle"}),!he&&Q.value&&(h&&(k.reportShowEvent("plugin_image_translate_first_time_guide"),mt(Ee.IMAGE_TRANSLATE_BALL_GUID_SHOW,!0),mt(Ee.IMAGE_TRANSLATE_BALL_GUID_SHOW_TIME,Date.now()),h=!1),b&&(k.reportShowEvent("plugin_text_extraction_first_time_guide",{},Lt.PREMIUM_PROMOTION_POPUP),mt(Ee.IMAGE_TRANSLATE_BALL_EXTRACT_GUID_SHOW,!0),b=!1),k.reportShowEvent("plugin_image_translate_entry"))}function z(R,L){R.x=nn()?L.left+Da:document.documentElement.clientWidth-L.right+Da,R.y=L.bottom-_o}function se(R,L){const te=R.target;if(g&&clearTimeout(g),Yf(L)==="gif")return;p=L,H.value=L,A.value.forEach($e=>{N($e)&&$e.imgEl!==L&&$e.show&&I($e.imgEl)});const he=A.value.get(L);he&&(he.hoverImg=!0),g=setTimeout(()=>{const $e=te.getBoundingClientRect(),Ve=$e.width<Ar||$e.height<Ar;if(!he)P(te,L);else{const Ke=he.show;he.show=!0,he.smallSize=Ve,z(he,$e),!Ke&&!Ve&&k.reportShowEvent("plugin_image_translate_entry")}},ag)}function me(R,L){g&&(clearTimeout(g),g=void 0),p=null;const te=A.value.get(L);te&&(te.hoverImg=!1,setTimeout(()=>{!te.expanded&&v(L)},10))}async function xe(R){m=R.target}function He(R){const L=A.value.get(R);L&&(S(L)||Q.value&&(L.expanded===!1&&k.reportShowEvent("plugin_image_translate_page"),L.expanded=!0))}function bt(R){const L=A.value.get(R);if(L&&!(L.imageTranslateSettingShow||L.secondConfirmShow)){if(L.expanded=!1,L.popupCloseClick){L.popupCloseClick=!1;return}setTimeout(()=>{!L.hoverImg&&v(R)},10)}}const Dt=R=>{R.secondConfirmShow=!1,R.imageTranslateSettingShow=!1},Kn=R=>{R.exceedLimitTipShow=!1,R.guidShow=!1,R.extractGuidShow=!1,R.showTips=!1},Qn=R=>{const L=A.value.get(R);L&&(L.popupCloseClick=!0,L.expanded=!1,Dt(L),v(R))};function In(R){const L=A.value.get(R);if(L){if(L.imageTranslateSettingShow){L.imageTranslateSettingShow=!1;return}Dt(L),L.imageTranslateSettingShow=!0,ge(),k.reportClickEvent("plugin_image_translate_page","settings"),k.reportShowEvent("plugin_image_translate_setting_page")}}function Zt(R){A.value.get(R)&&(Qe(R),Xe(R))}function jr(R){const L=A.value.get(R);if(L){if(L.secondConfirmShow){L.secondConfirmShow=!1;return}Dt(L),L.secondConfirmShow=!0,ge(),k.reportClickEvent("plugin_image_translate_page","close"),k.reportShowEvent("plugin_image_translate_retention_page")}}function ur(R){f("close",R)}function Rn(){A.value.forEach((R,L)=>{const he=Sa(L).getBoundingClientRect();z(R,he)})}let Zn=null;function $n(R){const L=Sa(R),te={mouseEnter:he=>se(he,R),mouseLeave:he=>me(he,R)};d.set(R,te),L.addEventListener("mouseenter",te.mouseEnter),L.addEventListener("mouseleave",te.mouseLeave),R.addEventListener("contextmenu",xe)}function Mt(R){const L=Sa(R),te=d.get(R);te&&(L.removeEventListener("mouseenter",te.mouseEnter),L.removeEventListener("mouseleave",te.mouseLeave),d.delete(R)),R.removeEventListener("contextmenu",xe)}function Tr(R){if(R.type===Ie.TRANSLATE_IMAGE&&m){let L=A.value.get(m);L||(P(m,m),L=A.value.get(m)),(L==null?void 0:L.status)==="idle"?k.reportClickEvent("Other","plugin_rightclickmenu_translate_image"):(L==null?void 0:L.status)==="success"&&k.reportClickEvent("Other","plugin_rightclickmenu_restore_image"),(L==null?void 0:L.status)==="success"?Qe(m):Xe(m)}}return Bt(async()=>{h=!await rt(Ee.IMAGE_TRANSLATE_BALL_GUID_SHOW);const R=await rt(Ee.IMAGE_TRANSLATE_BALL_GUID_SHOW_TIME);!h&&(!R||Date.now()-R>24*60*60*1e3)&&(b=!await rt(Ee.IMAGE_TRANSLATE_BALL_EXTRACT_GUID_SHOW)),s(),Array.from(document.querySelectorAll("img")).forEach($n),Zn=new MutationObserver(te=>{te.forEach(he=>{he.addedNodes.forEach($e=>{$e instanceof HTMLImageElement?$n($e):$e instanceof HTMLElement&&$e.querySelectorAll("img").forEach($n)}),he.removedNodes.forEach($e=>{if($e instanceof HTMLImageElement)Mt($e),I($e);else if($e instanceof HTMLElement){const Ve=$e.querySelectorAll("img");Ve.forEach(Ke=>{I(Ke)}),Ve.forEach(Mt)}})})}),Zn.observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("scroll",Rn,!0),window.addEventListener("resize",Rn,!0),chrome.runtime.onMessage.addListener(Tr)}),Un(()=>{Array.from(document.querySelectorAll("img")).forEach(Mt),window.removeEventListener("scroll",Rn,!0),window.removeEventListener("resize",Rn,!0),chrome.runtime.onMessage.removeListener(Tr),Zn&&(Zn.disconnect(),Zn=null),A.value.forEach((L,te)=>{w(L),L.originalState&&$i(te,L.originalState)}),m=null,p=null,_.clear(),E.clear(),A.value.clear()}),(R,L)=>(B(),re(kt,null,[(B(!0),re(kt,null,rn(Le.value,te=>(B(),re("div",{class:"image-translate-ball-container",style:De(Me(te)),key:te.key,onMouseenter:he=>He(te.imgEl),onMouseleave:he=>bt(te.imgEl),ref_for:!0,ref:"ballContentContainerRef",onClick:L[1]||(L[1]=rr(()=>{},["stop"]))},[T("div",{class:lt(["image-translate-icon-container",{hover:te.expanded||te.extractingStatus==="fail"||te.extractGuidShow}]),dir:j(nn)()?"ltr":"rtl"},[T("div",{class:lt(["translateIcon",{loading:S(te)}]),onMouseenter:he=>qe(he,te.imgEl,te.status==="success"?j(u)("translate.showOrigin"):j(u)("hoverBall.tips.translate",[pe.value])),onMouseleave:he=>Ye(te.imgEl),onClick:he=>Ne(te.imgEl)},[fe(vt,{icon:S(te)?"loading":"translate-text-white",size:20},null,8,["icon"])],42,Zf),(te.status==="success"||te.status==="fail")&&!S(te)?(B(),re("div",{key:0,class:"image-ball-status-icon",style:De(j(nn)()?{left:"20px"}:{right:"20px"})},[T("img",{width:"12px",height:"12px",src:te.status==="success"?j(cn)("images/translateSuccess.png"):j(cn)("images/translateFail.png")},null,8,Jf)],4)):ve("",!0),te.extractingStatus==="fail"&&!S(te)?(B(),re("div",{key:1,class:"image-ball-status-icon",style:De(j(nn)()?{left:"48px"}:{right:"48px"})},[T("img",{width:"12px",height:"12px",src:j(cn)("images/translateFail.png")},null,8,eg)],4)):ve("",!0),T("div",{class:"otherIcons",style:De(j(nn)()?{marginLeft:"-4px"}:{marginRight:"-4px"})},[T("button",{class:"icon-button",onMouseenter:he=>qe(he,te.imgEl,j(u)("imageBall.ocr")),onMouseleave:he=>Ye(te.imgEl),onClick:he=>Ge(te.imgEl)},[fe(vt,{icon:"ocr",size:20})],40,tg),T("button",{class:lt(["icon-button",{active:te.imageTranslateSettingShow}]),onMouseenter:he=>qe(he,te.imgEl,j(u)("common.setting")),onMouseleave:he=>Ye(te.imgEl),onClick:he=>In(te.imgEl),title:j(u)("common.setting")},[fe(vt,{icon:"open-setting-white",size:20})],42,ng),T("button",{class:lt(["icon-button",{active:te.secondConfirmShow}]),onClick:he=>jr(te.imgEl),onMouseenter:he=>qe(he,te.imgEl,j(u)("common.disable")),onMouseleave:he=>Ye(te.imgEl)},[fe(vt,{icon:"always-close-white",size:20})],42,rg)],4),Wt(T("div",{ref_for:!0,ref:"tipRef",style:De(F.value),class:"common-tips"},ce(y.value),5),[[qt,te.showTips]])],10,Qf),T("div",{class:"image-translate-ball-colorful-tips-container",style:De(ne(te))},[Wt(fe(Mu,{style:{"white-space":"nowrap"},noClose:"",position:"bottom",offset:we()},{default:ft(()=>[Qt(ce(te.extractGuidShow?j(u)("imageBall.extractGuid"):j(u)("imageBall.guid")),1)]),_:2},1032,["offset"]),[[qt,te.guidShow||te.extractGuidShow]]),Wt(fe(Er,{style:{width:"320px"},offset:we(),scene:te.extractingStatus==="fail"?"plugin_text_extraction_text_link":"plugin_image_translate_text_link","translate-type":j(V).IMAGE,autoReportShowEvent:!1,position:"bottom",onClose:L[0]||(L[0]=he=>wt())},null,8,["offset","scene","translate-type"]),[[qt,te.exceedLimitTipShow]])],4),T("div",{class:"image-translate-ball-toast-container",style:De(ne(te))},[Wt(fe(bl,{"arrow-offset":we(),onClose:he=>dt(te.imgEl),position:"bottom"},{default:ft(()=>[Qt(ce(te.toastMessage),1)]),_:2},1032,["arrow-offset","onClose"]),[[qt,te.toastMessage]])],4),T("div",{style:De(X.value),ref_for:!0,ref:"popupContainerRef",class:"image-translate-ball-popup-container"},[Wt(fe(Es,{source:"image",style:{position:"relative"},ref_for:!0,ref:"imageTranslateSettingRef",onClose:he=>Qn(te.imgEl),onSettingChange:he=>Zt(te.imgEl)},null,8,["onClose","onSettingChange"]),[[qt,te.imageTranslateSettingShow]]),Wt(fe(ii,{ref_for:!0,ref:"secondConfirmRef",source:"image_ball",title:j(u)("common.disableDesc",[j(u)("imageBall.name")]),onClose:he=>Qn(te.imgEl),onConfirm:ur,options:D},null,8,["title","onClose"]),[[qt,te.secondConfirmShow]])],4)],44,Kf))),128)),G.value?(B(),Fe(Bp,{key:0,top:K.value.top,left:K.value.left,onClose:L[2]||(L[2]=te=>G.value=!1),content:de.value},null,8,["top","left","content"])):ve("",!0)],64))}}),og=at(sg,[["__scopeId","data-v-14943a0a"]]),lg={class:"window-content"},ug={class:"header-section"},cg={class:"function-label"},dg=["title"],pg=["src"],fg=["onClick","onMouseenter"],gg={class:"text-item"},hg={class:"text-content-title"},mg={key:0,class:"unlock-for-free"},vg={class:"unlock-for-free-text"},Eg={key:1,class:"suffix-stars"},_g={class:"footer-section"},Tg={class:"footer-tip"},wg=je({__name:"ImproveWritingStyleWindow",props:{top:{default:0},left:{default:0},stylesOutput:{},reportPosition:{default:"plugin_textbox_translate_page_replace"},showTextCountTip:{type:Boolean,default:!1}},emits:["refresh","close","replace","heightChange"],setup(t,{emit:e}){Ko(y=>({fde64a84:o}));const{showBuyDialog:n}=vn(),{giftType:r}=Gr(),{userInfo:a}=St(),{skuInfo:i}=gs(),o=`${Je.IMPROVE_WRITE_STYLE_WINDOW_WIDTH}px`,l=C(-1);let c=!1;const u=t,f=e,h=C(),{t:b,locale:S}=Tt(),{getUsedVipStylesCount:x}=Vr(),{height:N}=jo(h);let _=!1;const E={value:V.IMPROVE_WRITE,labelKey:"improveWrite.improveWrite",icon:"edit2"},g=Z(()=>{var y;return(y=a.value)==null?void 0:y.isVip}),p=Z(()=>({position:"fixed",top:`${u.top}px`,left:`${u.left}px`,zIndex:2147483647})),m=Z(()=>{var F,G;if(!i.value)return b("buy.upgradeToUnlock");const y=(F=i.value.shopList)==null?void 0:F[1];return(G=y==null?void 0:y.first_exp_info)!=null&&G.price_display?y.first_exp_info.price_display:y!=null&&y.currency_symbol?`${y==null?void 0:y.currency_symbol}0`:b("buy.upgradeToUnlock")}),d=Z(()=>{let y=[];const F=[];if(Object.keys(u.stylesOutput).forEach(G=>{const K=Hu[G],de=b(K),ne=ba.includes(G),{content:we,suffix:Q}=q(G,u.stylesOutput[G]),Le={name:G,displayName:de,needVip:Ma.includes(G),content:we,suffix:Q};ne?y.push(Le):F.push(Le)}),y.length>sa)if(y.sort((K,de)=>ba.indexOf(K.name)-ba.indexOf(de.name)),x()<=ji)y=y.slice(0,sa);else for(;y.length>sa;){const K=Math.floor(Math.random()*y.length);y.splice(K,1)}return[...y,...F]}),J=y=>chrome.runtime.getURL(`public/images/${y}.png`);function q(y,F){if(F&&(F=F.replace(/[\s\n]+$/g,"")),ba.includes(y))return{content:F,suffix:""};if(g.value)return{content:F,suffix:""};{const G=Math.floor(F.length*.67);if(F.length<=5){const ee=Math.max(1,F.length-1),Ae=F.slice(0,ee),Re=F.slice(ee);return{content:`${Ae}***`,suffix:"*".repeat(Re.length)}}const K=Math.max(5,Math.min(30,Math.floor(F.length*.15))),de=/[\s\p{P}]/u;let ne=G;const we=Math.max(0,G-K);for(let ee=G;ee>=we;ee--)if(ee<F.length&&de.test(F[ee])){ne=ee+1;break}ne=Math.max(1,Math.min(ne,F.length-1));const Q=F.slice(0,ne),Le=F.slice(ne),ie=3,O="*".repeat(ie),M="*".repeat(Math.max(1,Le.length-ie));return{content:`${Q}${O}`,suffix:M}}}const W=()=>{f("refresh"),k.reportClickEvent("plugin_textbox_page_improve_writing_result_popup","refresh_style",{position:u.reportPosition})},oe=()=>{k.fireEvent(Lt.PREMIUM_PROMOTION_POPUP,{action:"click",item:"plugin_improve_writing_pro_style_unlock",type:r.value==="1"?"1":"9",position:u.reportPosition}),n("plugin_translate_textbox","plugin_improve_writing_pro_style")},Y=y=>{k.reportClickEvent("plugin_textbox_page_improve_writing_result_popup","style_list_selected",{selected_item:y.name,position:u.reportPosition}),!y.needVip||g.value?f("replace",y.content):oe(),c=!0,mt(Ee.IMPROVE_WRITING_STYLE_WINDOW_CLICK_TIP_SHOW,!0),l.value=-1},H=zu(()=>{k.reportShowEvent("plugin_textbox_page_improve_writing_result_popup_user_guide",{position:u.reportPosition})},500),X=y=>{c||(l.value=y,H())},A=()=>{c||(l.value=-1)},D=()=>{f("close"),k.reportClickEvent("plugin_textbox_page_improve_writing_result_popup","close",{position:u.reportPosition})};return Vu(()=>{!_&&d.value.length>0&&(k.reportShowEvent("plugin_textbox_page_improve_writing_result_popup",{improve_writing_styles:d.value.map(y=>y.name).join("||"),position:u.reportPosition}),_=!0)}),Te(g,async y=>{y||i.value||(i.value=await ot(Ie.GET_SKU_INFO,{locale:S.value}))},{immediate:!0}),Te(N,y=>{y>0&&h.value&&ht(()=>{var G;const F=(G=h.value)==null?void 0:G.getBoundingClientRect();F&&f("heightChange",F.height)})},{immediate:!0}),Te(d,()=>{ht(()=>{if(h.value){const y=h.value.getBoundingClientRect();f("heightChange",y.height)}})}),ha(()=>{rt(Ee.IMPROVE_WRITING_STYLE_WINDOW_CLICK_TIP_SHOW).then(y=>{c=!!y})}),(y,F)=>(B(),re("div",{ref_key:"windowRef",ref:h,class:"improve-writing-style-window",style:De(p.value)},[T("div",lg,[T("div",ug,[fe(vt,{class:"function-icon",size:24,icon:E.icon},null,8,["icon"]),T("div",cg,ce(y.$t(E.labelKey)),1),Wt(T("span",{class:"right-weaker-tip"},ce(y.$t("improveWrite.styles.textCountTip")),513),[[qt,y.showTextCountTip]]),T("div",{class:"close-icon",title:j(b)("common.close"),onClick:D},[T("img",{src:J("windowClose"),width:"16px",height:"16px"},null,8,pg)],8,dg)]),(B(!0),re(kt,null,rn(d.value,(G,K)=>(B(),re("div",{key:G.name,class:"content-section",onClick:de=>Y(G),onMouseenter:de=>X(K),onMouseleave:A},[T("div",gg,[T("span",hg,ce(G.displayName)+":",1),Qt(" "+ce(G.content)+" ",1),G.needVip&&!g.value?(B(),re("span",mg,[T("span",vg,ce(j(i)?y.$t("buy.unlockFor",[m.value]):y.$t("buy.upgradeToUnlock")),1)])):ve("",!0),G.needVip&&!g.value&&G.suffix?(B(),re("span",Eg,ce(G.suffix),1)):ve("",!0)]),l.value===K?(B(),Fe(bl,{key:0,class:"hover-toast-tip","show-close-button":!1,position:"bottom"},{default:ft(()=>[Qt(ce(y.$t("improveWrite.styles.clickToApply")),1)]),_:1})):ve("",!0)],40,fg))),128)),T("div",_g,[T("div",Tg,ce(y.$t("improveWrite.styles.refreshToExplore")),1),T("button",{class:"refresh-btn",onClick:W},ce(y.$t("improveWrite.styles.refresh")),1)])])],4))}}),bg=at(wg,[["__scopeId","data-v-2567b347"]]),ca=new Map,xg=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,i=ps(e).toString();return ca.has(`${n}-${r}-${a}-${i}`)?ca.get(`${n}-${r}-${a}-${i}`):""},yg=(t,e)=>{const{text:n,service:r,targetLanguage:a,translateType:i}=t,s=ps(n).toString();ca.set(`${r}-${a}-${i}-${s}`,e)},Ag=t=>{const{text:e,service:n,targetLanguage:r,translateType:a}=t,i=ps(e).toString();ca.delete(`${n}-${r}-${a}-${i}`)},Cg=()=>{ca.clear()};function Cl(){return{getTranslateResultCache:xg,setTranslateResultCache:yg,deleteTranslateResultCache:Ag,clearTranslateResultCachedMap:Cg}}const Sg=["title"],Dg=je({__name:"GetFreeTrialButton",props:{reportItem:{},reportPremiumPromotionItem:{},reportPageName:{}},setup(t){const{userInfo:e}=St(),{giftText:n,giftType:r}=Gr(),a=t,i=C(!1);Te(e,async()=>{var c;const l=await rt(Ee.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME);if(l&&Date.now()-l<5*24*60*60*1e3){i.value=!1;return}e.value||(i.value=!0),i.value=!((c=e.value)!=null&&c.isVip)},{immediate:!0}),Te(i,l=>{l&&(k.reportShowEvent(a.reportItem),k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"show",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"}))},{immediate:!0});const s=()=>{k.reportClickEvent(a.reportPageName,"close_plugin_select_to_translate_page_get_free_trial"),i.value=!1,mt(Ee.TRANSLATE_WINDOW_UPGRADE_PRO_CLOSE_TIME,Date.now())},o=()=>{k.reportClickEvent(a.reportPageName,a.reportItem),k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"click",item:a.reportPremiumPromotionItem,type:r.value==="1"?"1":"5"});const l=`${ye.priceUrl}?position=${a.reportPremiumPromotionItem}`;ct(l)};return(l,c)=>i.value?(B(),Fe(Tn,{key:0,class:"free-trial-btn",onClick:o},{default:ft(()=>[fe(vt,{icon:"gift",size:16}),T("span",{class:"free-trial-btn-text",title:j(n)},ce(j(n)),9,Sg),fe(vt,{icon:"close",size:16,onClick:rr(s,["stop"])})]),_:1})):ve("",!0)}}),Lg=at(Dg,[["__scopeId","data-v-99e1f9ac"]]),Ig=je({__name:"TranslateWindowActionBarItem",props:{isActive:{type:Boolean},name:{},icon:{},activeIcon:{},label:{},isDisabled:{type:Boolean},visible:{type:Boolean},showArrowIcon:{type:Boolean}},setup(t){const e=t,n=C(!1);function r(){e.isDisabled&&(n.value=!n.value)}return(a,i)=>(B(),re("div",{key:a.name,class:lt(["translate-window-footer-explain",{active:a.isActive,disable:a.isDisabled}]),onMouseenter:r,onMouseleave:r},[fe(vt,{icon:a.isActive?a.activeIcon:a.icon,size:20},null,8,["icon"]),T("span",null,ce(a.label),1),a.showArrowIcon?(B(),Fe(vt,{key:0,class:lt(["explain-arrow",{rotated:a.isActive}]),icon:a.isActive?"close-blue":"plus",size:12},null,8,["class","icon"])):ve("",!0)],34))}}),Sl=at(Ig,[["__scopeId","data-v-c39678ae"]]),Rg={class:"translate-window-footer-action-wrapper"},Ng=je({__name:"TranslateWindowActionBar",props:yn({showExplain:{type:Boolean},showImproveWrite:{type:Boolean},showTranslate:{type:Boolean},reportPageName:{}},{translateType:{required:!0,default:V.NONE},translateTypeModifiers:{}}),emits:["update:translateType"],setup(t){const e=t,n=Xn(t,"translateType"),r=C(!1),a=C(!1),i=Z(()=>[{name:V.EXPLAIN,icon:"explain",activeIcon:"explain-blue",labelKey:"explain.explain",isDisabled:r.value,visible:e.showExplain},{name:V.IMPROVE_WRITE,icon:"edit2",activeIcon:"edit2-blue",labelKey:"improveWrite.improveWrite",isDisabled:a.value,visible:e.showImproveWrite},{name:V.TRANSLATE,icon:"translate-no-arrow",activeIcon:"translate-no-arrow-blue",labelKey:"translate.translate",visible:e.showTranslate,isDisabled:!1}]);function s(o){let l="",c="";o===n.value?(n.value=V.NONE,l="deactive",c=o):(n.value=o,l="active",c=o),k.reportClickEvent(e.reportPageName,`switch_feature_tab_${l}_${c}_tab`)}return(o,l)=>(B(),re("div",Rg,[(B(!0),re(kt,null,rn(i.value.filter(c=>c.visible),c=>(B(),Fe(Sl,{key:c.name,class:"translate-window-footer-action-item","is-active":n.value===c.name,name:c.name,icon:c.icon,"active-icon":c.activeIcon,label:o.$t(c.labelKey),"is-disabled":c.isDisabled,visible:c.visible,"show-arrow-icon":!0,onClick:u=>s(c.name)},null,8,["is-active","name","icon","active-icon","label","is-disabled","visible","onClick"]))),128)),l[0]||(l[0]=T("div",{class:"empty-area"},null,-1)),fe(Lg,{class:"free-trial-btn","report-page-name":e.reportPageName,"report-item":"plugin_select_to_translate_page_get_trial_upgrade","report-premium-promotion-item":"plugin_select_to_translate_get_trial"},null,8,["report-page-name"])]))}}),kg=at(Ng,[["__scopeId","data-v-4c60f9ac"]]),Bg={class:"translate-window-header"},Og={class:"header-left"},Pg={class:"function-label"},Fg={class:"window-action"},Mg={class:"window-action-more-list-content"},Ug=["src"],$g={class:"window-action-more-list-item-content"},qg={class:"window-action-more-list-item-content"},Wg=["src"],Gg={class:"window-action-more-list-item-content"},Hg={class:"window-action-icon"},Vg=["src"],zg=["title"],jg=["src"],Yg=je({__name:"TranslateWindowHeader",props:yn({sourceText:{},showTargetLanguageInput:{type:Boolean},targetLanguageProp:{},translateReplaceType:{},reportPageName:{}},{translateType:{required:!0,default:V.TRANSLATE},translateTypeModifiers:{}}),emits:yn(["close","serviceChange","targetLanguageChange","alwayCloseConfirm","functionChange"],["update:translateType"]),setup(t,{expose:e,emit:n}){const r=t,{t:a,locale:i}=Tt(),s=C(),o=tt("moreActionsRef"),l=tt("moreActionsContainerRef"),c=C(!1),u=C(),f=C({}),{userInfo:h}=St(),{userSettings:b,notifyUserSettings:S}=pt(),x=C(r.targetLanguageProp),{googleDocsIntegrationShow:N}=or(),_=N.value,E=C(b.value.translationService),g=C(!1),p=C(void 0),m=Xn(t,"translateType"),d=Z(()=>[{value:V.TRANSLATE,labelKey:"translate.translate",label:a("translate.translate"),icon:"translate-no-arrow"},{value:V.IMPROVE_WRITE,labelKey:"improveWrite.improveWrite",label:a("improveWrite.improveWrite"),icon:"edit2"}]),J=Z(()=>d.value.find(O=>O.value===m.value)),q=n,W=Z(()=>dn(i.value)),oe=Z(()=>({...W.value?{left:"-35%"}:{right:"-35%"},...f.value})),Y=Z(()=>r.translateReplaceType===_t.OPEN_MODAL?{source:"input_ball",title:a("common.disableDesc",[a("inputBall.name")])}:{source:"select_text",title:a("translate.disableSelect")}),H=Z(()=>{if(r.translateReplaceType===_t.OPEN_MODAL)return[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];const O=[{value:"1",label:a("hoverBall.closeOneTime")},{value:"2",label:a("hoverBall.disableOnePage")},{value:"3",label:a("hoverBall.disable")}];return b.value.targetLanguage===p.value&&O.push({value:"4",label:a("hoverBall.languageDisable",[a(`language.${p.value}`)])}),O}),X=Z(()=>{const O={};if(g.value&&o.value&&l.value){const{width:M}=o.value.getBoundingClientRect(),{left:ee,right:Ae}=l.value.getBoundingClientRect();W.value?Ae-M<0?O.right=`${Ae-M-10}px`:O.right="0px":window.innerWidth-ee-M<0?O.left=`${window.innerWidth-ee-M-10}px`:O.left="0px"}return O}),A=Z(()=>_?"plugin_googledocs_integration_select_to_translate":r.reportPageName),D=Z(()=>_?"plugin_googledocs_integration_select_to_translate":r.translateReplaceType===_t.OPEN_MODAL?"plugin_input_translate_setting":"plugin_select_to_translate");Te(u,O=>{O&&(f.value={},ht(()=>{const M=O.$el.getBoundingClientRect(),ee={};M.bottom>window.innerHeight&&(ee.top=`${-M.height-10}px`),W.value&&M.left<0?ee.left="0px":!W.value&&M.right>window.innerWidth&&(ee.right="0px"),Object.keys(ee).length>0&&(f.value=ee)}))}),Te(()=>r.targetLanguageProp,O=>{O&&(x.value=O)}),Te(x,O=>{q("targetLanguageChange",O)}),Te(E,O=>{q("serviceChange",O),S({translationService:O})}),un(u,()=>{c.value=!1});const y=O=>chrome.runtime.getURL(`public/images/${O}.png`),F=()=>{g.value=!1,_?ct(`${ye.feedBackPage}?source=plugin&entry=other_plugin_features`):ct(`${ye.feedBackPage}?source=plugin&entry=select_to_translate`),k.reportClickEvent(r.reportPageName,"more_feedback")},G=()=>{if(g.value=!1,_){const O=new CustomEvent(Ie.OPEN_GOOGLE_DOCS_SETTING_PANEL,{bubbles:!0,cancelable:!0,detail:{open:!0}});window.dispatchEvent(O);return}c.value||(c.value=!0,k.reportShowEvent("plugin_select_to_retention_page"),k.reportClickEvent(r.reportPageName,"more_disable"))},K=()=>{g.value=!1;let O=ye.selectSettingPage,M="plugin_select_to_translate";r.translateReplaceType===_t.OPEN_MODAL&&(O=ye.textBoxSettingPage,M="plugin_textbox_translate"),_&&(O=ye.integrationsSettingPage,M="plugin_googledocs_integration_select_to_translate");let ee;if(h.value)ee=`${O}?source=plugin`;else{const Ae=encodeURIComponent(`${O}?source=plugin&from=extensionLogin`);ee=`${ye.loginUrl}?feature=${M}&cb=${Ae}`}ct(ee),k.reportClickEvent(r.reportPageName,"more_settings")},de=()=>{q("close"),k.reportClickEvent(r.reportPageName,"close")},ne=O=>{c.value=!1,q("alwayCloseConfirm",O)},we=O=>{q("functionChange",O),k.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list_list_select",{selected_item:O})},Q=()=>{k.reportClickEvent(r.reportPageName,"switch_feature_dropdown_list")},Le=()=>{k.reportClickEvent(r.reportPageName,"more")},ie=async()=>{var O;try{const M=await al(r.sourceText);p.value=(O=gn(M))==null?void 0:O.value}catch{}};return e({openModelSelect:()=>{var O;(O=s.value)==null||O.openOptions()},toggleService:O=>{var M;(M=s.value)==null||M.toggleService(O)},userInfoRefresh:()=>{x.value=r.translateReplaceType===_t.OPEN_MODAL?b.value.textboxTranslation.targetLanguage:b.value.targetLanguage,E.value=b.value.translationService},secondConfirmShow:c}),Bt(()=>{ie()}),(O,M)=>(B(),re("div",Bg,[T("div",Og,[fe(Ho,{class:"translate-type-select-container",modelValue:m.value,"onUpdate:modelValue":M[0]||(M[0]=ee=>m.value=ee),options:d.value,onClick:Q,onChange:we},{prefix:ft(()=>{var ee;return[fe(vt,{class:"function-icon",size:24,icon:(ee=J.value)==null?void 0:ee.icon},null,8,["icon"])]}),option:ft(ee=>[fe(vt,{class:"function-icon",size:24,icon:ee.option.icon},null,8,["icon"]),T("div",Pg,ce(O.$t(ee.option.labelKey)),1),Wt(fe(vt,{class:"selected-icon",size:16,icon:"check"},null,512),[[qt,ee.option.value===m.value]])]),_:1},8,["modelValue","options"]),M[10]||(M[10]=T("div",{class:"empty-area"},null,-1)),Wt(fe(os,{source:A.value,onMousedown:M[1]||(M[1]=rr(()=>{},["stop"])),class:"language-select",nativeSelect:!1,"has-icon":!1,"is-narrower":!0,column:1,size:"small",modelValue:x.value,"onUpdate:modelValue":M[2]||(M[2]=ee=>x.value=ee)},null,8,["source","modelValue"]),[[qt,O.showTargetLanguageInput]]),fe(Xo,{onMousedown:M[3]||(M[3]=rr(()=>{},["stop"])),ref_key:"modelServiceSelectRef",ref:s,"utm-source":D.value,"report-page-name":O.reportPageName,large:!0,modelValue:E.value,"onUpdate:modelValue":M[4]||(M[4]=ee=>E.value=ee),"has-label":!1,class:"model-select"},null,8,["utm-source","report-page-name","modelValue"])]),T("div",{class:"header-right",onMousedown:M[7]||(M[7]=rr(()=>{},["stop"]))},[T("div",Fg,[T("div",{ref_key:"moreActionsContainerRef",ref:l,style:{position:"relative"},onClick:Le,onMouseenter:M[5]||(M[5]=ee=>g.value=!0),onMouseleave:M[6]||(M[6]=ee=>g.value=!1)},[g.value?(B(),re("div",{key:0,ref_key:"moreActionsRef",ref:o,style:De(X.value),class:"window-action-more-list-container"},[T("div",Mg,[T("div",{class:"window-action-more-list-item",onClick:F},[T("img",{src:y("feedback"),width:"16px",height:"16px"},null,8,Ug),T("div",$g,ce(j(a)("common.feedback")),1)]),T("div",{class:"window-action-more-list-item",onClick:K},[fe(vt,{icon:"setting",size:16}),T("div",qg,ce(j(a)("common.setting")),1)]),T("div",{class:"window-action-more-list-item",onClick:G},[T("img",{src:y("alwaysClose"),width:"16px",height:"16px"},null,8,Wg),T("div",Gg,ce(j(a)("common.disable")),1)])])],4)):ve("",!0),T("div",Hg,[T("img",{src:y("more"),width:"16px",height:"16px"},null,8,Vg)])],544),T("div",null,[T("div",{title:j(a)("common.close"),class:"window-action-icon",onClick:de},[T("img",{src:y("windowClose"),width:"16px",height:"16px"},null,8,jg)],8,zg)])])],32),fe(vt,{class:"drag-tip",icon:"drag2",size:16}),c.value?(B(),Fe(ii,{key:0,onMousedown:M[8]||(M[8]=rr(()=>{},["stop"])),source:Y.value.source,title:Y.value.title,ref_key:"secondConfirmRef",ref:u,style:De(oe.value),onClose:M[9]||(M[9]=()=>c.value=!1),onConfirm:ne,options:H.value,class:"select-text-close-second-confirm"},null,8,["source","title","style","options"])):ve("",!0)]))}}),Xg=at(Yg,[["__scopeId","data-v-2ffd00cb"]]),Kg={class:"explain-not-support-container"},Qg={class:"explain-not-support-text"},Zg=["src"],Jg=je({__name:"ExplainNotSupport",props:{translateType:{},meedReportSubType:{type:Boolean},reportPageName:{}},emits:["switchService"],setup(t,{emit:e}){const{t:n}=Tt(),r=e,a=t,i=Z(()=>{switch(a.translateType){case V.EXPLAIN:return n("common.pleaseSwitchAI",[n("explain.explain")]);case V.IMPROVE_WRITE:return n("common.pleaseSwitchAI",[n("improveWrite.improveWrite")]);case V.TRANSLATE:default:return n("common.pleaseSwitchAI",[n("translate.translate")])}}),s=()=>chrome.runtime.getURL("public/images/model.png"),o=()=>{r("switchService")};return(l,c)=>(B(),re("div",Kg,[T("div",Qg,ce(i.value),1),T("div",{class:"explain-not-support-switch",onClick:o},[T("img",{src:s(),width:"16px",height:"16px"},null,8,Zg),T("span",null,ce(j(n)("common.switch")),1)])]))}}),eh=at(Jg,[["__scopeId","data-v-1d16d2d2"]]),th=je({__name:"RotateCircleLoading",props:{height:{default:null}},setup(t){const e=t,n=Z(()=>e.height!==null&&e.height>0?{height:`${e.height}px`}:{});return(r,a)=>(B(),re("div",{class:"translate-window-bottom-loading",style:De(n.value)},[fe(vt,{class:"translate-loading-icon",icon:"loading-gray",size:20})],4))}}),nh=at(th,[["__scopeId","data-v-787900e9"]]),rh={en:{DEFAULT:["US"]},zh:{DEFAULT:["CN","SG"],HANS:["CN","SG"],HANT:["TW","HK"]}};function da(){return!!(window.speechSynthesis&&window.SpeechSynthesisUtterance)}function ah(t){if(!t||typeof t!="string")return[];const e=t.split(/\r?\n|\r/).filter(r=>r.trim()!==""),n=[];if(e.forEach(r=>{const a=r.split(/([!?;]|\.(?=\s))/);for(let i=0;i<a.length;i+=2){const s=a[i],o=a[i+1]||"";s&&s.trim()&&n.push((s+o).trim())}}),n.length<=1&&t.length>1e3){const r=[];for(let a=0;a<t.length;a+=1e3)r.push(t.slice(a,a+1e3));return r}return n.length>0?n:[t]}function ih(t){if(!t)return{language:"",variant:""};const e=t.split("-");return{language:(e[0]||"").toLowerCase(),variant:(e[1]||"").toUpperCase()}}function sh(t,e){const n=rh[t]||{},r=[];if(e){const i=n[e];Array.isArray(i)&&i.length>0?r.push(...i):r.push(e)}Array.isArray(n.DEFAULT)&&r.push(...n.DEFAULT);const a=Object.create(null);for(let i=0;i<r.length;i+=1)a[r[i]]=r.length-i;return a}function ws(t,e){const{language:n,variant:r}=ih(e);if(!n)return null;const a=sh(n,r),i=`${n}-`;let s=null,o=-1;for(let l=0;l<t.length;l+=1){const c=t[l],u=c&&c.lang?String(c.lang):"";if(!u.toLowerCase().startsWith(i))continue;const b=(u.split("-")[1]||"").toUpperCase(),S=c.localService?1e3:3e3,x=a[b]||0,N=S+x;N>o&&(o=N,s=c)}return s}function oh(t,e){return!Array.isArray(t)||t.length===0||!e||typeof e!="string"?!1:!!ws(t,e)}class lh{constructor(){Ce(this,"currentInstance",null);Ce(this,"decrepatedId",0);this.currentInstance=null,this.decrepatedId=0}async getVoices(e=5e3,n=500){if(!da())return[];let r=window.speechSynthesis.getVoices();if(r&&r.length>0)return r;const a=Date.now();for(;Date.now()-a<e;)if(await new Promise(i=>setTimeout(i,n)),r=window.speechSynthesis.getVoices(),r&&r.length>0)return r;return[]}async add(e){var a,i,s;if(!da())return(a=e==null?void 0:e.onError)==null||a.call(e,Ft.BROWSER_NOT_SUPPORTED),!1;const n=await this.getVoices(5e3,500);if(!n||n.length===0)return(i=e==null?void 0:e.onError)==null||i.call(e,Ft.BROWSER_NOT_SUPPORTED),!1;this.currentInstance&&this.currentInstance.destroy();const r=e.lang;if(!e.voice){if(r&&!oh(n,r))return(s=e==null?void 0:e.onError)==null||s.call(e,Ft.LANGUAGE_NOT_SUPPORTED),!1;const o=ws(n,r);o&&(e.voice=o)}return this.currentInstance=e,this.currentInstance.start(),!0}destroy(e,n=!0){this.currentInstance&&this.currentInstance.id===e&&this.decrepatedId!==e&&(this.decrepatedId=e,this.currentInstance.destroy(n),this.currentInstance=null)}}class uh{constructor(e){Ce(this,"text");Ce(this,"lang");Ce(this,"onStart");Ce(this,"onEnd");Ce(this,"onPause");Ce(this,"onStop");Ce(this,"onResume");Ce(this,"onError");Ce(this,"id");Ce(this,"speaking");Ce(this,"utterance");Ce(this,"voiceStartTime");Ce(this,"isOnlineVoiceService");Ce(this,"voice");Ce(this,"currentSplitIndex");Ce(this,"splitedText");const{text:n,onStart:r,onEnd:a,onPause:i,onStop:s,onResume:o,onError:l,lang:c,voice:u,id:f}=e||{};this.text=n||"",this.lang=c||"",this.onStart=r,this.onEnd=a,this.onPause=i,this.onStop=s,this.onResume=o,this.onError=l,this.id=f||0,this.speaking=!1,this.utterance=null,this.voiceStartTime=0,this.isOnlineVoiceService=!1,this.voice=u||null,this.currentSplitIndex=0,this.splitedText=[],nt.info(`[utterance] utterance instance created, text: "${this.text.slice(0,20)}...", lang: "${this.lang||"(not set)"}"`)}isSplitted(){return this.splitedText.length>0}start(){var r,a;if(!da()){(r=this.onError)==null||r.call(this,Ft.BROWSER_NOT_SUPPORTED);return}window.speechSynthesis.cancel(),this.text||(a=this.onError)==null||a.call(this,Ft.NO_TEXT),this.text=this.text.trim();let e=[];k.getBrowser()===ju.Chrome?e=ah(this.text):e=this.text.split(/\r?\n|\r/).filter(i=>i.trim()!==""),e.length>=2&&(this.splitedText=e,this.currentSplitIndex=0,this.text=this.splitedText[this.currentSplitIndex]),this.utterance=new SpeechSynthesisUtterance(this.text),this.voice?this.utterance.voice=this.voice:this.lang&&(this.utterance.lang=this.lang),nt.info(`[utterance] using voice: ${this.voice?this.voice.name:"default"}`,this.utterance.voice),this.utterance.onstart=()=>{var i;this.speaking=!0,this.voiceStartTime=Date.now(),(i=this.onStart)==null||i.call(this)},this.utterance.onend=()=>{var o,l;this.speaking=!1;const s=Date.now()-this.voiceStartTime;if(!this.isSplitted()&&s<100&&((o=this.onError)==null||o.call(this,Ft.UNKNOWN_ERROR)),this.isSplitted()&&(this.currentSplitIndex+=1,this.currentSplitIndex<this.splitedText.length&&this.utterance)){const c=this.splitedText[this.currentSplitIndex];nt.info(`[utterance] continue to next split text: "${c.slice(0,20)}..."`),this.utterance.text=c,window.speechSynthesis.speak(this.utterance);return}(l=this.onEnd)==null||l.call(this)},this.utterance.onpause=()=>{var i;this.speaking=!1,(i=this.onPause)==null||i.call(this)},this.utterance.onresume=()=>{var i;this.speaking=!0,(i=this.onResume)==null||i.call(this)},this.utterance.onerror=i=>{var s,o,l;switch(this.speaking=!1,i.error){case"interrupted":(s=this.onError)==null||s.call(this,Ft.INTERRUPTED);break;case"synthesis-failed":(o=this.onError)==null||o.call(this,Ft.NO_INTERNET);break;default:(l=this.onError)==null||l.call(this,Ft.UNKNOWN_ERROR);break}},window.speechSynthesis.speak(this.utterance)}pause(){this.speaking&&window.speechSynthesis.speaking&&window.speechSynthesis.pause()}resume(){this.speaking&&window.speechSynthesis.paused&&window.speechSynthesis.resume()}stop(e=!0){var n;e&&window.speechSynthesis.cancel(),this.speaking=!1,(n=this.onStop)==null||n.call(this)}destroy(e=!0){this.stop(e),this.utterance=null}}const Zi=new lh;async function ch(t,e=5e3,n=500){if(!da()||!t)return null;const r=await Zi.getVoices(e,n);return!r||r.length===0?null:ws(r,t)||null}function bs(){return{showRewriteExceedLimitTip:C(!1),updateShowRewriteExceedLimitTip:()=>{},moreToolsRedHotShow:C(!1),updateMoreToolsRedHotShow:()=>{},getReportClickItemName:(t,e,n)=>t}}const dh={class:"option-list"},ph=["onClick"],fh={class:"option-text"},gh=3,hh=je({__name:"SpeechIcon",props:{sourceText:{default:""},sourceLanguage:{default:""},resultText:{default:""},targetLanguage:{default:""},disabled:{type:Boolean,default:!1},isDragging:{type:Boolean,default:!1},isNearBottom:{type:Boolean},isWeakenedColor:{type:Boolean,default:!1},reportPageName:{default:void 0},translateWindowResultType:{default:"up"},translateType:{default:V.TRANSLATE}},emits:["clickIcon","mouseEnterIcon","mouseLeaveIcon","speechStatusChanged"],setup(t,{emit:e}){const{t:n}=Tt(),{getReportClickItemName:r}=fs("translateWindowState",bs()),a=t,i=e,s={play:{source_text:"listen_to_original",target_text:"listen_to_translation"},stop:{source_text:"stop_listen_to_original",target_text:"stop_listen_to_translation"}},o=C(!1),l=C(!1),c=C(""),u=C("source_text"),f=C(!1);let h=null,b=null,S=0;const x=C(""),N=C(!1),_=tt("buttonRef"),E=tt("optionsRef"),g=C({}),p=da(),m=C(""),d=Z(()=>[{value:"target_text",label:n("speech.readTranslated")},{value:"source_text",label:n("speech.readSource")}]),J=Z(()=>o.value?"loading-gray":l.value?"stop":"voice"),q=Z(()=>{if(!p||a.disabled)return!0;const O=a.sourceText&&a.sourceText.trim()!=="",M=a.resultText&&a.resultText.trim()!=="";return!O&&!M});let W=0;const oe=Z(()=>{var O;return{func_type:"read_aloud",feature:"plugin_select_to_translate",task_id:x.value,source_language:m.value,target_language:a.targetLanguage,type:u.value,text_length:((O=u.value==="source_text"?a.sourceText:a.resultText)==null?void 0:O.length)||0,position:k.getReportPositionByString(a.reportPageName||"")}}),Y=(O,M)=>{const ee=M&&M!==Ft.INTERRUPTED?Le(M):"";i("speechStatusChanged",O,ee)},H=async()=>`${await Yu()}-${Date.now()}`,X=(O={})=>{k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...oe.value,status:"processing",...O})},A=({stopStatus:O,errorType:M,duration:ee,otherParams:Ae={}})=>{let Re;switch(O){case"error":M===Ft.NO_INTERNET?Re="failed_network_error":M===Ft.BROWSER_NOT_SUPPORTED?Re="failed_unsupported_browser":M===Ft.LANGUAGE_NOT_SUPPORTED?Re="failed_unsupported_language":M===Ft.NO_TEXT?Re="failed_no_text":(Ft.UNKNOWN_ERROR,Re="failed_unknown");break;case"user_stop":Re="stopped";break;case"interrupted":Re="interrupted";break;case"normal":Re="success";break}k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...oe.value,status:Re,duration:ee||0,...Ae})},D=O=>{if(S===0)return;const{status:M,errorType:ee,cancelSpeechSynthesis:Ae}=O||{};W&&(A({stopStatus:M,errorType:ee,duration:Date.now()-W}),W=0),Zi.destroy(S,Ae),S=0,x.value="",o.value=!1,l.value=!1,Y(nr.IDLE,""),f.value=!0,h&&clearTimeout(h),h=setTimeout(()=>{f.value=!1,h=null},100)},y=async()=>{if(await ht(),!_.value||!E.value)return;await new Promise(Re=>requestAnimationFrame(Re));const O=_.value.getBoundingClientRect(),M=E.value.getBoundingClientRect();let ee=O.bottom,Ae=O.right-M.width;Ae<0&&(Ae=5),Ae+M.width>window.innerWidth&&(Ae=Math.max(0,window.innerWidth-M.width-5)),ee+M.height>window.innerHeight&&(ee=O.top-M.height-5,ee<0&&(ee=5)),g.value={top:`${ee}px`,left:`${Ae}px`,paddingTop:`${gh}px`}},F=O=>{if(i("mouseEnterIcon",O),!(o.value||l.value)&&!N.value&&!f.value&&(N.value=!0,y(),a.reportPageName)){const M=r("read_aloud",a.translateWindowResultType,a.translateType);k.reportHoverEvent(a.reportPageName,M)}},G=O=>{i("mouseLeaveIcon",O)},K=()=>{b&&clearTimeout(b)},de=()=>{b=setTimeout(()=>{N.value=!1},200)},ne=O=>{var M;if(i("clickIcon",O),o.value||l.value){if(a.reportPageName){const ee=r(s.stop[u.value],a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,ee,{text_length:((M=c.value==="source_text"?a.sourceText:a.resultText)==null?void 0:M.length)||0,source_language:m.value,target_language:a.targetLanguage})}D({status:"user_stop",errorType:""});return}N.value&&(N.value=!1),Q("target_text")},we=async O=>{if(!p)return{errorTypeBeforeStart:Ft.BROWSER_NOT_SUPPORTED};const M=O==="source_text"?a.sourceText:a.resultText;try{a.sourceLanguage?m.value=a.sourceLanguage:m.value=await ot(Ie.DETECT_TEXT_LANGUAGE,a.sourceText)}catch{m.value=""}const ee=O==="source_text"?m.value:a.targetLanguage,Ae=await ch(ee);if(!Ae)return Y(nr.IDLE,Ft.LANGUAGE_NOT_SUPPORTED),{errorTypeBeforeStart:Ft.LANGUAGE_NOT_SUPPORTED};if(!M||M.trim()==="")return{errorTypeBeforeStart:Ft.NO_TEXT};S=Ur(),x.value=await H();const Re=new uh({text:M,lang:ee,voice:Ae||null,id:S,onStart:()=>{l.value=!0,o.value=!1,Y(nr.SPEAKING,"")},onEnd:()=>D({status:"normal",errorType:""}),onStop:()=>D(),onError:Ue=>{D({status:"error",errorType:Ue,cancelSpeechSynthesis:Ue!==Ft.INTERRUPTED}),Y(nr.IDLE,Ue)}});return o.value=!!await Zi.add(Re),Y(o.value?nr.LOADING:nr.SPEAKING,""),{errorTypeBeforeStart:null}},Q=async O=>{var Ae;const M=O;c.value=M,u.value=M,N.value=!1,c.value="";const{errorTypeBeforeStart:ee}=await we(M);if(a.reportPageName){const Re=r(s.play[M],a.translateWindowResultType,a.translateType);k.reportClickEvent(a.reportPageName,Re,{text_length:((Ae=M==="source_text"?a.sourceText:a.resultText)==null?void 0:Ae.length)||0,source_language:m.value,target_language:a.targetLanguage})}if(ee){const Re=await H();X({task_id:Re}),A({stopStatus:"error",errorType:ee,duration:0,otherParams:{task_id:Re}})}else X(),W=Date.now()};function Le(O){switch(O){case Ft.BROWSER_NOT_SUPPORTED:return n("speech.browserNotSupported");case Ft.LANGUAGE_NOT_SUPPORTED:return n("speech.languageNotSupported");case Ft.NO_INTERNET:return n("speech.noInternet");case Ft.UNKNOWN_ERROR:return n("speech.failed");default:return n("speech.failed")}}const ie=()=>{D({status:"interrupted",errorType:"",cancelSpeechSynthesis:!0})};return Te([()=>a.sourceText,()=>a.resultText],()=>{D({status:"interrupted",errorType:""})}),Te(()=>a.disabled,O=>{O&&D({status:"interrupted",errorType:""})}),Te(()=>a.isDragging,()=>{N.value=!1}),Te(()=>a.isNearBottom,O=>{O||(N.value=!1)}),ha(()=>{window.addEventListener("resize",y),window.addEventListener("beforeunload",ie)}),Un(()=>{D({status:"interrupted",errorType:""}),h&&(clearTimeout(h),h=null),b&&(clearTimeout(b),b=null),window.removeEventListener("resize",y),window.removeEventListener("beforeunload",ie)}),un(E,()=>{N.value=!1},{ignore:[_]}),(O,M)=>(B(),re("div",{class:lt(["speech-icon-wrapper",{"weakened-color":O.isWeakenedColor}]),ref_key:"buttonRef",ref:_,onMouseenter:K,onMouseleave:de},[fe(jt,{class:lt(["speech-icon-button",{"speech-icon-button-loading":J.value==="loading-gray","speech-icon-button-stop":J.value==="stop"}]),icon:J.value,size:24,disabled:q.value,onMouseenter:F,onMouseleave:G,onClick:ne},null,8,["class","icon","disabled"]),N.value?(B(),re("div",{key:0,ref_key:"optionsRef",ref:E,class:"speech-options-fixed",style:De(g.value)},[T("div",dh,[(B(!0),re(kt,null,rn(d.value,ee=>(B(),re("div",{key:ee.value,class:lt(["option",{selected:ee.value===c.value}]),onClick:Ae=>Q(ee.value)},[T("div",fh,ce(ee.label),1)],10,ph))),128))])],4)):ve("",!0)],34))}}),mh=at(hh,[["__scopeId","data-v-074edb6b"]]),vh={class:"translate-result-footer-icons"},Eh=["onClick","onMouseenter"],_h={key:0,class:"translate-result-icon-tip"},Th={key:1,class:"red-hot"},wh={class:"tip-text"},bh=je({__name:"TranslateWindowResultFooter",props:{translateWindowResultType:{},translateType:{},translateReplaceType:{},sourceText:{},translateResult:{},enableShowLabel:{type:Boolean},isWeakenedAndNarrower:{type:Boolean},isDragging:{type:Boolean},isNearBottom:{type:Boolean},showLanguageSelect:{type:Boolean},targetLanguageProp:{},reportPageName:{}},emits:["rewrite","replace","copy","targetLanguageChange"],setup(t,{emit:e}){const{t:n,locale:r}=Tt(),a=e,i=t,{showRewriteExceedLimitTip:s,updateShowRewriteExceedLimitTip:o,moreToolsRedHotShow:l,updateMoreToolsRedHotShow:c,getReportClickItemName:u}=fs("translateWindowState",bs()),f=C(!1),h=C(!1),b=C(!1),S=C(""),x=C({}),N=C({}),_=C(null);let E=null;const{userSettings:g}=pt(),p=C(i.translateReplaceType===_t.OPEN_MODAL?g.value.textboxTranslation.targetLanguage:g.value.targetLanguage),m=C({}),d=tt("footerRef"),J=tt("rewriteButtonContainer"),q=tt("speechIconContainer"),W=tt("exceedLimitTipWrapperRef"),oe=tt("exceedLimitTipRef"),Y=C(nr.IDLE),H=C(""),X=Z(()=>dn(r.value)?"rtl":"ltr"),A=Z(()=>J.value&&(Array.isArray(J.value)?J.value:[J.value])[0]||null),D=Z(()=>q.value&&(Array.isArray(q.value)?q.value:[q.value])[0]||null),y=ie=>{if(ie==="rewrite")return"rewriteButtonContainer";if(ie==="speech")return"speechIconContainer"},F=Z(()=>[{value:"rewrite",icon:"rewrite",tip:n("improveWrite.rewrite"),onClick:()=>{o(!1),a("rewrite");const ie=u("rewrite",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,ie)},visible:i.translateType===V.IMPROVE_WRITE,showLabel:i.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"replace",icon:"reset",tip:n("improveWrite.replace"),onClick:()=>{a("replace");const ie=u("replace",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,ie)},visible:(i.translateType===V.IMPROVE_WRITE||i.translateType===V.TRANSLATE)&&i.translateReplaceType===_t.OPEN_MODAL,showLabel:i.enableShowLabel,showRedHot:!1,size:20,isActive:!1},{value:"copy",icon:"copy2",tip:f.value?n("common.copied"):n("common.copy"),onClick:ie=>G(ie),visible:!0,showLabel:!1,showRedHot:!1,size:22,isActive:!1},{value:"speech",visible:i.translateType===V.TRANSLATE,tip:H.value||(Y.value===nr.IDLE?n("speech.listen"):n("speech.stop")),showLabel:!1},{value:"moreTools",icon:"moreTools",tip:n("common.translateFileAndMore"),onClick:()=>K(),visible:!0,showLabel:!1,showRedHot:l.value,size:20,isActive:!1}]),G=ie=>{if(f.value)return;a("copy"),ie&&Q(ie.currentTarget,n("common.copied"),{showIcon:!0,duration:1e3,setCopiedFlag:!0});const O=u("copy",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,O)},K=()=>{c(!1),mt(Ee.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK,!0);let ie="plugin_select_to_translate_jump_to_more_tools";i.translateReplaceType===_t.OPEN_MODAL&&(ie="plugin_textbox_jump_to_more_tools"),ct(`${ye.translatorPage}?position=${ie}`);const O=u("more",i.translateWindowResultType,i.translateType);k.reportClickEvent(i.reportPageName,O==="more"?"more_tools":O)},de=(ie,O,M={})=>{const{position:ee="fixed",gap:Ae=8,margin:Re=10,useRealSize:Ue=!0,defaultWidth:pe=200,defaultHeight:ge=60,updateArrowPosition:Me=!1}=M,qe=ie.getBoundingClientRect();let Ye=pe,wt=ge;if(O&&Ue){const gt=O.getBoundingClientRect();Ye=gt.width,wt=gt.height}const dt=qe.left+qe.width/2;let We=dt-Ye/2,ke=qe.top-wt-Ae;if(ee==="absolute"){const gt=d.value;if(!gt)return{};const et=gt.getBoundingClientRect(),Be=qe.left-et.left,Ne=qe.top-et.top;return We=Be+qe.width/2-Ye/2,ke=Ne-wt-Ae,{position:"absolute",left:`${We}px`,top:`${ke}px`,zIndex:1e3}}else{const gt=X.value==="rtl";if(We<Re?We=Re:We+Ye>window.innerWidth-Re&&(We=window.innerWidth-Re-Ye),Me)if(gt){const et=window.innerWidth-We-Ye,Be=window.innerWidth-dt-et;N.value={right:`${Be}px`}}else{const et=dt-We;N.value={left:`${et}px`}}return ke<Re&&(ke=qe.bottom+Ae),{position:ee,left:`${We}px`,top:`${ke}px`,zIndex:1e3}}},ne=()=>{const ie=A.value;return ie?de(ie,W.value,{position:"fixed",gap:4,margin:10,defaultWidth:300,defaultHeight:80,useRealSize:!0}):{}},we=(ie,O)=>{S.value=O,h.value=!0,ht(()=>{_.value&&(x.value=de(ie.currentTarget,_.value,{position:"fixed",gap:4,margin:10,useRealSize:!0,updateArrowPosition:!0}))})},Q=(ie,O,M={},ee)=>{const{showIcon:Ae=!1,duration:Re=1e3,setCopiedFlag:Ue=!1}=M;b.value=Ae,S.value=O,h.value=!0,Ue&&(f.value=!0),ht(()=>{_.value&&(x.value=de(ie,_.value,{position:"fixed",gap:4,margin:10,useRealSize:!0,updateArrowPosition:!0}))}),E&&clearTimeout(E),E=setTimeout(()=>{h.value=!1,b.value=!1,Ue&&(f.value=!1),ee==null||ee()},Re)},Le=(ie,O)=>{if(Y.value=ie,H.value=O||"",H.value){const M=D.value;M&&Q(M,H.value,{showIcon:!1,duration:2e3,setCopiedFlag:!0},()=>{H.value=""})}};return Te([()=>i.translateType,()=>s.value&&!i.isDragging&&i.isNearBottom,()=>i.enableShowLabel],()=>{i.translateType===V.IMPROVE_WRITE&&ht(()=>{m.value=ne()})},{immediate:!0}),Te(()=>s.value&&i.translateType===V.IMPROVE_WRITE,ie=>{var O,M;ie&&((M=(O=oe.value)==null?void 0:O.reportShow)==null||M.call(O))}),Te(()=>i.targetLanguageProp,ie=>{p.value=ie}),Te(p,ie=>{a("targetLanguageChange",ie)}),Te(()=>i.isDragging,ie=>{ie&&h.value&&(h.value=!1,b.value=!1,f.value=!1,E&&(clearTimeout(E),E=null),H.value="")}),(ie,O)=>(B(),re("div",{class:lt(["translate-window-result-footer",{"weakened-and-narrower":ie.isWeakenedAndNarrower}]),ref_key:"footerRef",ref:d},[ie.showLanguageSelect?(B(),Fe(os,{key:0,class:"translate-window-result-footer-language-select",source:ie.reportPageName,"native-select":!1,"has-icon":!1,column:1,size:"small","is-narrower":!0,"report-item-prefix":"translate_tab_",modelValue:p.value,"onUpdate:modelValue":O[0]||(O[0]=M=>p.value=M)},{input:ft(()=>[fe(Sl,{"is-active":!1,name:"world",icon:"world","active-icon":"world",label:j(n)(`language.${p.value}`)||p.value,"is-disabled":!1,visible:!0,"show-arrow-icon":!1},null,8,["label"])]),_:1},8,["source","modelValue"])):ve("",!0),O[5]||(O[5]=T("div",{class:"empty-area"},null,-1)),T("div",vh,[(B(!0),re(kt,null,rn(F.value,M=>Wt((B(),re("div",{key:M.icon,class:lt(["translate-result-icon-container",`icon-container-${M.value}`]),ref_for:!0,ref:y(M.value)},[M.value!=="speech"?(B(),re("div",{key:0,class:lt(["translate-result-icon-wrapper",{active:M.isActive,"show-label":M.showLabel}]),onClick:rr(ee=>{var Ae;return(Ae=M.onClick)==null?void 0:Ae.call(M,ee)},["prevent"]),onMouseenter:ee=>!M.showLabel&&!f.value&&M.tip&&we(ee,M.tip),onMouseleave:O[1]||(O[1]=ee=>!f.value&&(h.value=!1))},[fe(vt,{icon:M.icon,size:M.size||20},null,8,["icon","size"]),M.showLabel?(B(),re("div",_h,ce(M.tip),1)):ve("",!0),M.showRedHot?(B(),re("div",Th)):ve("",!0)],42,Eh)):(B(),Fe(mh,{key:1,"report-page-name":i.reportPageName,"source-text":i.sourceText,"result-text":i.translateResult,"target-language":p.value,disabled:!1,"is-dragging":ie.isDragging,"is-near-bottom":ie.isNearBottom,"is-weakened-color":ie.isWeakenedAndNarrower,"translate-window-result-type":i.translateWindowResultType,"translate-type":i.translateType,onMouseEnterIcon:ee=>!M.showLabel&&!f.value&&M.tip&&we(ee,M.tip),onMouseLeaveIcon:O[2]||(O[2]=ee=>h.value=!1),onSpeechStatusChanged:Le,onClickIcon:O[3]||(O[3]=ee=>h.value=!1)},null,8,["report-page-name","source-text","result-text","target-language","is-dragging","is-near-bottom","is-weakened-color","translate-window-result-type","translate-type","onMouseEnterIcon"]))],2)),[[qt,M.visible]])),128))]),Wt(T("div",{ref_key:"exceedLimitTipWrapperRef",ref:W,style:De([{width:"300px","pointer-events":"all"},m.value])},[fe(Er,{ref_key:"exceedLimitTipRef",ref:oe,"translate-type":j(V).IMPROVE_WRITE,"need-report-sub-type":!0,"auto-report-show-event":!1,"report-page-name":i.reportPageName,scene:"plugin_select_to_translate_page_free_trial_limit_upgrade_popup",position:"bottom",onClose:O[4]||(O[4]=M=>s.value=!1)},null,8,["translate-type","report-page-name"])],4),[[qt,j(s)&&!ie.isDragging&&ie.isNearBottom&&i.translateType===j(V).IMPROVE_WRITE]]),fe(Fr,{name:"slow-fade-in"},{default:ft(()=>[h.value?(B(),re("div",{key:0,ref_key:"tipRef",ref:_,style:De(x.value),class:lt(["translate-result-hover-tip",{"with-icon":b.value}])},[b.value?(B(),Fe(vt,{key:0,icon:"check-white",size:16,class:"tip-icon"})):ve("",!0),T("span",wh,ce(S.value),1),T("div",{class:"tip-arrow",style:De(N.value)},null,4)],6)):ve("",!0)]),_:1})],2))}}),Dl=at(bh,[["__scopeId","data-v-c3f95a1f"]]),xh={key:2,class:"upgrade-now-wrapper"},yh={key:0,class:"explain-disable-tips"},Ah=je({__name:"TranslateWindowResult",props:yn({translateWindowResultType:{},isAnotherResultShow:{type:Boolean},dependentServiceStatus:{},dependentServiceErrorCode:{default:ze.SUCCESS},translateType:{},sourceText:{},userInfoRefreshed:{type:Boolean},targetLanguage:{},service:{},translateReplaceType:{},collapseBottom:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!0},isDragging:{type:Boolean},preventAutoSwitch:{type:Boolean,default:!1},isNearBottom:{type:Boolean,default:!1},reportPageName:{},showActionBar:{type:Boolean,default:!0}},{outputText:{required:!1,default:""},outputTextModifiers:{},resultAreaHeight:{required:!1,default:Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT},resultAreaHeightModifiers:{}}),emits:yn(["replace","switchService","openModelSelect","resultStatusChanged","targetLanguageChange"],["update:outputText","update:resultAreaHeight"]),setup(t,{expose:e,emit:n}){const{explainText:r,explainDone:a,explainError:i,explainErrorCode:s,improveWriteText:o,improveWriteDone:l,improveWriteError:c,improveWriteErrorCode:u,getCurrentRequestId:f,setCurrentRequestId:h}=Vr(),{t:b}=Tt(),{userSettings:S}=pt(),{getTranslateResultCache:x,setTranslateResultCache:N,deleteTranslateResultCache:_}=Cl(),{userInfo:E}=St(),{googleDocsIntegrationShow:g}=or(),p=g.value,m=n,d=t,J=Xn(t,"outputText"),{showBuyDialog:q}=vn(),{updateShowRewriteExceedLimitTip:W,getReportClickItemName:oe}=fs("translateWindowState",bs()),Y=Xn(t,"resultAreaHeight"),H=C(),X=C();let A=!1;const D=C(!1),y=C(""),F=C(!1),G=C(ze.SUCCESS),K=C(!1),de=C(!1),ne=C(""),we=C(Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT),Q=C({}),Le=Z(()=>ge.value||!d.userInfoRefreshed),ie=Z(()=>dn(d.targetLanguage)?{direction:"rtl",textAlign:"right"}:{direction:"ltr",textAlign:"left"}),O=Z(()=>{const le=[V.EXPLAIN,V.IMPROVE_WRITE].includes(d.translateType),Se=!Mn(d.service);return le?Se:d.dependentServiceStatus==="notSupport"}),M=Z(()=>{switch(d.translateType){case V.EXPLAIN:return r.value;case V.IMPROVE_WRITE:return o.value;case V.TRANSLATE:return y.value;default:return""}}),ee=Z(()=>{switch(d.translateType){case V.EXPLAIN:return i.value;case V.IMPROVE_WRITE:return c.value;case V.TRANSLATE:return F.value;default:return F.value}}),Ae=Z(()=>d.isAnotherResultShow===!1&&d.translateWindowResultType==="up"),Re=Z(()=>d.translateType===V.TRANSLATE&&G.value===ze.EXTEND_LIMIT),Ue=Z(()=>{const le=b("common.upgradePro");return le.charAt(0).toLocaleLowerCase()+le.slice(1)}),pe=Z(()=>{switch(d.translateType){case V.EXPLAIN:return s.value===ze.EXTEND_LIMIT?{code:ze.EXTEND_LIMIT,i18nKey:"translate.limitFail",type:"limitFail"}:{code:s.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case V.IMPROVE_WRITE:return u.value===ze.EXTEND_LIMIT?{code:u.value,i18nKey:"translate.limitFail",type:"limitFail"}:{code:u.value,i18nKey:"common.loadingFailedPlease",type:"fail"};case V.TRANSLATE:default:return{code:F.value?ze.EXTEND_LIMIT:ze.SUCCESS,i18nKey:G.value===ze.EXTEND_LIMIT?"translate.limitTip":"translate.fail",type:G.value===ze.EXTEND_LIMIT?"limitFail":"fail"}}}),ge=Z(()=>{switch(d.translateType){case V.EXPLAIN:return!a.value;case V.IMPROVE_WRITE:return!l.value;case V.TRANSLATE:return D.value;default:return!0}}),Me=()=>{if(d.dependentServiceStatus==="error"||d.dependentServiceStatus==="notSupport")return;switch(d.translateType){case V.EXPLAIN:case V.IMPROVE_WRITE:Ne(d.translateType);break;case V.TRANSLATE:Ye();break}const le=oe("retry",d.translateWindowResultType,d.translateType);k.reportClickEvent(d.reportPageName,le)};let qe=0;async function Ye(){if(!d.userInfoRefreshed)return;D.value=!0,y.value="",F.value=!1;let le=d.sourceText;d.sourceText.length>hi&&(le=le.substring(0,hi));const Se=d.targetLanguage,Ge=S.value.translationService,Xe=x({text:le,service:Ge,targetLanguage:Se,translateType:d.translateType});if(Xe){D.value=!1,y.value=Xe,F.value=!1,G.value=ze.SUCCESS;return}let v="";try{v=await ot(Ie.DETECT_TEXT_LANGUAGE,d.sourceText)}catch{v=ye.defaultSourceLanguage}const w=++qe,I=await zr({texts:[{text:le}],from:v,to:Se,service:Ge,type:V.SELECT_TEXT},Be(V.TRANSLATE));if(!A&&d.translateType===V.TRANSLATE)if(I.code===0){const U=I.data&&I.data[0].text||"";w===qe&&(D.value=!1,y.value=U),N({text:le,service:Ge,targetLanguage:Se,translateType:d.translateType},U)}else{if(w!==qe)return;if(G.value=I.code,I.code,ze.EXTEND_LIMIT,I.code===ze.NOT_LOGIN){const U=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin`);ct(`${ye.loginUrl}?feature=plugin_select_to_translate&cb=${U}`)}I.code===ze.PRIVILEGE_INSUFFICIENT&&ct(`${ye.priceUrl}?source=plugin_select_to_translate`),D.value=!1,F.value=!0}}const wt=()=>{let le;return d.translateType===V.TRANSLATE?le=p?"ai_model_free_trial_limit|google_doc":"ai_model_free_trial_limit":d.translateType===V.IMPROVE_WRITE?le=p?"plugin_rewrite_ai_model_free_trial_limit|google_doc":"plugin_rewrite_ai_model_free_trial_limit":d.translateType===V.EXPLAIN?le=p?"plugin_explain_ai_model_free_trial_limit|google_doc":"plugin_explain_ai_model_free_trial_limit":le="ai_model_free_trial_limit",le},dt=()=>{const le=wt();q("plugin_select_to_translate",le),k.reportClickEvent(d.reportPageName,"plugin_select_to_translate_page_get_trial_upgrade",{sub_type:d.translateType}),k.fireEvent("premium_promotion_popup",{action:"click",page_name:d.reportPageName,item:le,position:p?"plugin_googledocs_integration_select_to_translate_page":""})},We=()=>M.value,ke=()=>{m("replace",We())},gt=()=>{us(We())};async function et(le){if(O.value){const Xe=!!E.value,v=le===V.EXPLAIN?a.value:l.value;if(d.translateWindowResultType==="bottom"&&Xe&&!v){if(d.preventAutoSwitch)return;const w=S.value.services.find(I=>I.isAIService&&!I.isVipService);w&&m("switchService",w);return}if(d.translateWindowResultType==="up"&&Xe&&!v){const w=S.value.services.find(I=>I.isAIService&&!I.isVipService);w&&m("switchService",w);return}}const Se=x({text:d.sourceText,service:d.service,targetLanguage:d.targetLanguage,translateType:le});if(Se){le===V.EXPLAIN?(r.value=Se,a.value=!0,i.value=!1,s.value=ze.SUCCESS):(o.value=Se,l.value=!0,c.value=!1,u.value=ze.SUCCESS);return}if(le===V.EXPLAIN?(i.value=!1,a.value=!1,r.value=""):(c.value=!1,l.value=!1,o.value=""),O.value)return;h(le);const Ge=d.sourceText.substring(0,hi);Ld({translateType:le,input:Ge,engineCode:il(d.service),targetLanguage:d.targetLanguage,component:ds[V.SELECT_TEXT],requestId:f(le)},Be(le))}function Be(le){let Se;if(p){switch(le){case V.IMPROVE_WRITE:Se={position:"plugin_googledocs_integration_select_to_translate_improve_writing",feature:"plugin_select_to_improve_writing"};break;case V.EXPLAIN:Se={position:"plugin_googledocs_integration_select_to_translate_explain",feature:"plugin_select_to_translate_explain"};break;case V.TRANSLATE:default:Se={position:"plugin_googledocs_integration_select_to_translate",feature:"plugin_select_to_translate"};break}return Se}switch(le){case V.IMPROVE_WRITE:d.translateReplaceType===_t.OPEN_MODAL?Se={position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"}:Se={position:"plugin_select_to_translate_improve_writing",feature:"plugin_select_to_improve_writing"};break;case V.EXPLAIN:Se={position:"plugin_select_to_translate_explain",feature:"plugin_select_to_translate_explain"};break;case V.TRANSLATE:default:d.translateReplaceType===_t.OPEN_MODAL?Se={position:"plugin_textbox_translate",feature:"plugin_textbox_translate"}:Se={position:"plugin_select_to_translate",feature:"plugin_select_to_translate"};break}return Se}function Ne(le){ne.value=o.value,_({text:d.sourceText,service:d.service,targetLanguage:d.targetLanguage,translateType:d.translateType}),et(le)}function Qe(){de.value=!de.value,W(!1),k.reportClickEvent(d.reportPageName,de.value?"expand":"fold")}function ae(){m("openModelSelect");const le=oe("switch_to_ai_model",d.translateWindowResultType,d.translateType);k.reportClickEvent(d.reportPageName,le)}function be(le,Se,Ge,Xe,v,w,I,U,P,z,se,me){if(d.translateWindowResultType==="bottom"){const Qn=le&&le!==Se,In=Ge!==Xe,Zt=I!==U,jr=se!==me;return!!(Qn||In&&d.sourceText&&Ge&&Ge!==V.NONE||d.translateType===V.TRANSLATE&&Zt&&d.sourceText||jr&&me==="loading"&&se==="done"&&d.sourceText)}return Ge!==Xe||v!==w||I!==U||P!==z||se!==me}Te(()=>d.translateType,()=>{d.collapseBottom&&(de.value=!1)}),Te([a,l],()=>{d.dependentServiceStatus==="done"&&(a.value&&d.translateType===V.EXPLAIN&&N({text:d.sourceText,service:d.service,targetLanguage:d.targetLanguage,translateType:V.EXPLAIN},r.value),l.value&&d.translateType===V.IMPROVE_WRITE&&N({text:d.sourceText,service:d.service,targetLanguage:d.targetLanguage,translateType:V.IMPROVE_WRITE},o.value))}),Te(M,le=>{J.value=le}),Te([ge,O,ee,()=>d.translateType],()=>{if(O.value){m("resultStatusChanged","notSupport");return}if(ee.value){const le=pe.value.code;m("resultStatusChanged","error",le);return}if(ge.value){m("resultStatusChanged","loading");return}m("resultStatusChanged","done")}),Te([()=>d.sourceText,()=>d.translateType,()=>d.service,()=>d.targetLanguage,()=>d.userInfoRefreshed,()=>d.dependentServiceStatus],async([le,Se,Ge,Xe,v,w],[I,U,P,z,se,me])=>{if(!(Se===U&&Ge===P&&Xe!==z&&v===se&&w===me&&le===I&&Se===V.IMPROVE_WRITE||(d.dependentServiceStatus!=="done"&&(d.dependentServiceStatus==="error"?(d.translateType===V.EXPLAIN&&(i.value=!0,a.value=!0,s.value=d.dependentServiceErrorCode),d.translateType===V.IMPROVE_WRITE&&(c.value=!0,l.value=!0,u.value=d.dependentServiceErrorCode),d.translateType===V.TRANSLATE&&(F.value=!0,D.value=!1,G.value=d.dependentServiceErrorCode)):d.dependentServiceStatus==="loading"?(d.translateType===V.EXPLAIN&&(i.value=!1,a.value=!1),d.translateType===V.IMPROVE_WRITE&&(c.value=!1,l.value=!1),d.translateType===V.TRANSLATE&&(F.value=!1,D.value=!0)):d.dependentServiceStatus),!be(le,I,Se,U,Ge,P,Xe,z,v,se,w,me)))&&d.userInfoRefreshed&&d.dependentServiceStatus==="done")switch(d.translateType){case V.EXPLAIN:case V.IMPROVE_WRITE:et(d.translateType);break;case V.TRANSLATE:Ye();break}},{immediate:!0});const Oe=()=>{!Le.value&&X.value&&!ee.value&&ht(()=>{if(X.value&&!Le.value){let le=0;const Se=X.value.offsetHeight;Se>0&&(le+=Se),!ee.value&&(de.value||!d.collapseBottom)&&!ge.value&&!O.value?le+=40:le+=0,le>0&&(Y.value=le-24)}})};Te(()=>c.value&&u.value===ze.EXTEND_LIMIT,le=>{le&&ne.value&&(W(!0),l.value=!0,c.value=!1,u.value=ze.SUCCESS,o.value=ne.value,ne.value="")}),Te([()=>pe.value,()=>O.value],()=>{if(!O.value&&ee.value&&pe.value.type==="limitFail"){k.reportShowEvent("plugin_select_to_translate_page_get_trial_upgrade",{sub_type:d.translateType});const le=wt();k.fireEvent("premium_promotion_popup",{action:"show",page_name:d.reportPageName,item:le,position:p?"plugin_googledocs_integration_select_to_translate_page":""})}}),Te([Le,()=>d.translateWindowResultType,()=>d.isAnotherResultShow,()=>d.showActionBar],()=>{d.translateWindowResultType==="up"&&d.isAnotherResultShow===!1&&!d.showActionBar?we.value=Y.value+51:we.value=Y.value},{immediate:!0}),Te(Le,le=>{le||Oe()});let Ze=null;return Te(X,le=>{Ze&&(Ze.disconnect(),Ze=null),le&&(Ze=new ResizeObserver(()=>{Le.value||Oe()}),Ze.observe(le))},{immediate:!0}),Te([M,ee,O,de,()=>d.collapseBottom],()=>{Oe()},{flush:"post"}),Te(()=>!!ee.value,le=>{le?ht(()=>{H.value&&(H.value.scrollHeight>we.value?Q.value={}:Q.value={height:`${we.value}px`})}):Q.value={height:`${we.value}px`}}),Un(()=>{A=!0,Ze&&(Ze.disconnect(),Ze=null)}),e({resultError:ee,resultLoading:ge,translateTypeNotSupport:O,showMoreThanTwoLines:de,onReImproveWriteClick:Ne,getPureTranslateResult:We}),(le,Se)=>(B(),re(kt,null,[T("div",{ref_key:"containerRef",ref:X,class:lt(["translate-window-result-container",{"exception-status":ee.value||O.value||ge.value||!le.userInfoRefreshed,"fixed-min-height":Ae.value,"retain-height":!le.isAnotherResultShow||le.translateWindowResultType!=="up"}]),style:De(ee.value?{}:ie.value)},[O.value?(B(),Fe(eh,{key:0,style:De({height:`${Math.max(we.value,j(Je).TRANSLATE_WINDOW_RESULT_MIN_HEIGHT)}px`}),"translate-type":le.translateType,"report-page-name":le.reportPageName,"meed-report-sub-type":!0,onSwitchService:ae},null,8,["style","translate-type","report-page-name"])):ge.value||!le.userInfoRefreshed?(B(),Fe(nh,{key:1,class:"translate-window-result-loading",height:we.value},null,8,["height"])):ee.value?(B(),re("div",{key:2,ref_key:"resultErrorContainerRef",ref:H,class:"translate-window-result-error-container",style:De(Q.value)},[Re.value?(B(),Fe(j(la),{key:0,keypath:pe.value.i18nKey,class:"translate-window-result-error",style:{display:"block"},tag:"div"},{default:ft(()=>[T("span",null,ce(Ue.value),1)]),_:1},8,["keypath"])):(B(),Fe(j(la),{key:1,keypath:pe.value.i18nKey,class:"translate-window-result-error",style:{display:"inline-flex"},tag:"div"},{default:ft(()=>[pe.value.type==="fail"?(B(),re("div",{key:0,class:"translate-result-error-retry",onClick:Me},[fe(vt,{style:{cursor:"pointer"},icon:"retry",size:16}),T("span",null,ce(j(b)("common.retry")),1)])):ve("",!0)]),_:1},8,["keypath"])),pe.value.type==="limitFail"?(B(),re("div",xh,[T("span",{class:"upgrade-now-btn",onClick:dt},ce(j(b)("common.upgradeNow")),1)])):ve("",!0)],4)):(B(),re("div",{key:3,class:lt(["translate-window-result-text-wrapper",{"text-can-be-collapsed":d.collapseBottom}])},[T("div",{class:lt(["translate-window-result-text",{"collapsed-in-two-lines":!de.value}])},ce(M.value),3),le.collapseBottom?(B(),Fe(vt,{key:0,class:"collapse-bottom-icon",icon:de.value?"arrow-up":"arrow-down",size:16,onClick:Qe},null,8,["icon"])):ve("",!0)],2))],6),d.showFooter!==!1?Wt((B(),Fe(Dl,{key:0,"translate-window-result-type":le.translateWindowResultType,"translate-type":le.translateType,"translate-replace-type":le.translateReplaceType,"source-text":d.sourceText,"translate-result":M.value,"enable-show-label":!le.collapseBottom,"is-weakened-and-narrower":le.collapseBottom,"is-dragging":le.isDragging,"target-language-prop":d.targetLanguage,"is-near-bottom":le.isNearBottom,"report-page-name":le.reportPageName,onRewrite:Se[0]||(Se[0]=Ge=>Ne(j(V).IMPROVE_WRITE)),onReplace:ke,onTargetLanguageChange:Se[1]||(Se[1]=Ge=>m("targetLanguageChange",Ge)),onCopy:gt},null,8,["translate-window-result-type","translate-type","translate-replace-type","source-text","translate-result","enable-show-label","is-weakened-and-narrower","is-dragging","target-language-prop","is-near-bottom","report-page-name"])),[[qt,!ee.value&&(de.value||!le.collapseBottom)&&!ge.value&&!O.value&&le.userInfoRefreshed]]):ve("",!0),fe(Fr,{name:"fade-in"},{default:ft(()=>[K.value?(B(),re("div",yh,ce(j(b)("explain.disableTip")),1)):ve("",!0)]),_:1})],64))}}),To=at(Ah,[["__scopeId","data-v-02afd352"]]),Ch={class:"translate-window-up-bottom-result-wrapper"},Sh={class:"translate-window-bottom-result-wrapper"},Dh=je({__name:"TranslateWindowTwoResults",props:yn({upTranslateType:{},bottomTranslateType:{},sourceText:{},service:{},targetLanguage:{},isUpResultCollapsed:{type:Boolean},translateReplaceType:{},userInfoRefreshed:{type:Boolean},isDragging:{type:Boolean},reportPageName:{},hasManuallyAdjustedWindowHeight:{type:Boolean}},{upOutputText:{required:!1,default:""},upOutputTextModifiers:{},showActionBar:{type:Boolean,required:!1,default:!1},showActionBarModifiers:{}}),emits:yn(["replace","openModelSelect","switchService","targetLanguageChange"],["update:upOutputText","update:showActionBar"]),setup(t,{expose:e,emit:n}){const r=n,a=t,i=Xn(t,"upOutputText"),s=C(""),o=C(),l=C(),c=C(),u=C(),f=C("done"),h=C(ze.SUCCESS),b=C(!1),S=C(!1),x=C(!1),N=C(!1),_=Xn(t,"showActionBar"),E=C(Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT),g=C(Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT);let p=null;const m=Z(()=>{if(a.bottomTranslateType===V.NONE)return!1;const A=l.value;if(!A)return!1;const D=A.resultError,y=A.resultLoading,F=A.translateTypeNotSupport;return!D&&!y&&!F}),d=()=>{var A;(A=l.value)==null||A.onReImproveWriteClick(a.bottomTranslateType)},J=()=>{var D;const A=(D=l.value)==null?void 0:D.getPureTranslateResult();A&&r("replace",A)},q=()=>{var D;const A=(D=l.value)==null?void 0:D.getPureTranslateResult();A&&us(A)},W=(A,D=ze.SUCCESS)=>{f.value=A,h.value=D};Te([f,()=>a.upTranslateType,()=>a.bottomTranslateType,()=>a.userInfoRefreshed],()=>{if(!a.userInfoRefreshed)return!1;a.upTranslateType!==V.NONE&&a.bottomTranslateType===V.NONE&&f.value!=="done"?_.value=!1:_.value=!0},{immediate:!0}),Te([()=>a.bottomTranslateType,()=>a.upTranslateType],([A,D],[y])=>{if(a.hasManuallyAdjustedWindowHeight||!c.value||!o.value)return;const F=c.value.clientHeight;y===V.NONE&&A!==V.NONE&&ht(()=>{setTimeout(()=>{const G=Je.TRANSLATE_WINDOW_RESULT_GAP;g.value=F+20-(E.value+G)-G},0)}),y!==V.NONE&&A===V.NONE&&D!==V.NONE&&(E.value=F,g.value=Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT)});const oe=()=>{!u.value||!c.value||(p=new IntersectionObserver(A=>{A.forEach(D=>{x.value=D.isIntersecting})},{root:c.value,rootMargin:"20px 0px 0px 0px",threshold:0}),p.observe(u.value))},Y=()=>{p&&(p.disconnect(),p=null)};let H=null;return Te(()=>a.service,A=>{if(H===null){H=A;return}if(a.bottomTranslateType===V.NONE){H=A;return}Mn(H)&&!Mn(A)&&(b.value=!0),H=A},{immediate:!0}),Te(()=>a.bottomTranslateType,(A,D)=>{D===V.NONE&&(A===V.EXPLAIN||A===V.IMPROVE_WRITE)&&(b.value=!1)}),Te([()=>a.upTranslateType,()=>a.bottomTranslateType,()=>a.targetLanguage,()=>a.service],()=>{N.value=!1}),Bt(async()=>{await rt(Ee.TRANSLATE_WINDOW_RESULT_MORE_TOOLS_CLICK)||(S.value=!0),oe()}),_r(()=>{Y()}),Xu("translateWindowState",{showRewriteExceedLimitTip:N,updateShowRewriteExceedLimitTip:A=>{N.value=A},moreToolsRedHotShow:S,updateMoreToolsRedHotShow:A=>{S.value=A},getReportClickItemName:(A,D,y)=>D==="up"?A:y===V.EXPLAIN?`explain_tab_${A}`:y===V.IMPROVE_WRITE?`improve_writing_tab_${A}`:y===V.TRANSLATE?`translate_tab_${A}`:A}),e({translateWindowResultRef:o,translateWindowExplainRef:l,scrollContainerRef:c,upResultHeight:E,bottomResultHeight:g}),(A,D)=>(B(),re("div",Ch,[T("div",{class:"translate-window-up-bottom-result-scroll-content",ref_key:"scrollContainerRef",ref:c},[fe(To,{ref_key:"translateWindowResultRef",ref:o,"translate-type":A.upTranslateType,"translate-window-result-type":"up","dependent-service-status":"done","source-text":A.sourceText,"output-text":i.value,"onUpdate:outputText":D[0]||(D[0]=y=>i.value=y),service:A.service,"target-language":A.targetLanguage,"collapse-bottom":A.isUpResultCollapsed,"translate-replace-type":A.translateReplaceType,"user-info-refreshed":A.userInfoRefreshed,"is-dragging":A.isDragging,"is-near-bottom":x.value,"is-another-result-show":A.bottomTranslateType!==j(V).NONE,"report-page-name":A.reportPageName,"show-action-bar":_.value,"result-area-height":E.value,"onUpdate:resultAreaHeight":D[1]||(D[1]=y=>E.value=y),onReplace:D[2]||(D[2]=y=>r("replace",y)),onOpenModelSelect:D[3]||(D[3]=y=>r("openModelSelect")),onResultStatusChanged:W,onSwitchService:D[4]||(D[4]=y=>r("switchService",y))},null,8,["translate-type","source-text","output-text","service","target-language","collapse-bottom","translate-replace-type","user-info-refreshed","is-dragging","is-near-bottom","is-another-result-show","report-page-name","show-action-bar","result-area-height"]),Wt(T("div",Sh,[fe(To,{ref_key:"translateWindowExplainRef",ref:l,"translate-type":A.bottomTranslateType,"translate-window-result-type":"bottom","dependent-service-status":f.value,"dependent-service-error-code":h.value,"source-text":i.value,"result-area-height":g.value,"onUpdate:resultAreaHeight":D[5]||(D[5]=y=>g.value=y),"output-text":s.value,"onUpdate:outputText":D[6]||(D[6]=y=>s.value=y),service:A.service,"target-language":A.targetLanguage,"translate-replace-type":A.translateReplaceType,"user-info-refreshed":A.userInfoRefreshed,"show-footer":!1,"is-dragging":A.isDragging,"prevent-auto-switch":b.value,"is-another-result-show":A.upTranslateType!==j(V).NONE,"report-page-name":A.reportPageName,onTargetLanguageChange:D[7]||(D[7]=y=>r("targetLanguageChange",y)),onReplace:D[8]||(D[8]=y=>r("replace",y)),onOpenModelSelect:D[9]||(D[9]=y=>r("openModelSelect")),onSwitchService:D[10]||(D[10]=y=>r("switchService",y))},null,8,["translate-type","dependent-service-status","dependent-service-error-code","source-text","result-area-height","output-text","service","target-language","translate-replace-type","user-info-refreshed","is-dragging","prevent-auto-switch","is-another-result-show","report-page-name"])],512),[[qt,A.bottomTranslateType!==j(V).NONE]]),T("div",{ref_key:"bottomSentinelRef",ref:u,class:"bottom-sentinel"},null,512)],512),Wt(fe(Dl,{"translate-window-result-type":"bottom","translate-type":A.bottomTranslateType,"translate-replace-type":A.translateReplaceType,"source-text":i.value,"translate-result":s.value,"enable-show-label":!0,"is-weakened-and-narrower":!1,"is-dragging":A.isDragging,"is-near-bottom":x.value,"target-language-prop":A.targetLanguage,"show-language-select":A.bottomTranslateType===j(V).TRANSLATE,"report-page-name":A.reportPageName,onRewrite:d,onReplace:J,onCopy:q,onTargetLanguageChange:D[11]||(D[11]=y=>r("targetLanguageChange",y))},null,8,["translate-type","translate-replace-type","source-text","translate-result","is-dragging","is-near-bottom","target-language-prop","show-language-select","report-page-name"]),[[qt,m.value]])]))}}),Lh=at(Dh,[["__scopeId","data-v-b96c7970"]]),La=8;function Ih(t){const{containerRef:e,headerWrapperRef:n,scrollContainerRef:r,dragZoneRef:a,showLeftDragZone:i=!1,minWidth:s=Je.TRANSLATE_WINDOW_MIN_WIDTH,minHeight:o=Je.TRANSLATE_WINDOW_MIN_HEIGHT,initialWidth:l=Je.TRANSLATE_WINDOW_INITIAL_WIDTH,initialHeight:c,disabled:u=C(!1),onResize:f,onPositionChange:h,isDragging:b}=t,S=C(l),x=C(c||null),N=C(!1),_=C(null),E=D=>{const y=r==null?void 0:r.value;if(!y||!e.value||!(y.scrollHeight>y.clientHeight))return!1;const G=y.offsetWidth-y.clientWidth;if(G<=0)return!1;const K=y.getBoundingClientRect();if(!(D.clientY>=K.top&&D.clientY<=K.bottom))return!1;const ne=K.right-G;return D.clientX>=ne&&D.clientX<=K.right},g=(D,y,F)=>Math.max(y,Math.min(F,D)),p=D=>{var O;if(!e.value||u.value||E(D))return null;const y=e.value.getBoundingClientRect(),F=D.clientX-y.left,G=D.clientY-y.top,K=y.width,de=y.height,ne=i&&((O=a==null?void 0:a.value)==null?void 0:O.clientWidth)||0,we=F>ne&&F<=ne+La,Q=F>=K-La,Le=G<=La,ie=G>=de-La;return we&&Le?"top-left":Q&&Le?"top-right":we&&ie?"bottom-left":Q&&ie?"bottom-right":we?"left":Q?"right":Le?"top":ie?"bottom":null};let m=0;const d=16,J=D=>{if(!e.value||u.value)return;const y=Date.now();if(y-m<d&&!N.value)return;m=y;const F=p(D);let G="";switch(F){case"bottom-right":case"top-left":G="nwse-resize";break;case"top-right":case"bottom-left":G="nesw-resize";break;case"right":case"left":G="ew-resize";break;case"bottom":case"top":G="ns-resize";break;default:G=""}e.value.style.cursor=G,F&&(n!=null&&n.value)?n.value.style.cursor=G:!F&&(n!=null&&n.value)&&(n.value.style.cursor="grab")},q=(D,y)=>{if(u.value||!y||!e.value)return;D.preventDefault(),D.stopPropagation(),N.value=!0,_.value=y;const F=e.value.getBoundingClientRect(),G=D.clientX,K=D.clientY,de=F.width,ne=F.height,we=F.left,Q=F.top,Le=F.right,ie=F.bottom,O=ee=>{if(!N.value||!e.value)return;const Ae=ee.clientX-G,Re=ee.clientY-K,Ue=window.innerWidth,pe=window.innerHeight,ge=Je.TRANSLATE_WINDOW_EDGE_GAP,qe=e.value.getBoundingClientRect().left,Ye=Ue-qe-ge,wt=Le-ge,dt=pe-Q-ge,We=ie-ge,ke=Q-ge,gt=y==="right"||y==="bottom-right"||y==="top-right",et=y==="left"||y==="bottom-left"||y==="top-left",Be=y==="bottom"||y==="bottom-right"||y==="bottom-left",Ne=y==="top"||y==="top-left"||y==="top-right";let Qe=de,ae=ne,be=we,Oe=Q;if(gt?Qe=g(de+Ae,s,Ye):et&&(Qe=g(de-Ae,s,wt),be=we+(de-Qe)),Be)ae=g(ne+Re,o,dt);else if(Ne){const le=Math.max(-ke,Re);ae=g(ne-le,o,We),Oe=Q+(ne-ae)}S.value=Qe,x.value=ae,(be!==we||Oe!==Q)&&h&&h(be,Oe),["bottom","bottom-right","top","top-left","top-right","bottom-left"].includes(y)?f==null||f(Qe,ae):f==null||f(Qe)},M=()=>{N.value=!1,_.value=null,e.value&&(e.value.style.cursor=""),n!=null&&n.value&&(n.value.style.cursor="grab"),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",M)},W=()=>{S.value=l,x.value=c||null},oe=(D,y)=>{S.value=Math.max(s,D),y!==void 0&&(x.value=Math.max(o,y))},Y=D=>{if(!N.value){if(b!=null&&b.value){e.value&&(e.value.style.cursor="grabbing"),n!=null&&n.value&&(n.value.style.cursor="grabbing");return}J(D)}},H=()=>{N.value||b!=null&&b.value||(e.value&&(e.value.style.cursor=""),n!=null&&n.value&&(n.value.style.cursor="grab"))},X=D=>{const y=p(D);y&&(D.stopPropagation(),q(D,y))},A=()=>{if(!e.value||u.value||N.value)return;const D=window.innerWidth,y=window.innerHeight,F=Je.TRANSLATE_WINDOW_EDGE_GAP,G=e.value.getBoundingClientRect(),K=G.left,de=G.top,ne=S.value,we=x.value??G.height;let Q=ne,Le=we,ie=!1;const O=D-F*2;ne>O?(Q=Math.max(s,O),ie=!0):ne<s&&(Q=s,ie=!0);const M=y-F*2;we>M?(Le=Math.max(o,M),ie=!0):we<o&&(Le=o,ie=!0);let ee=K,Ae=de;K+Q>D-F&&(ee=D-F-Q,ee=Math.max(F,ee),ie=!0),ee<F&&(ee=F,ie=!0),de+Le>y-F&&(Ae=y-F-Le,Ae=Math.max(F,Ae),ie=!0),Ae<F&&(Ae=F,ie=!0),ie&&(S.value=Q,x.value=Le,h&&(ee!==K||Ae!==de)&&h(ee,Ae),f==null||f(Q,Le))};return Bt(()=>{e.value&&(e.value.addEventListener("mousemove",Y),e.value.addEventListener("mouseleave",H),e.value.addEventListener("mousedown",X)),window.addEventListener("resize",A)}),_r(()=>{e.value&&(e.value.removeEventListener("mousemove",Y),e.value.removeEventListener("mouseleave",H),e.value.removeEventListener("mousedown",X)),window.removeEventListener("resize",A)}),{windowWidth:S,windowHeight:x,isResizing:N,resizeDirection:_,resetSize:W,setSize:oe,getResizeDirection:p,handleResizeStart:q}}const Rh={class:"translate-window-content-zone"},Nh=je({__name:"TranslateWindow",props:yn({sourceText:{},top:{},left:{},showLeftDragZone:{type:Boolean},translateReplaceType:{}},{upTranslateType:{required:!1,default:V.TRANSLATE},upTranslateTypeModifiers:{}}),emits:yn(["close","alwayCloseConfirm","replace"],["update:upTranslateType"]),setup(t,{emit:e}){const{contentScriptRefreshUserInfo:n}=St(),r=e,{userSettings:a,notifyUserSettings:i}=pt(),{setNoLoginTranslateUseCount:s,showLoginTipGuid:o,selectTextLoginTipShow:l}=va(),{checkBoundary:c}=Qo({margin:2}),{clearTranslateResultCachedMap:u}=Cl(),{resetExplainImproveWrite:f}=Vr(),{buyDialogShow:h,refreshPaymentDialogShow:b}=vn(),S=C(),x=C(),N=C(),_=C(),E=C(a.value.translationService),g=tt("loginTipRef"),p=C({position:"absolute",top:"calc(100% + 8px)"}),m=C(!1),d=C(!1),J=C(""),q=C("plugin_select_to_translate_page||translate"),W=C(!1),oe=C(Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT),Y=C(Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT),H=C(Je.TRANSLATE_WINDOW_INITIAL_WIDTH),X=C(!1),A=C(null),D=t,y=C(),F=C(D.translateReplaceType===_t.OPEN_MODAL?a.value.textboxTranslation.targetLanguage:a.value.targetLanguage),G=Xn(t,"upTranslateType"),K=C(V.NONE),de=Z(()=>{var ae;return(ae=x.value)==null?void 0:ae.translateWindowResultRef}),ne=Z(()=>{var ae;return(ae=x.value)==null?void 0:ae.translateWindowExplainRef}),we=Z(()=>{var w,I,U,P,z,se,me,xe;if(!m.value)return!0;const ae=(w=de.value)==null?void 0:w.value;if(!ae)return!1;const be=(I=ae.resultError)==null?void 0:I.value,Oe=(U=ae.resultLoading)==null?void 0:U.value,Ze=(P=ae.translateTypeNotSupport)==null?void 0:P.value;if(Oe&&!be&&!Ze)return!0;const le=K.value!==V.NONE,Se=(z=ne.value)==null?void 0:z.value;if(!Se)return!1;const Ge=(se=Se.resultError)==null?void 0:se.value,Xe=(me=Se.resultLoading)==null?void 0:me.value,v=(xe=Se.translateTypeNotSupport)==null?void 0:xe.value;return!!(le&&Xe&&!Ge&&!v)}),Q=ae=>{var P;if(!y.value)return!1;const be=8,Oe=y.value.getBoundingClientRect(),Ze=ae.clientX-Oe.left,le=ae.clientY-Oe.top,Se=Oe.width,Ge=Oe.height,Xe=D.showLeftDragZone&&((P=N.value)==null?void 0:P.clientWidth)||0,v=Ze>Xe&&Ze<=Xe+be,w=Ze>=Se-be,I=le<=be,U=le>=Ge-be;return v||w||I||U},Le=C(!1),{windowX:ie,windowY:O,isDragging:M,initDragListeners:ee,dragState:Ae}=wl({initialX:D.left,initialY:D.top,containerRef:y,dragZoneRef:N,headerWrapperRef:_,isResizing:Le,isOnResizeEdge:Q}),{windowWidth:Re,windowHeight:Ue,isResizing:pe,resetSize:ge,getResizeDirection:Me,handleResizeStart:qe}=Ih({containerRef:y,headerWrapperRef:_,scrollContainerRef:Z(()=>{var ae;return(ae=x.value)==null?void 0:ae.scrollContainerRef}),dragZoneRef:N,showLeftDragZone:D.showLeftDragZone,initialWidth:Je.TRANSLATE_WINDOW_INITIAL_WIDTH,isDragging:M,onPositionChange:(ae,be)=>{var Ze;const Oe=((Ze=N.value)==null?void 0:Ze.clientWidth)||0;Ae.value.x=ae+(D.showLeftDragZone?Oe:0),Ae.value.y=be},onResize:(ae,be)=>{ht(()=>{var Oe;if(x.value){if(be!==void 0){X.value=!0,A.value=be;const Ze=(Oe=S.value)==null?void 0:Oe.$el,le=Ze?Ze.offsetHeight:0,Se=W.value?Je.TRANSLATE_WINDOW_ACTION_BAR_HEIGHT:0,Ge=be-le-Se;if(K.value===V.NONE){const Xe=Je.TRANSLATE_WINDOW_RESULT_MIN_HEIGHT,v=Je.TRANSLATE_WINDOW_RESULT_GAP;x.value.upResultHeight=Math.max(Xe,Ge-v)}else{const Xe=x.value.upResultHeight||oe.value,v=Ge-Xe-Je.TRANSLATE_WINDOW_RESULT_GAP;x.value.bottomResultHeight=Math.max(Je.TRANSLATE_WINDOW_RESULT_MIN_HEIGHT,v)}}ae!==H.value&&(H.value=ae)}})}}),Ye=Z(()=>{const ae={top:`${O.value}px`,left:`${ie.value}px`,width:`${Re.value}px`};return Ue.value!==null&&(ae.height=`${Ue.value}px`),ae});Te(l,ae=>{ae?ht(()=>{g.value&&c(g.value.$el,be=>{be&&(p.value.bottom="calc(100% + 8px)",p.value.top="")})}):(p.value.bottom="",p.value.top="calc(100% + 8px)")}),un(y,()=>{var ae;!((ae=S.value)!=null&&ae.secondConfirmShow)&&!h.value&&!b.value&&r("close")});const wt=ae=>{if(F.value=ae,D.translateReplaceType===_t.OPEN_MODAL){const be={...a.value.textboxTranslation};be.targetLanguage=ae,i({textboxTranslation:be})}else i({targetLanguage:ae})},dt=ae=>{E.value=ae},We=ae=>{ae!==V.NONE&&ae===G.value||(G.value=ae,d.value=!1,K.value=V.NONE,f())};Te(K,(ae,be)=>{switch(ae){case V.EXPLAIN:case V.IMPROVE_WRITE:case V.TRANSLATE:d.value=!0;break;case V.NONE:d.value=!1,V.NONE;break}}),Te([G,K],()=>{let ae="",be="",Oe="";switch(D.translateReplaceType){case _t.OPEN_MODAL:ae="plugin_textbox_page";break;default:ae="plugin_select_to_translate_page";break}switch(G.value){case V.TRANSLATE:be="||translate";break;case V.IMPROVE_WRITE:be="||improve_writing";break}switch(K.value){case V.NONE:Oe="";break;case V.EXPLAIN:Oe="||explain_tab";break;case V.IMPROVE_WRITE:Oe="||improve_writing_tab";break;case V.TRANSLATE:Oe="||translate_tab";break}const Ze=`${ae}${be}${Oe}`;k.reportShowEvent(Ze),q.value=`${ae}${be}`},{immediate:!0});const ke=ae=>{var be;(be=S.value)==null||be.toggleService(ae)},gt=()=>{var ae;(ae=S.value)==null||ae.openModelSelect()},et=ae=>{r("replace",ae)},Be=ae=>{if(Q(ae)){ae.stopPropagation();const be=Me(ae);be&&qe(ae,be);return}ae.preventDefault()},Ne=ae=>{if(Q(ae)){ae.stopPropagation();return}ae.preventDefault()},Qe=()=>{ge(),H.value=Je.TRANSLATE_WINDOW_INITIAL_WIDTH,oe.value=Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT,Y.value=Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT,X.value=!1,A.value=null,r("close")};return Te(we,ae=>{ae||ht(()=>{X.value?A.value!==null&&(Ue.value=A.value):Ue.value=null,x.value&&(oe.value=x.value.upResultHeight||Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT,Y.value=x.value.bottomResultHeight||Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT,H.value=Re.value)})}),Te(K,(ae,be)=>{X.value&&A.value!==null?(Ue.value=A.value,ht(()=>{var Xe;if(!x.value)return;const Oe=(Xe=S.value)==null?void 0:Xe.$el,Ze=Oe?Oe.offsetHeight:0,le=W.value?Je.TRANSLATE_WINDOW_ACTION_BAR_HEIGHT:0,Ge=(A.value??0)-Ze-le;if(ae===V.NONE&&be!==V.NONE){const v=Je.TRANSLATE_WINDOW_RESULT_MIN_HEIGHT,w=Je.TRANSLATE_WINDOW_RESULT_GAP;x.value.upResultHeight=Math.max(v,Ge-w),oe.value=x.value.upResultHeight||Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT}else if(ae!==V.NONE&&be===V.NONE){const v=x.value.upResultHeight||oe.value,w=Ge-v-Je.TRANSLATE_WINDOW_RESULT_GAP;x.value.bottomResultHeight=Math.max(Je.TRANSLATE_WINDOW_RESULT_MIN_HEIGHT,w),Y.value=x.value.bottomResultHeight||Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT}else if(ae!==V.NONE&&be!==V.NONE&&ae!==be){const v=x.value.upResultHeight||oe.value,w=Ge-v-Je.TRANSLATE_WINDOW_RESULT_GAP;x.value.bottomResultHeight=Math.max(Je.TRANSLATE_WINDOW_RESULT_MIN_HEIGHT,w)}H.value=Re.value})):ae===V.NONE&&be!==V.NONE?ht(()=>{x.value&&(oe.value=x.value.upResultHeight||Je.TRANSLATE_WINDOW_UP_RESULT_INITIAL_HEIGHT,H.value=Re.value)}):ae!==V.NONE&&be===V.NONE&&ht(()=>{x.value&&(Y.value=x.value.bottomResultHeight||Je.TRANSLATE_WINDOW_BOTTOM_RESULT_INITIAL_HEIGHT,H.value=Re.value)})}),Te(pe,ae=>{Le.value=ae},{immediate:!0}),Bt(async()=>{var ae;f(),ee(),await s(),o(Br.SELECT_TEXT),await n(),(ae=S.value)==null||ae.userInfoRefresh(),await ht(),m.value=!0}),_r(()=>{l.value=!1,u(),f()}),(ae,be)=>(B(),re("div",{class:"translate-window-container",style:De(Ye.value),ref_key:"containerRef",ref:y},[ae.showLeftDragZone?(B(),re("div",{key:0,class:"translate-window-drag-zone",onMousedown:Ne,ref_key:"dragZoneRef",ref:N},[fe(vt,{style:{width:"12px"},icon:"drag",size:20})],544)):ve("",!0),T("div",Rh,[T("div",{class:"translate-window-header-wrapper",onMousedown:Be,ref_key:"headerWrapperRef",ref:_},[fe(Xg,{ref_key:"translateWindowHeaderRef",ref:S,"translate-type":G.value,"show-target-language-input":G.value===j(V).TRANSLATE,"target-language-prop":F.value,"source-text":ae.sourceText,"user-info-refreshed":m.value,"report-page-name":q.value,"translate-replace-type":ae.translateReplaceType,onClose:Qe,onAlwayCloseConfirm:be[0]||(be[0]=Oe=>r("alwayCloseConfirm",Oe)),onTargetLanguageChange:wt,onServiceChange:dt,onFunctionChange:We},null,8,["translate-type","show-target-language-input","target-language-prop","source-text","user-info-refreshed","report-page-name","translate-replace-type"])],544),fe(Lh,{ref_key:"upBottomResultRef",ref:x,"up-translate-type":G.value,"bottom-translate-type":K.value,"has-manually-adjusted-window-height":X.value,"source-text":ae.sourceText,service:E.value,"target-language":F.value,"is-up-result-collapsed":d.value,"translate-replace-type":ae.translateReplaceType,"user-info-refreshed":m.value,"is-dragging":j(M)||j(pe),"up-output-text":J.value,"onUpdate:upOutputText":be[1]||(be[1]=Oe=>J.value=Oe),"show-action-bar":W.value,"onUpdate:showActionBar":be[2]||(be[2]=Oe=>W.value=Oe),"report-page-name":q.value,onClose:Qe,onReplace:et,onOpenModelSelect:gt,onSwitchService:ke,onTargetLanguageChange:wt},null,8,["up-translate-type","bottom-translate-type","has-manually-adjusted-window-height","source-text","service","target-language","is-up-result-collapsed","translate-replace-type","user-info-refreshed","is-dragging","up-output-text","show-action-bar","report-page-name"]),Wt(fe(kg,{"translate-type":K.value,"onUpdate:translateType":be[3]||(be[3]=Oe=>K.value=Oe),"show-explain":!0,"show-improve-write":G.value!==j(V).IMPROVE_WRITE,"show-translate":G.value!==j(V).TRANSLATE,"report-page-name":q.value},null,8,["translate-type","show-improve-write","show-translate","report-page-name"]),[[qt,W.value]])]),j(l)?(B(),Fe(ai,{key:1,source:"plugin_select_to_translate_login_guide_page",ref_key:"loginTipRef",ref:g,onClose:be[4]||(be[4]=Oe=>l.value=!1),style:De(p.value)},null,8,["style"])):ve("",!0)],4))}}),Ll=at(Nh,[["__scopeId","data-v-0f5409bb"]]),kh=["dir"],Bh="plugin_googledocs_integration_select_to_translate_page",Oh=je({__name:"googleDocsTranslateBall",setup(t){const{locale:e}=Tt(),{setGoogleDocsAnalysis:n,resetGoogleDocsAnalysis:r}=or(),a=C({position:"fixed",top:"0px",left:"0px",zIndex:1000000010,display:"none"}),i=C(!1),s=C(!1);let o=null,l=null,c=null,u=null,f=null,h=null;const b=Z(()=>dn(e.value)?"rtl":"ltr"),S=async()=>{var d;const m=document.querySelector(ln.translateAnchorSelector);if(m&&m instanceof HTMLElement){if(!Bl().trim()){i.value=!1;return}const q=m.getBoundingClientRect(),W={top:q.top,left:q.left};if(!l||l.top!==W.top||l.left!==W.left||!i.value){l=W,i.value=!0;const Y=10,H=Je.INPUT_TRANSLATE_BALL_CONTENT_NORMAL_WIDTH,X=Je.INPUT_TRANSLATE_BALL_CONTENT_FOUR_ICON_WIDTH;let A=q.bottom+Y;A+H+Y>window.innerHeight&&(q.top>window.innerHeight?A=window.innerHeight-X-Y:A=q.top-H-Y);const{top:D}=((d=document.querySelector(".kix-appview-editor-container"))==null?void 0:d.getBoundingClientRect())||{};A&&D&&A<D&&(A=D+Y),a.value={position:"fixed",left:`${q.left+37}px`,zIndex:1000000010,top:`${A}px`}}}else i.value=!1,l=null},x=()=>{f!==null&&window.clearTimeout(f),f=window.setTimeout(()=>{S(),f=null},200)},N=()=>{h!==null&&(window.clearTimeout(h),h=null),h=window.setTimeout(()=>{x()},1e3)},_=()=>{x()},E=()=>{const m=document.querySelector(ln.translateAnchorSelector);if(!m)return;c=x,window.addEventListener("scroll",c,!0),u=x,window.addEventListener("resize",u),o=new MutationObserver(J=>{const q=document.querySelector(ln.translateAnchorSelector);if(!q){g(),i.value=!1;return}if(q!==m){g(),setTimeout(()=>{S(),E()},0);return}J.some(oe=>oe.type==="attributes"&&oe.attributeName==="style")&&x()}),m instanceof HTMLElement&&o.observe(m,{attributes:!0,attributeFilter:["style"]});const d=m.parentElement||document.body;o.observe(d,{childList:!0,subtree:!0}),window.addEventListener("mousedown",N),window.addEventListener("mouseup",_)},g=()=>{o&&(o.disconnect(),o=null),c&&(window.removeEventListener("scroll",c,!0),c=null),u&&(window.removeEventListener("resize",u),u=null),f!==null&&(window.clearTimeout(f),f=null),l=null,h=null,window.removeEventListener("mousedown",N),window.removeEventListener("mouseup",_)},p=()=>{s.value=!1};return Te(s,m=>{m?k.reportShowEvent("googledocs_select_to_translate_user_guide",{position:Bh}):(mt(Ee.GOOGLE_DOCS_IMPROVE_WRITE_DEFAULT_TIP_SHOW,!0),document.removeEventListener("mousedown",p,!0))}),Te(i,async m=>{m?await rt(Ee.GOOGLE_DOCS_IMPROVE_WRITE_DEFAULT_TIP_SHOW)||(document.addEventListener("mousedown",p,!0),s.value=!0):document.removeEventListener("mousedown",p,!0)}),Bt(()=>{S(),E(),n()}),Un(()=>{g(),l=null,r()}),(m,d)=>i.value?(B(),re("div",{key:0,dir:b.value,class:"wps-translate-google-docs-translation-ball-wrapper",style:De(a.value)},[fe(Ol,{orientation:"vertical","show-improve-write-tip":s.value,"onUpdate:showImproveWriteTip":d[0]||(d[0]=J=>s.value=J)},null,8,["show-improve-write-tip"])],12,kh)):ve("",!0)}}),Ph=["dir"],Fh=["src"],Mh={class:"banner-content"},Uh={class:"header-section"},$h=["src"],qh={class:"title"},Wh=["src"],Gh={class:"feature-text"},Hh={class:"bottom-section"},Vh={class:"enable-text"},zh={key:1,class:"google-docs-setting-btn-red-hot"},wo="Google Docs",jh=je({__name:"SettingBtn",setup(t){const{locale:e,t:n}=Tt(),{contentScriptRefreshUserInfo:r}=St(),{userSettings:a,getSettingByKey:i,notifyUserSettings:s}=pt();let o=null,l=null,c=null,u=null,f=-1;const h=C(!1),b=Z(()=>dn(e.value)?"rtl":"ltr"),S=Z(()=>a.value.integrations[Dn.GOOGLE_DOCS].enable?"on":"off"),x=tt("popupContainerRef"),N=tt("containerRef"),_=tt("logoRef"),E=C(!1),g=C(a.value.integrations[Dn.GOOGLE_DOCS].enable),p=Z(()=>[{id:1,text:n("integration.googleDocs.feature1")},{id:2,text:n("integration.googleDocs.feature2")}]);function m(){E.value=!E.value,h.value=!1,mt(Ee.GOOGLE_DOCS_GUID_SHOW,!0),r(),k.reportIntergratedClickEvent("translate_settings_icon",{func_type:"googledocs",position:"other"})}function d(){E.value=!1}function J(H){const X=i("integrations");X[Dn.GOOGLE_DOCS].enable=H,s({integrations:X}),H?k.reportIntergratedClickEvent("open_translate_settings_popup",{func_type:"googledocs",position:"other"}):k.reportIntergratedClickEvent("close_translate_settings_popup",{func_type:"googledocs",position:"other"})}function q(H){const X=H,{open:A}=X.detail||{};typeof A=="boolean"&&(E.value=A)}function W(){for(let H=0;H<ln.btnAnchorSelectors.length;H++){const X=ln.btnAnchorSelectors[H],A=document.querySelector(X);if(A)return f=H,A}return f=-1,null}function oe(){const H=c||W(),X=N.value;if(!H||!X||f<0)return;const A=H.getBoundingClientRect();if(X.style.top=`${A.top}px`,ln.btnAppendMethods[f]===$r.INSERT_AFTER){const D=A.right+15;X.style.left=`${D}px`}else if(ln.btnAppendMethods[f]===$r.INSERT_BEFORE){const D=A.left-X.offsetWidth+15;X.style.left=`${D}px`}X.style.height=`${H.offsetHeight}px`}function Y(){if(c=W(),!c){const H=new MutationObserver(()=>{const X=W();X&&(c=X,H.disconnect(),Y())});return H.observe(document.body,{childList:!0,subtree:!0}),()=>{H.disconnect()}}return oe(),o=new MutationObserver(()=>{oe()}),o.observe(c,{attributes:!0,attributeFilter:["style","class"],childList:!0,subtree:!0}),l=new ResizeObserver(()=>{oe()}),l.observe(c),l.observe(document.documentElement),()=>{o&&(o.disconnect(),o=null),l&&(l.disconnect(),l=null),c=null}}return Te(a,(H,X)=>{H.integrations[Dn.GOOGLE_DOCS].enable!==X.integrations[Dn.GOOGLE_DOCS].enable&&(g.value=H.integrations[Dn.GOOGLE_DOCS].enable,H.integrations[Dn.GOOGLE_DOCS].enable?ln.disableFunction=ln.enableFunction():ln.disableFunction())},{deep:!0}),Te(E,H=>{H&&k.reportIntergratedShowEvent("googledocs_select_to_translate_popup",{status:S.value,func_type:"googledocs",position:"other"})}),Bt(async()=>{u=Y(),window.addEventListener(Ie.OPEN_GOOGLE_DOCS_SETTING_PANEL,q),await rt(Ee.GOOGLE_DOCS_GUID_SHOW)||(h.value=!0)}),_r(()=>{window.removeEventListener(Ie.OPEN_GOOGLE_DOCS_SETTING_PANEL,q),u&&(u(),u=null)}),un(x,()=>{E.value=!1},{ignore:[_]}),(H,X)=>(B(),re("div",{dir:b.value,ref_key:"containerRef",ref:N,class:"google-docs-setting-container anydoc-translate-ignore"},[T("div",{class:"google-docs-setting-btn",ref_key:"logoRef",ref:_},[T("img",{ref_key:"logoRef",ref:_,onClick:m,style:{width:"24px",height:"24px",cursor:"pointer"},src:j(cn)("logo/icon-128.png")},null,8,Fh)],512),E.value?(B(),re("div",{key:0,ref_key:"popupContainerRef",ref:x,style:De(j(nn)()?"left: 13px;":"right: 13px;"),class:"google-docs-welcome-banner"},[T("div",Mh,[T("div",Uh,[T("img",{src:j(cn)("logo/icon-128.png"),style:{width:"18px",height:"18px"}},null,8,$h),T("div",qh,ce(H.$t("integration.googleDocs.welcome",[wo])),1),fe(jt,{class:"close-button",icon:"close",size:24,onClick:d})]),T("div",null,[(B(!0),re(kt,null,rn(p.value,A=>(B(),re("div",{key:A.id,class:"feature-item"},[T("img",{src:j(cn)("images/check.png"),style:{width:"16px",height:"16px"}},null,8,Wh),T("div",Gh,ce(A.text),1)]))),128))])]),X[1]||(X[1]=T("div",{class:"separator"},null,-1)),T("div",Hh,[T("div",Vh,ce(H.$t("integration.mail.enable",[wo])),1),fe(is,{modelValue:g.value,"onUpdate:modelValue":X[0]||(X[0]=A=>g.value=A),onChange:J},null,8,["modelValue"])])],4)):ve("",!0),h.value?(B(),re("div",zh)):ve("",!0)],8,Ph))}}),Il=at(jh,[["__scopeId","data-v-9d036124"]]),{googleDocsTranslateBallShow:Rl,googleDocsSettingBtnShow:Yh,canUndoGoogleDocs:Nl}=or(),Xh="wps-translate-google-docs-translation-button",Kh="docs-texteventtarget-iframe";let Nr=null,kr=null,aa="";function si(){var e;const t=document.querySelector(`.${Kh}`);return t?{iframe:t.contentWindow,editableElement:((e=t.contentWindow)==null?void 0:e.document.querySelector("[contenteditable=true]"))||null}:{iframe:null,editableElement:null}}const Qh=()=>{const{editableElement:t,iframe:e}=si();if(!t||!e)throw new Error("no_element");const n=new e.ClipboardEvent("copy",{bubbles:!0,clipboardData:new e.DataTransfer});t.dispatchEvent(n)},Zh=()=>{const{editableElement:t,iframe:e}=si();if(!t||!e)throw new Error("no_element");const n=new e.KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"z",code:"KeyZ",ctrlKey:!Js(),metaKey:Js(),shiftKey:!1});t.dispatchEvent(n)},kl=t=>[16,17,18,28].includes(t.charCodeAt(0)),Jh=t=>{let e="",n="",r="",a=!0;for(const i of t){if(a){const s=r[r.length-1];if(i==="<"&&r.length===0){r="<";continue}if(i===">"&&r.length>0&&s.match(/\d/)){e=`${e}${r}>`,r="";continue}if(i==="a"&&r.length>0&&s==="<"){r+="a";continue}if(i.match(/\d/)&&r.length>0&&(s==="a"||s.match(/\d/))){r+=i;continue}if(kl(i)&&r.length===0){e+=i;continue}a=!1,r=""}n+=i}return{processedLine:n,leadingEntities:e}},em=t=>{let e="",n="",r="",a=!0;for(const i of t.split("").reverse()){if(a){if(i===">"&&r.length===0){r=">";continue}if(i==="<"&&r.length>0&&r[0]==="a"){e=`<${r}${e}`,r="";continue}if(i==="a"&&r.length>0&&r[0].match(/\d/)){r=`a${r}`;continue}if(i.match(/\d/)&&r.length>0&&(r[0]===">"||r[0].match(/\d/))){r=`${i}${r}`;continue}if(kl(i)&&r.length===0){e=`${i}${e}`;continue}a=!1,r=""}n=`${i}${n}`}return{processedLine:n,trailingEntities:e}},tm=t=>{const{leadingEntities:e,processedLine:n}=Jh(t),{trailingEntities:r,processedLine:a}=em(n);return{leading:e,trailing:r,processedLine:a}},bo=t=>{var n;if(!t.clipboardData){Nr=null,kr=null,aa="";return}const e=t.clipboardData.getData("application/x-vnd.google-docs-document-slice-clip+wrapped");if(!e){Nr=null,kr=null,aa="";return}try{const r=JSON.parse(e),a=JSON.parse(r.data).resolved,i=[],s=[];for(let f=0;f<a.dsl_spacers.length;f++){const h=a.dsl_spacers[f],b=[];for(const S of a.dsl_styleslices)if(((n=S.stsl_styles)==null?void 0:n.length)>0&&S.stsl_styles[f]){const x=`a${i.length+1}`;i.push({entity_type:S.stsl_type,entity_abbreviation:x,entity:S.stsl_styles[f]}),b.push(`<${x}>`)}s.push(b.join("")+h)}const o=s.join(""),l=[],c=o.split(`
`).map(f=>{const h=f.replace(/<a\d+>/g,"").trim().length>0;if(h){const{leading:b,trailing:S,processedLine:x}=tm(f);return l.push(x),{isTranslatable:h,index:l.length-1,leading:b,trailing:S}}return{isTranslatable:h,line:f}}),u={textLines:l,entities:i,contentReference:c,originalObject:r,originalText:a.dsl_spacers};Nr=u.entities,kr=u.originalObject,aa=u.originalText}catch{Nr=null,kr=null,aa=""}};function Bl(){const{editableElement:t}=si();return t&&t.addEventListener("copy",bo),Qh(),setTimeout(()=>{t&&t.removeEventListener("copy",bo)},30),aa}function nm(t){Nl.value=!0,rm(t)}function rm(t=""){!t||!Nr||!kr||sm({entities:Nr,text:t,originalObject:kr})}function am({entities:t,text:e,originalObject:n}){const r=JSON.parse(n.data),a=r.resolved.dsl_styleslices.map(o=>{const l=t.filter(h=>h.entity_type===o.stsl_type);if(l.length===0)return o;const c={};let u=0;l.forEach(h=>{h.new_position!==void 0&&(u=h.new_position>u?h.new_position:u,c[`${h.new_position}`]=h.entity)});const f=[];for(let h=0;h<=u;h++)f.push(c[`${h}`]||null);return{...o,stsl_styles:f}}),i={...r.resolved,dsl_spacers:e,dsl_styleslices:a},s={...n,data:JSON.stringify({...r,resolved:i})};return JSON.stringify(s)}function im(t){const{editableElement:e}=si();if(!e)return;const n="application/x-vnd.google-docs-document-slice-clip+wrapped",r=new DataTransfer;r.setData(n,t);const a=new ClipboardEvent("paste",{bubbles:!0,clipboardData:r});e.dispatchEvent(a)}function sm({entities:t,text:e,originalObject:n}){const r=am({entities:t,text:e,originalObject:n});im(r)}async function om(t){const{translateBallAnchorElement:e}=await um(t);e&&(Rl.value=!0)}function lm(){Rl.value=!1}async function um(t,e=6e4){let n=0;const r=2e3,a=Math.ceil(e/r);let i=null,s=null;for(;n<a&&(i=document.querySelector(t.btnAnchorSelectors[0]),s=document.querySelector(t.translateAnchorSelector),!(i&&s));)await new Promise(o=>setTimeout(o,r)),n++;return{btnAnchorElement:i,translateBallAnchorElement:s}}async function cm(){Yh.value=!0}function dm(t){t.enableFunction=()=>(t.disableFunction(),om(ln),()=>{lm()})}function pm(t){ma()||location.href.match(ln.pattern)&&(sr(Xh,Il),cm(),dm(ln),t.integrations[Dn.GOOGLE_DOCS].enable&&(ln.disableFunction=ln.enableFunction()))}function xo(){var e;const t=(e=document.querySelector(".docs-ruler-indent-start"))==null?void 0:e.getBoundingClientRect();return t==null?void 0:t.left}function fm(){Zh(),Nl.value=!1}const gm={class:"input-translate-ball-tips-content"},hm={class:"input-translate-ball-tips-icon-wrapper"},mm=["src"],yo=80,vm=je({__name:"InputTranslateBall",props:yn({orientation:{default:"horizontal"}},{showImproveWriteTip:{type:Boolean,default:!1},showImproveWriteTipModifiers:{}}),emits:yn(["close"],["update:showImproveWriteTip"]),setup(t,{expose:e,emit:n}){Ko($=>({"6344a9e8":u,"99c2986e":S,e80239e6:b,"37e28ee6":h}));const r=t,a=Xn(t,"showImproveWriteTip"),{googleDocsIntegrationShow:i,canUndoGoogleDocs:s}=or(),o=i.value,l=Je.INPUT_TRANSLATE_BALL_CONTENT_NORMAL_HEIGHT,c=Je.INPUT_TRANSLATE_BALL_CONTENT_NORMAL_WIDTH,u=`${Je.INPUT_TRANSLATE_BALL_CONTENT_NORMAL_WIDTH}px`,h=`${o?Je.INPUT_TRANSLATE_BALL_CONTENT_FOUR_ICON_WIDTH:Je.INPUT_TRANSLATE_BALL_CONTENT_HOVER_WIDTH}px`,b=`${Je.INPUT_TRANSLATE_BALL_CONTENT_LOADING_WIDTH}px`,S=`${l}px`,{improveWriteDone:x,improveWriteText:N,improveWriteError:_,improveWriteErrorCode:E,getCurrentRequestId:g,setCurrentRequestId:p,getRecommendImproveWriteStyles:m,resetUsedImproveWriteStyles:d}=Vr(),{userInfo:J,contentScriptRefreshUserInfo:q}=St(),{userSettings:W,notifyUserSettings:oe}=pt(),{onlineParams:Y}=an(),{setNoLoginTranslateUseCount:H,textBoxLoginTipShow:X,showLoginTipGuid:A,checkLoginTipShow:D}=va(),{t:y,locale:F}=Tt(),{setPluginUseTime:G}=qr(),{buyDialogShow:K,refreshPaymentDialogShow:de}=vn(),{skuInfo:ne}=gs(),we=n;let Q=null,Le=[],ie=null,O=null,M=!1,ee=!1,Ae=!1,Re="",Ue="",pe=null,ge=!1,Me="",qe=!1,Ye=null,wt=-1,dt=-1;const We=tt("containerRef"),ke=tt("ballContentContainer"),gt=tt("popupContainerRef"),et=tt("secondConfirmRef"),Be=tt("inputTranslateSettingRef"),Ne=tt("loginTipRef"),Qe=tt("tipRef"),ae=tt("exceedLimitTipRef"),be=tt("translateIconRef"),Oe=tt("improveWritingButtonRef"),Ze=tt("smallIconRef"),le=tt("improveWritingStyleWindowRef"),Se=C(!1),Ge=C(),Xe=C(!1),v=C(!1),w=C(!1),I=C(""),U=C(!1),P=C(Ln.CHATGPT),z=C("pure_text"),se=C({}),me=C(!1),xe=Z(()=>[{value:"1",label:y("hoverBall.closeOneTime")},{value:"2",label:y("hoverBall.disableOnePage")},{value:"3",label:y("hoverBall.disable")}]),He=C(!1),bt=C(!1),Dt=C(!1),Kn=C(V.TRANSLATE),Qn=C(0),In=C(!1),Zt=C(!1),jr=Z(()=>Zt.value&&Rn.value===V.IMPROVE_WRITE||L.value),ur=C({}),Rn=C(V.IMPROVE_WRITE),Zn=C(""),$n=Z(()=>In.value||me.value||X.value||Zt.value||L.value),Mt=C(_t.OPEN_MODAL),Tr=C(0),R=C(0),L=C(!1),te=C(0),he=C(0),$e=C({}),Ve=C(490),Ke=C(!1),Ct=Z(()=>{var $;return o||Xe.value||v.value?!1:!!(bt.value||($=Y.value)!=null&&$.smallTextboxShowTranslate&&Qn.value<yo)}),Ot=Z(()=>{const $=W.value.textboxTranslation.targetLanguage,ue=gn($);return ue?y(`language.${ue.value}`)||ue.label:y("language.en")}),xt=Z(()=>{let $=P.value;if(!Mn($)){const Pe=W.value.services.find(_e=>_e.isAIService&&!_e.isVipService);$=(Pe==null?void 0:Pe.value)||Ln.CHATGPT}return Ja.find(Pe=>Pe.value===$)}),Yt=Z(()=>r.orientation==="vertical"?{right:"0px",direction:"ltr"}:He.value?{left:"0px",direction:"ltr"}:{right:"0px",direction:"rtl"}),ut=Z(()=>o?{normal:"googledocs_select_to_translate_entry",expanded:"googledocs_select_to_translate_page"}:{normal:"plugin_textbox_translate_entry",expanded:"plugin_textbox_translate_page"}),tn=C({bottom:"40px",transform:"translateX(50%)"}),It=C(0),Vt=()=>{!Dt.value||!We.value||!ke.value||ht(()=>{var Ta;if(!ae.value)return;const $=((Ta=ae.value)==null?void 0:Ta.$el)||ae.value;if(!$||!We.value||!ke.value)return;const ue=We.value.getBoundingClientRect(),Pe=ke.value.getBoundingClientRect(),_e=$.getBoundingClientRect(),it=10,Et=window.innerWidth,st=window.innerHeight,yt=300,Ut=40,Ht=ue.bottom,Jt=Ht-_e.height-Ut,sn=Ht-Ut;let pn=Ut;if(Jt<it){const En=it-Jt;pn=Ut-En}else if(sn>st-it){const En=sn-(st-it);pn=Ut+En}const Wn=Pe.left+Pe.width/2,Gn={};if(He.value){const En=Wn,Zr=En-yt/2,wa=En+yt/2;let bn=En-ue.left;Zr<it?bn=it+yt/2-ue.left:wa>Et-it&&(bn=Et-it-yt/2-ue.left),Gn.left=`${bn}px`}else{const En=Wn,Zr=En-yt/2,wa=En+yt/2,bn=ue.right;let pr=bn-En;wa>Et-it?pr=bn-(Et-it-yt/2):Zr<it&&(pr=bn-(it+yt/2)),Gn.right=`${pr}px`}tn.value={bottom:`${pn}px`,transform:"translateX(50%)",...Gn},ht(()=>{cr()})})},cr=()=>{if(!Dt.value||!We.value||!ke.value){It.value=0;return}ht(()=>{var yt,Rt;if(Ct.value&&Ze.value){const Ut=Ze.value,Ht=((yt=ae.value)==null?void 0:yt.$el)||ae.value;if(!Ht){It.value=0;return}const Jt=Ut.getBoundingClientRect(),sn=Ht.getBoundingClientRect(),pn=Jt.left+Jt.width/2,Wn=sn.left,Gn=pn-Wn;It.value=Gn;return}let $=null;if(Kn.value===V.TRANSLATE)be.value&&($=be.value);else if(Kn.value===V.IMPROVE_WRITE&&Oe.value){const Ut=Array.isArray(Oe.value)?Oe.value[0]:Oe.value;$=(Ut==null?void 0:Ut.$el)||Ut}if(!$||!ae.value){It.value=0;return}const ue=((Rt=ae.value)==null?void 0:Rt.$el)||ae.value;if(!ue){It.value=0;return}const Pe=$.getBoundingClientRect(),_e=ue.getBoundingClientRect(),it=Pe.left+Pe.width/2,Et=_e.left,st=it-Et;It.value=st})};Te(Dt,$=>{$&&Vt()}),Te([Kn,He,Ct],()=>{Dt.value&&Vt()});const Jn=()=>{Dt.value&&Vt(),L.value&&Qr()};window.addEventListener("resize",Jn),Te([Se,Ge],()=>{Dt.value&&Vt()}),Te($n,$=>{$&&ht(()=>{const ue={};let Pe=0,_e=0;if(!We.value||!ke.value)return;et.value&&(Pe=et.value.$el.getBoundingClientRect().height,_e=et.value.$el.getBoundingClientRect().width),Be.value&&(Pe=Be.value.$el.getBoundingClientRect().height,_e=Be.value.$el.getBoundingClientRect().width),Ne.value&&(Pe=Ne.value.$el.getBoundingClientRect().height,_e=Ne.value.$el.getBoundingClientRect().width);const it=We.value.getBoundingClientRect(),{bottom:Et,right:st,left:yt,top:Rt}=it,Ut=40,Ht=6,Jt=8,sn=10,pn=ke.value.getBoundingClientRect(),Wn=window.innerWidth,Gn=window.innerHeight,Ta=pn.right-Wn>0?pn.right-Wn:0,En=pn.left<0?-pn.left:0;if(ur.value={},r.orientation==="vertical"){const Zr=it.right-pn.right;ue.right=`${Zr+pn.width+Jt}px`;const bn=pn.top-it.top+(pn.height-Pe)/2,pr=Rt+bn,Ys=pr+Pe;if(Ys>Gn-sn){const gi=Ys-(Gn-sn);ue.top=`${bn-gi}px`}else if(pr<sn){const gi=sn-pr;ue.top=`${bn+gi}px`}else ue.top=`${bn}px`}else Et+Ht+Pe>Gn?ue.bottom=`${Ut}px`:ue.top=`calc(100% + ${Ht}px)`,He.value?ue.left=yt+_e>Wn?`${Wn-yt-_e-sn}px`:`${En+sn}px`:ue.right=st<_e?`${st-_e-sn}px`:`${Ta+sn}px`;ur.value=ue})}),Te(X,$=>{$&&(v.value=!0)}),Te(Se,$=>{$===!0&&k.reportShowEvent(ut.value.normal,{position:Sn()})});let An=null;Te(v,$=>{clearTimeout(An),$===!0&&(An=setTimeout(()=>{k.reportShowEvent(ut.value.expanded,{position:Sn()})},500))});const Nn=()=>{me.value=!1,In.value=!1,X.value=!1},Yr=()=>{M=!1};un(ke,()=>{o||!Xe.value&&!ee&&(M=!0)},{ignore:[gt,le]});const dr=()=>Q&&Q.isConnected,Cn=Zo(()=>{var st;if(o){Se.value=!0;return}if(!dr())return;const $=Q;let{left:ue,top:Pe,width:_e,height:it}=$.getBoundingClientRect();const Et=Le[0];if(Et){const{width:yt,height:Rt}=Et.getBoundingClientRect();(_e>yt||it>Rt)&&({top:Pe,left:ue,width:_e,height:it}=ec(Et,$))}if(Pe+it<0||Pe>window.innerHeight){Se.value=!1;return}((st=Y.value)!=null&&st.smallTextboxShowTranslate||Se.value===!1&&$.clientHeight>=yo)&&(Se.value=!0),Qn.value=it,Ge.value={left:`${ue}px`,top:`${Pe}px`,width:`${_e}px`,height:`${it}px`,backgroundColor:"transparent"}},50,!0),wn=ls(()=>{if(!dr()){wr();return}if(!(!ke.value||!Se.value||$n.value||Xe.value||o)){if(Q!=null&&Q.isContentEditable){const $=ke.value.getBoundingClientRect(),ue=tc(Q);for(const Pe of ue){const _e=nc(Pe);if(_e&&_e.left<$.right&&_e.right>$.left&&_e.top<$.bottom&&_e.bottom>$.top){bt.value=!0;return}}bt.value=!1}if((Q==null?void 0:Q.tagName)==="TEXTAREA"){const{lineRects:$}=rc(Q),ue=ke.value.getBoundingClientRect(),Pe=10;for(const _e of $)if(_e.left<ue.right+Pe&&_e.right>ue.left-Pe&&_e.top<ue.bottom&&_e.bottom>ue.top){bt.value=!0;return}bt.value=!1}return!1}},100),Os=$=>{o||($.key==="Backspace"&&wn(),($.ctrlKey||$.metaKey)&&($.key==="z"||$.key==="y")&&wn())},Xr=()=>!(o||Qu.includes(location.hostname)),Ps=$=>{$&&Q!==$&&(wr(Q),clearTimeout(O),O=null,Q=$,bt.value=!1,v.value=!1,w.value=!1,M=!0,Nn(),He.value=Zu($),Le=Ju($),Cn(),wn(),!o&&($.addEventListener("input",wn),$.addEventListener("paste",wn),$.addEventListener("cut",wn),$.addEventListener("keydown",Os),Xr()&&($.addEventListener("input",qn),$.addEventListener("keydown",qn),$.addEventListener("paste",qn),$.addEventListener("cut",qn)),$.addEventListener("scroll",wn),ie=new ResizeObserver(()=>{Cn(),wn()}),ie.observe($),Le.forEach(ue=>{ue.addEventListener("scroll",Cn)}),window.addEventListener("scroll",Cn),window.addEventListener("resize",Cn),$.addEventListener("blur",Fs)))},wr=($=Q)=>{if(o)return;if(!$){dr()||(ie==null||ie.disconnect(),ie=null,Le.forEach(Pe=>{Pe.removeEventListener("scroll",Cn)}),window.removeEventListener("scroll",Cn),window.removeEventListener("resize",Cn),Se.value=!1,L.value=!1,Ge.value={},Q=null,Le=[],Dt.value=!1);return}$.isConnected&&($.removeEventListener("blur",Fs),$.removeEventListener("input",wn),$.removeEventListener("paste",wn),$.removeEventListener("cut",wn),$.removeEventListener("keydown",Os),$.removeEventListener("scroll",wn),Xr()&&($.removeEventListener("input",qn),$.removeEventListener("keydown",qn),$.removeEventListener("paste",qn),$.removeEventListener("cut",qn))),ie==null||ie.disconnect(),ie=null,Le.forEach(Pe=>{Pe.removeEventListener("scroll",Cn)}),window.removeEventListener("scroll",Cn),window.removeEventListener("resize",Cn),Se.value=!1,L.value=!1,Ge.value={},Q=null,Le=[],Dt.value=!1},Ea=()=>{Q&&Q.isConnected&&Q!==document.activeElement&&(Ae=!0,Q.focus())},Fs=()=>{if(ee=!1,!dr()){wr();return}Xe.value||L.value||Zt.value||(O=setTimeout(()=>{if(O=null,!dr()){wr();return}M&&!Zt.value&&wr()},500))},hu=()=>{Dt.value=!1},mu=()=>{!Xe.value&&!$n.value&&(v.value=!0),k.reportClickEvent(v.value?ut.value.expanded:ut.value.normal,"hover_textbox_translate_entry",{position:Sn()})},vu=()=>{!Xe.value&&!$n.value&&(v.value=!1)},_a=()=>{if(o)return Bl();if((Q==null?void 0:Q.tagName)==="TEXTAREA"){const $=Q,{selectionStart:ue,selectionEnd:Pe,value:_e}=$;return ue!==Pe?(ge=!1,_e.substring(ue,Pe)):(ge=!0,_e)}if(Q!=null&&Q.isContentEditable){const $=window.getSelection(),ue=($==null?void 0:$.toString())||"";if(ue&&($!=null&&$.rangeCount)&&$.rangeCount>0){const Pe=$.getRangeAt(0);if(Q.contains(Pe.commonAncestorContainer))return ge=!1,ue}return ge=!0,Q.innerText}return""},Ms=async($,ue)=>{if(Ea(),$.code===0)if(ue===V.TRANSLATE){const _e=$.data&&$.data[0].text||"";mi(_e,Q,ge),Ue=_e}else ue===V.IMPROVE_WRITE&&($.data&&typeof $.data=="object"&&Object.keys($.data).length>0?(dr()&&(L.value=!0),Qr(),$e.value=$.data):(w.value=!0,I.value=y("common.loadingFailedPlease",[y("common.retry")]),setTimeout(()=>{w.value=!1,I.value=""},2e3)));else if($.code===ze.EXTEND_LIMIT)Kn.value=ue,Dt.value=!0;else{if(w.value=!0,I.value=y("common.loadingFailedPlease",[y("common.retry")]),$.code===ze.NOT_LOGIN){const _e=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin`);ct(`${ye.loginUrl}?feature=plugin_input_translate_error&cb=${_e}`)}$.code===ze.PRIVILEGE_INSUFFICIENT&&ct(`${ye.priceUrl}?source=plugin_input_translate_error`),setTimeout(()=>{w.value=!1,I.value=""},2e3)}Xe.value=!1,await D()?(Q==null||Q.blur(),A(Br.TEXTBOX)):(M=!0,clearTimeout(O),O=null),G()},Eu=$=>{Mt.value===_t.REPLACE&&($.preventDefault(),pi())},_u=()=>{Mt.value===_t.OPEN_MODAL&&pi()},pi=async()=>{if(Xe.value)return;Dt.value=!1,Mt.value===_t.REPLACE&&await q();let $=Mt.value===_t.OPEN_MODAL?Me:_a();if(Mt.value===_t.OPEN_MODAL&&(ge=qe),$.trim()===Ue.trim()&&($=Re),Ue="",Re="",!$.trim())return;if(k.reportClickEvent(ut.value.expanded,"translate",{position:Sn()}),Mt.value===_t.OPEN_MODAL){Rn.value=V.TRANSLATE,await ht(),Zt.value=!0;return}Xe.value=!0,v.value=!1,U.value=!1,Nn(),L.value=!1;const ue=W.value.textboxTranslation.targetLanguage,Pe=W.value.translationService;let _e="";try{_e=await ot(Ie.DETECT_TEXT_LANGUAGE,$)}catch{_e=ye.defaultSourceLanguage}Re=$,await H();const it=await zr({texts:[{text:$}],from:_e,to:ue,service:Pe,type:V.SELECT_TEXT},{position:"plugin_textbox_translate",feature:"plugin_textbox_translate"});Ms(it,V.TRANSLATE)},Tu=$=>chrome.runtime.getURL(`public/modelIcons/${$}.png`),Us=($,ue,Pe)=>{if(Zt.value)return;const _e=_a();if(Me=_e,qe=ge,Q!=null&&Q.isContentEditable){const Et=window.getSelection();Et&&Et.rangeCount>0?Ye=Et.getRangeAt(0).cloneRange():Ye=null}else if((Q==null?void 0:Q.tagName)==="TEXTAREA"){const Et=Q;wt=Et.selectionStart,dt=Et.selectionEnd}_e.trim().length>0?Kr($,ue,Pe):Kr($,"pure_text",y("common.enterTextToContinue"))},$s=($,ue,Pe)=>{if(!We.value||Dt.value)return;if(Xe.value||$n.value||w.value){U.value=!1;return}const _e=We.value.getBoundingClientRect(),it=_e.right-$.right,Et=$.left-_e.left;se.value={},P.value=Pe,z.value=ue,U.value=!0,ht(()=>{if(!Qe.value)return;const st=Qe.value.clientWidth,yt=Qe.value.clientHeight,Rt=10,Ut=window.innerWidth;if(r.orientation==="vertical"){if(!ke.value)return;const Ht=ke.value.getBoundingClientRect(),Jt=$.top+$.height/2-yt/2-_e.top-2;if(se.value={top:`${Jt}px`},$.right+st>Ut-Rt)se.value.right=`${l+3}px`;else{const sn=_e.right-Ht.right;se.value.left=`${sn+3}px`}se.value.bottom="auto"}else if(He.value){const Ht=$.left-(st-$.width)/2;if(Ht+st>Ut-Rt){const Jt=Ht+st-(Ut-Rt);se.value={left:`${Et-(st-$.width)/2-Jt}px`}}else if(Ht<Rt){const Jt=Rt-Ht;se.value={left:`${Et-(st-$.width)/2+Jt}px`}}else se.value={left:`${Et-(st-$.width)/2}px`}}else{const Ht=$.right+(st-$.width)/2;if(Ht-st<Rt){const Jt=Rt-(Ht-st);se.value={right:`${it-(st-$.width)/2-Jt}px`}}else if(Ht>Ut-Rt){const Jt=Ht-(Ut-Rt);se.value={right:`${it-(st-$.width)/2+Jt}px`}}else se.value={right:`${it-(st-$.width)/2}px`}}})},Kr=($,ue,Pe)=>{const _e=$.target.getBoundingClientRect();a.value&&(a.value=!1),$s(_e,ue,Pe)},wu=$=>{ht(()=>{if(!We.value||!Oe.value||!a.value)return;const ue=Array.isArray(Oe.value)?Oe.value[0]:Oe.value,Pe=(ue==null?void 0:ue.$el)||ue;if(!Pe)return;const _e=Pe.getBoundingClientRect();$s(_e,$,W.value.translationService)})},br=()=>{v.value=!1,M=!0,Nn(),Ea()},qs=$=>{me.value=!1,v.value=!1,we("close",$)},bu=async()=>{if(o){const $=new CustomEvent(Ie.OPEN_GOOGLE_DOCS_SETTING_PANEL,{bubbles:!0,cancelable:!0,detail:{open:!0}});window.dispatchEvent($),k.reportClickEvent(ut.value.expanded,"close",{position:Sn()});return}if(me.value){br();return}Nn(),U.value=!1,me.value=!0,k.reportShowEvent("plugin_textbox_retention_page",{position:Sn()}),k.reportClickEvent(ut.value.expanded,"close",{position:Sn()})},xu=()=>{if(In.value){br();return}Nn(),U.value=!1,In.value=!0,k.reportClickEvent(ut.value.expanded,"settings",{position:Sn()})},yu=$=>{Mt.value===_t.REPLACE&&($.preventDefault(),fi())},Au=()=>{Mt.value===_t.OPEN_MODAL&&fi()},fi=async($=!1)=>{var yt;if(Xe.value)return;Dt.value=!1,Mt.value===_t.REPLACE&&await q();let ue=Mt.value===_t.OPEN_MODAL?Me:_a();if(Mt.value===_t.OPEN_MODAL&&(ge=qe),L.value=!1,!ue.trim())return;if($||k.reportClickEvent(ut.value.expanded,"improve_writing",{position:Sn()}),Ke.value=ue.length>eo,ue=ue.substring(0,eo),Mt.value===_t.OPEN_MODAL){Rn.value=V.IMPROVE_WRITE,await ht(),Zt.value=!0;return}if(!J.value){const Rt=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin`);ct(`${ye.loginUrl}?feature=plugin_input_translate_error&cb=${Rt}`);return}pe&&(pe&&pe(),pe=null);let Pe=W.value.translationService;if(!Mn(Pe)){const Rt=W.value.services.find(Ut=>Ut.isAIService&&!Ut.isVipService);Pe=(Rt==null?void 0:Rt.value)||Ln.CHATGPT,oe({translationService:Pe})}Xe.value=!0,v.value=!1,U.value=!1,Nn(),p(V.IMPROVE_WRITE),x.value=!1,N.value="",_.value=!1,E.value=void 0,$||d();const{resultPromise:it,abort:Et}=Rd({translateType:V.IMPROVE_WRITE,input:ue,engineCode:il(Pe),component:ds[V.SELECT_TEXT],requestId:g(V.IMPROVE_WRITE),styles:m()},{position:"plugin_textbox_translate_improve_writing",feature:"plugin_textbox_improve_writing"});pe=Et;const st=await it;!((yt=J.value)!=null&&yt.isVip)&&!ne.value&&(ne.value=await ot(Ie.GET_SKU_INFO,{locale:F.value})),await ht(),Ms(st,V.IMPROVE_WRITE)},Cu=()=>{L.value=!1,fi(!0)},Ws=C(0),Gs=Z(()=>o?s.value:!Xr()||(Ws.value,!Q)||document.activeElement!==Q?!1:document.queryCommandEnabled("undo")),qn=()=>{Xr()&&Ws.value++},Su=()=>{if(Gs.value){if(o){fm(),k.reportClickEvent(ut.value.expanded,"undo",{position:Sn()});return}if(Q){k.reportClickEvent(ut.value.expanded,"undo",{position:Sn()}),document.activeElement!==Q&&Q.focus();try{document.execCommand("undo")}catch{}Xr()&&ht(()=>{qn()}),v.value=!0}}},Du=()=>{br(),Mt.value===_t.REPLACE&&pi()},Hs=$=>$.tagName==="TEXTAREA"||$.isContentEditable,Vs=$=>{const ue=getComputedStyle($),Pe=ue.getPropertyValue("opacity"),_e=ue.getPropertyValue("display");return!(Pe==="0"||_e==="none")},zs=$=>{const ue=$.target;if(Hs(ue)&&Vs(ue)){if(ee=!0,Ae){Ae=!1;return}dr()&&Xe.value||Ps(ue)}};function js($){if(o){nm($),Zt.value=!1;return}Mt.value===_t.OPEN_MODAL?(mi($,Q,{selectAll:ge,savedRange:Ye,savedSelectionStart:wt,savedSelectionEnd:dt}),Ye=null,wt=-1,dt=-1,Zt.value=!1):mi($,Q,ge),L.value=!1}function Sn(){return o?"plugin_googledocs_integration_select_to_translate_page":Mt.value===_t.REPLACE?"plugin_textbox_translate_page_replace":"plugin_textbox_translate_page_noreplace"}const Lu=$=>{Ve.value=$,L.value&&Qr()},Qr=()=>{!We.value||!ke.value||ht(()=>{if(!We.value||!ke.value)return;const $=ke.value.getBoundingClientRect(),ue=Je.IMPROVE_WRITE_STYLE_WINDOW_WIDTH,Pe=Ve.value,_e=10,it=8;let st=$.right-c-13-ue,yt=$.bottom+it;st+ue>window.innerWidth-_e&&(st=window.innerWidth-ue-_e),st<_e&&(st=_e),yt+Pe>window.innerHeight-_e&&(yt=window.innerHeight-_e-Pe,yt<_e&&(yt=_e)),yt<_e&&(yt=_e),te.value=yt,he.value=st})},Iu=()=>{!K.value&&!de.value&&(L.value=!1)};return Te(L,$=>{$?Qr():(Ea(),Ye=null,wt=-1,dt=-1)}),Te([Ge,Se],()=>{L.value&&Qr()}),Te(Zt,$=>{if($){if(Zn.value=Mt.value===_t.OPEN_MODAL?Me:_a(),ge=Mt.value===_t.OPEN_MODAL?qe:ge,!We.value||!ke.value)return;const ue=We.value.getBoundingClientRect(),Pe=ke.value.getBoundingClientRect();if(r.orientation==="vertical"){const{top:_e}=ue,it=Je.TRANSLATE_WINDOW_INITIAL_WIDTH,Et=10;let st=0;o&&xo()?st=xo()||0:st=Pe.left-it-16,st>=Et?st+it+Et<=window.innerWidth?R.value=st:R.value=window.innerWidth-it-Et:R.value=Et;const yt=Pe.top-ue.top,Rt=_e+yt;Tr.value=Math.max(Rt,Et)}else{const{top:_e,left:it,height:Et,width:st}=ue;Tr.value=_e+Et+10,R.value=it+st-30}}else Ea(),Ye=null,wt=-1,dt=-1}),Te(a,$=>{const ue="click_to_use_model";$?wu(ue):z.value===ue&&(U.value=!1)}),ha(async()=>{o&&(Se.value=!0),o||Ku.includes(location.hostname)?Mt.value=_t.OPEN_MODAL:Mt.value=_t.REPLACE,await ot(Ie.DETECT_SYSTEM_LANGUAGE),await ot(Ie.DETECT_PAGE_LANGUAGE);const{textboxTranslateBlackList:$=[]}=Y.value||{};_n(window.location.href,$)||o||(document.activeElement&&Hs(document.activeElement)&&Vs(document.activeElement)&&(ee=!0,Ps(document.activeElement)),document.addEventListener("focus",zs,!0))}),Un(()=>{o||(wr(),document.removeEventListener("focus",zs,!0),window.removeEventListener("resize",Jn))}),e({closeAllWindows:()=>{Zt.value=!1,L.value=!1}}),($,ue)=>{const Pe=el("i18n-t");return B(),re(kt,null,[fe(Fr,{name:"slow-fade-in"},{default:ft(()=>[Se.value?(B(),re("div",{key:0,ref_key:"containerRef",ref:We,class:lt(["input-translate-ball-container",{vertical:r.orientation==="vertical"}]),style:De(Ge.value)},[T("div",{ref:"ballContentContainer",onClick:Yr,style:De(Yt.value),class:lt(["input-translate-ball-content",{hover:v.value,"ball-content-small":Ct.value,translating:Xe.value}]),onMouseleave:vu,onMouseenter:mu},[Ct.value?(B(),re("div",{key:0,ref_key:"smallIconRef",ref:Ze,class:"input-translate-ball-small-icon",style:De(He.value?{left:"11px"}:{right:"11px"})},null,4)):ve("",!0),Ct.value?ve("",!0):(B(),re("div",{key:1,ref_key:"translateIconRef",ref:be,class:lt([{translating:Xe.value},"translateIcon"])},[Xe.value?(B(),Fe(vt,{key:1,class:"translate-loading-icon",icon:"loading",size:14})):(B(),Fe(vt,{key:0,onMousedown:Eu,onClick:_u,icon:"translate-text-white",onMouseenter:ue[0]||(ue[0]=_e=>Us(_e,"pure_text",j(y)("hoverBall.tips.translate",[Ot.value]))),onMouseleave:ue[1]||(ue[1]=_e=>U.value=!1),size:20}))],2)),Ct.value?ve("",!0):(B(),re("div",{key:2,style:De(He.value?{marginLeft:"0"}:{marginRight:"0"}),class:"otherIcons"},[fe(jt,{ref_key:"improveWritingButtonRef",ref:Oe,size:28,onMouseenter:ue[2]||(ue[2]=_e=>Us(_e,"use_model",j(W).translationService)),onMouseleave:ue[3]||(ue[3]=_e=>U.value=!1),onMousedown:yu,onClick:Au,active:jr.value,icon:"edit"},null,8,["active"]),Wt(fe(jt,{onMouseenter:ue[4]||(ue[4]=_e=>Kr(_e,"pure_text",j(y)("common.switchLanguageAndService"))),onMouseleave:ue[5]||(ue[5]=_e=>U.value=!1),onClick:xu,active:In.value,size:28,icon:"open-setting"},null,8,["active"]),[[qt,!j(o)]]),fe(jt,{size:28,onMouseenter:ue[6]||(ue[6]=_e=>Kr(_e,"pure_text",j(y)("common.undo"))),onMouseleave:ue[7]||(ue[7]=_e=>U.value=!1),onClick:Su,active:!1,disabled:!Gs.value,icon:"undo"},null,8,["disabled"]),fe(jt,{class:"always-close-icon-button",size:28,onMouseenter:ue[8]||(ue[8]=_e=>Kr(_e,"pure_text",j(y)("common.disable"))),onMouseleave:ue[9]||(ue[9]=_e=>U.value=!1),onClick:bu,active:me.value,icon:"alway-close"},null,8,["active"])],4))],38),fe(Fr,{name:"slow-fade-in"},{default:ft(()=>[U.value?(B(),re("div",{key:0,ref_key:"tipRef",ref:Qe,style:De(se.value),class:lt(["input-translate-ball-tips",{"model-tip-label":z.value==="use_model"||z.value==="click_to_use_model"}])},[z.value==="use_model"||z.value==="click_to_use_model"?(B(),Fe(Pe,{key:0,keypath:z.value==="use_model"?"improveWrite.writeBetterWith":"improveWrite.clickToWriteBetterWith"},{default:ft(()=>{var _e,it;return[T("span",gm,[T("span",hm,[T("img",{class:"input-translate-ball-tips-icon",src:Tu((_e=xt.value)==null?void 0:_e.icon)},null,8,mm)]),Qt(" "+ce((it=xt.value)==null?void 0:it.shortLabel),1)])]}),_:1},8,["keypath"])):(B(),re(kt,{key:1},[Qt(ce(P.value),1)],64))],6)):ve("",!0)]),_:1}),w.value?(B(),re("div",{key:0,style:De(He.value?{left:"0px"}:{right:"0px"}),class:"input-translate-ball-tips error-tips"},ce(I.value),5)):ve("",!0),Dt.value?(B(),Fe(Er,{key:1,ref_key:"exceedLimitTipRef",ref:ae,"translate-type":Kn.value,"need-report-sub-type":!0,scene:"plugin_textbox_translate_page_free_trial_limit","report-page-name":ut.value.expanded,position:"bottom",offset:`${It.value}px`,style:De([{position:"absolute",width:"300px","pointer-events":"all"},tn.value]),onClose:hu},null,8,["translate-type","report-page-name","offset","style"])):ve("",!0),T("div",{ref_key:"popupContainerRef",ref:gt,class:"input-translate-ball-popup-container"},[me.value?(B(),Fe(ii,{key:0,ref_key:"secondConfirmRef",ref:et,source:"input_ball",style:De(ur.value),title:j(y)("common.disableDesc",[j(y)("inputBall.name")]),onClose:br,onConfirm:qs,options:xe.value,class:"input-translate-ball-popup"},null,8,["style","title","options"])):ve("",!0),In.value?(B(),Fe(Es,{key:1,ref_key:"inputTranslateSettingRef",ref:Be,style:De(ur.value),source:j(o)?"googledocs":"textbox",onClose:br,onSettingChange:Du},null,8,["style","source"])):ve("",!0),j(X)?(B(),Fe(ai,{key:2,source:"plugin_textbox_translate_login_guide_page",ref_key:"loginTipRef",ref:Ne,onClose:br,class:"input-translate-ball-popup",style:De(ur.value)},null,8,["style"])):ve("",!0)],512)],6)):ve("",!0)]),_:1}),Zt.value?(B(),Fe(Ll,{key:0,top:Tr.value,left:R.value,"source-text":Zn.value,"translate-replace-type":j(_t).OPEN_MODAL,"up-translate-type":Rn.value,"onUpdate:upTranslateType":ue[10]||(ue[10]=_e=>Rn.value=_e),onClose:ue[11]||(ue[11]=_e=>Zt.value=!1),onReplace:js,onAlwayCloseConfirm:qs},null,8,["top","left","source-text","translate-replace-type","up-translate-type"])):ve("",!0),L.value?(B(),Fe(bg,{key:1,ref_key:"improveWritingStyleWindowRef",ref:le,"styles-output":$e.value,top:te.value,left:he.value,"show-text-count-tip":Ke.value,onClose:Iu,onRefresh:Cu,onReplace:js,onHeightChange:Lu},null,8,["styles-output","top","left","show-text-count-tip"])):ve("",!0)],64)}}}),Ol=at(vm,[["__scopeId","data-v-360a8ea0"]]),Em={key:0,class:"pdf-banner-container"},_m={class:"pdf-banner-desc"},Tm={class:"pdf-translate-close"},qi=50,wm=je({__name:"PdfBanner",setup(t){const{t:e}=Tt(),{userSettings:n}=pt(),{translatePdfPage:r}=lr(),{width:a}=zo(),i=C(!1),s=C(!1),o=C(!1),l=C(!1),c=Z(()=>Xi.en.language[n.value.targetLanguage]),u=Z(()=>o.value?` Translate Research Paper to ${c.value}  Supporting arXiv, CORE and more`:e("banner.desc")),f=Z(()=>o.value?"plugin_academia_translate_bar":"plugin_translate_pdf_bar"),h=Z(()=>o.value?"Translate Now":e("translate.translateNow")),b=Z(()=>o.value?Ee.ACADEMIC_CLOSE_TIME:Ee.PDF_BANNER_CLOSE_TIME),S=Z(()=>{const p="fit-content";let m="flex",d="136px";return Or()?(d=a.value>1024?"210px":a.value>800?"150px":a.value<630?"90px":"120px",m=a.value>630&&a.value<750||a.value<600?"none":"flex"):m=a.value>780||a.value<500?"flex":"none",Or()?{right:d,top:"4px",width:p,display:m}:{right:d,top:"12px",width:p,display:m}}),x=()=>{r(o.value?"academia":"translateBar"),k.reportClickEvent(f.value,"translate",{link:location.href})},N=()=>{i.value=!1,mt(b.value,Date.now()),k.reportClickEvent(f.value,"close")};Te(()=>i.value,p=>{p?(_(),k.reportShowEvent(f.value)):E()});function _(){const p=Ra(location.href);if(p&&[xr.ARXIV,xr.MDPI].includes(p))document.body.style.transform=`translateY(${qi}px)`;else if(p&&[xr.CORE].includes(p))document.body.style.marginTop=`${qi}px`;else if(l.value){const m=document.querySelector('embed[type="application/pdf"]');m&&m instanceof HTMLElement?m.style.top=`${qi}px`:(i.value=!1,s.value=!0)}}function E(){const p=Ra(location.href);if(p&&[xr.ARXIV,xr.MDPI].includes(p))document.body.style.transform="";else if(p&&[xr.CORE].includes(p))document.body.style.marginTop="";else if(l.value){const m=document.querySelector('embed[type="application/pdf"]');m&&m instanceof HTMLElement&&(m.style.top="0px")}}async function g(){const p=ac()[0];try{const m=await fetch(p,{method:"HEAD"}),d=m.headers.get("Content-Length")||m.headers.get("content-length"),J=m.headers.get("Content-Type")||m.headers.get("content-type");return J&&!J.toLowerCase().includes("application/pdf")?(nt.warn(`${p} is not a PDF file, content type: ${J}`),k.reportCustomEvent("pdf_get_error",{type:"notPdf",contentType:J,pdfUrl:p}),!0):Number(d)>ic?(nt.warn(`PDF size exceeds limit: ${d} bytes`),k.reportCustomEvent("pdf_get_error",{type:"overSize",size:d,pdfUrl:p}),!0):!1}catch{return!1}}return Bt(async()=>{if(o.value=!!Ra(location.href),l.value=tl(),!o.value&&!l.value||l.value&&!o.value&&await g())return;const p=await rt(b.value);p&&Date.now()-p<7*24*60*60*1e3||setTimeout(()=>{i.value=!0},1e3)}),(p,m)=>(B(),re(kt,null,[i.value?(B(),re("div",Em,[fe(vt,{icon:"tip",size:18}),T("div",_m,ce(u.value),1),fe(Tn,{class:"pdf-translate-button",type:"primary",onClick:x},{default:ft(()=>[Qt(ce(h.value),1)]),_:1}),T("div",Tm,[fe(jt,{icon:"close",onClick:N})])])):ve("",!0),s.value?(B(),re("div",{key:1,style:De(S.value),class:"pdf-only-translate-button-container"},[fe(Tn,{style:{height:"32px"},type:"primary",onClick:x},{default:ft(()=>[Qt(ce(h.value),1)]),_:1})],4)):ve("",!0)],64))}}),bm=at(wm,[["__scopeId","data-v-740c4687"]]),xm={class:"plugin-comment-guid-container"},ym={class:"plugin-comment-guid-header"},Am=["src"],Cm={key:0,class:"plugin-comment-five-star"},Sm=["src"],Dm={class:"plugin-comment-dec-container"},Lm={class:"plugin-comment-dec"},Im={class:"plugin-comment-btn-container"},Rm=je({__name:"PluginCommentGuid",setup(t){const{locale:e}=Tt(),{t:n}=Tt(),{onlineParams:r}=an(),{closePluginCommentGuid:a}=qr(),i=Z(()=>dn(e.value)),s=()=>chrome.runtime.getURL("public/logo/icon-128.png"),o=()=>chrome.runtime.getURL("public/images/comment.png"),l=Z(()=>{var h,b,S,x;return((b=(h=r.value)==null?void 0:h.pluginComment)==null?void 0:b.type)==="5star"?n("comment.desc",[Or()?"edge":"chrome"]):((x=(S=r.value)==null?void 0:S.pluginComment)==null?void 0:x.npsLinkContent)||"How likely are you to recommend AnyDoc Translator to your friends or colleagues?"}),c=Z(()=>{var h,b,S,x;return((b=(h=r.value)==null?void 0:h.pluginComment)==null?void 0:b.type)==="5star"?n("comment.btn",[Or()?"edge":"chrome"]):((x=(S=r.value)==null?void 0:S.pluginComment)==null?void 0:x.npsLinkTitle)||"Share Feedback Now"}),u=()=>{a("close"),k.reportClickEvent("plugin_fivestar_guide_popup","close")},f=()=>{var b;k.reportClickEvent("plugin_fivestar_guide_popup","go_to_store"),a("go");const h=(b=r.value)==null?void 0:b.pluginComment;if(h&&h.type==="link_nps"&&h.npsLink){window.open(h.npsLink);return}Or()?window.open("https://microsoftedge.microsoft.com/addons/detail/pajdgpfjcgcdfkccnbinpalbihedpkfm"):window.open("https://chrome.google.com/webstore/detail/aopddeflghjljihihabdclejbojaomaf/reviews")};return(h,b)=>{var S,x;return B(),re("div",xm,[T("div",ym,[T("div",{class:"plugin-comment-guid-header-logo",style:De({"flex-direction":i.value?"row-reverse":"row","justify-content":i.value?"flex-end":"flex-start"})},[T("img",{src:s(),style:{height:"24px",width:"24px"}},null,8,Am),b[0]||(b[0]=T("div",{class:"plugin-comment-logo-name"}," AnyDoc Translator ",-1))],4),fe(jt,{icon:"close",size:28,onClick:u})]),((x=(S=j(r))==null?void 0:S.pluginComment)==null?void 0:x.type)==="5star"?(B(),re("div",Cm,[T("img",{src:o(),style:{height:"40px"}},null,8,Sm)])):ve("",!0),T("div",Dm,[T("div",Lm,ce(l.value),1)]),T("div",Im,[fe(Tn,{class:"plugin-comment-btn",size:"large",block:"",type:"primary",onClick:f},{default:ft(()=>[Qt(ce(c.value),1)]),_:1})])])}}}),Nm=at(Rm,[["__scopeId","data-v-fef91c63"]]),km={key:0,class:"dialog-mask"},Bm={class:"dialog-header"},Om={class:"dialog-title"},Pm={class:"dialog-content"},Fm={class:"dialog-body"},Mm={key:0},Um={class:"dialog-actions"},$m=je({__name:"ConfirmDialog",props:{width:{default:360},title:{default:""},content:{default:""},confirmText:{default:""},cancelText:{default:""},showCancel:{type:Boolean,default:!1},showMask:{type:Boolean,default:!1},colorfulConfirmBtn:{type:Boolean,default:!1}},emits:["confirm","cancel","update:visible"],setup(t,{emit:e}){const n=e;function r(){n("cancel"),n("update:visible",!1)}function a(){n("confirm"),n("update:visible",!1)}return(i,s)=>(B(),re(kt,null,[i.showMask?(B(),re("div",km)):ve("",!0),T("div",{class:"confirm-dialog",style:De({width:`${i.width}px`})},[T("div",Bm,[T("h3",Om,ce(i.title||i.$t("common.tips")),1),fe(jt,{icon:"close",size:28,onClick:r})]),T("div",Pm,[T("div",Fm,[ga(i.$slots,"default",{},()=>[i.content?(B(),re("p",Mm,ce(i.content),1)):ve("",!0)],!0)]),T("div",Um,[i.showCancel?(B(),Fe(Tn,{key:0,onClick:r},{default:ft(()=>[Qt(ce(i.cancelText||i.$t("common.cancel")),1)]),_:1})):ve("",!0),fe(Tn,{type:"primary",class:lt({"colorful-confirm-btn":i.colorfulConfirmBtn}),onClick:a},{default:ft(()=>[Qt(ce(i.confirmText||i.$t("common.confirm")),1)]),_:1},8,["class"])])])],4)],64))}}),Pl=at($m,[["__scopeId","data-v-eca39056"]]),qm=je({__name:"PrivilegeDialog",setup(t){const{exceedLimitDialogShow:e,showMask:n,showBuyDialog:r}=vn(),{t:a}=Tt();function i(){e.value=!1,n.value=!0,k.reportClickEvent("plugin_free_trial_limit_upgrade_popup","close")}function s(){r("plugin_translate_website","ai_model_free_trial_limit"),k.reportClickEvent("plugin_free_trial_limit_upgrade_popup","upgrade_now")}return Bt(()=>{k.reportShowEvent("plugin_free_trial_limit_upgrade_popup")}),(o,l)=>(B(),Fe(Pl,{"colorful-confirm-btn":!0,content:j(a)("translate.limitTip",[j(a)("common.upgradeNow").toLowerCase()]),"confirm-text":j(a)("common.upgradeNow"),"show-mask":j(n),onConfirm:s,onCancel:i},null,8,["content","confirm-text","show-mask"]))}}),Wm=je({__name:"RefreshPaymentDialog",setup(t){const{refreshPaymentDialogShow:e,showMask:n}=vn(),{t:r}=Tt(),{refreshUserInfo:a}=St();function i(){e.value=!1}function s(){e.value=!1,a()}return Bt(()=>{k.fireEvent("premium_promotion_popup",{action:"show",item:"payment_refresh_popup_page"})}),(o,l)=>(B(),Fe(Pl,{content:j(r)("common.refreshPaymentDesc"),"confirm-text":j(r)("common.refreshPage"),"show-mask":j(n),onConfirm:s,onCancel:i},null,8,["content","confirm-text","show-mask"]))}}),Gm={class:"upgrade-dialog"},Hm={class:"dialog-content"},Vm={class:"content-left"},zm={class:"dialog-title"},jm={class:"features-list"},Ym={class:"content-right"},Xm=je({__name:"upgradeDialog",emits:["close"],setup(t){const{t:e}=Tt(),{showMask:n,closePageDialog:r,upgradeDialogType:a,showBuyDialog:i,upgradeDialogScene:s}=vn(),o=Z(()=>s.value==="subtitle"?"web_translate_subtitle":"web_translate_image"),l=Z(()=>s.value==="subtitle"?"web_subtitle_translate_payment_popup":"web_image_translate_payment_popup"),c=Z(()=>[{highlight:a.value==="subtitle",text:e("upgradeDialog.subtitleFeature")},{highlight:!1,text:e("upgradeDialog.imageFeature")},{highlight:!1,text:e("upgradeDialog.textFeature")},{highlight:!1,text:e("upgradeDialog.exportFeature")},{highlight:!1,text:e("upgradeDialog.noWatermarkFeature")}]),u=()=>chrome.runtime.getURL("public/images/subtitleUpgrade.png"),f=()=>chrome.runtime.getURL("public/images/dialog-close.png"),h=()=>{r(),k.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"close"})},b=()=>{i(o.value,l.value),k.fireEvent("premium_promotion_popup",{action:"click",page_name:l.value,item:"upgrade_now"})};return Bt(()=>{k.fireEvent("premium_promotion_popup",{action:"show",item:l.value})}),(S,x)=>(B(),re("div",{class:lt(["upgrade-dialog-overlay",{"with-mask":j(n)}])},[T("div",Gm,[T("div",{class:"dialog-close",onClick:h,style:De({backgroundImage:`url(${f()})`})},null,4),T("div",Hm,[T("div",Vm,[T("h2",zm,ce(S.$t("upgradeDialog.title")),1),T("div",jm,[(B(!0),re(kt,null,rn(c.value,(N,_)=>(B(),re("div",{key:_,class:"feature-item"},[fe(vt,{icon:"check",size:20,class:"check-icon"}),T("span",{class:lt(["feature-text",{highlight:N.highlight}])},ce(N.text),3)]))),128))]),T("div",{class:"upgrade-button",onClick:b},ce(S.$t("common.upgradeNow")),1)]),T("div",Ym,[T("div",{class:"upgrade-image",style:De({backgroundImage:`url(${u()})`})},null,4)])])])],2))}}),Km=at(Xm,[["__scopeId","data-v-74241f0c"]]),fn={DOCUMENT:"document",WINDOW:"window"},xs=[{eventName:"click",instance:fn.DOCUMENT,capture:!1},{eventName:"mousedown",instance:fn.DOCUMENT,capture:!1},{eventName:"mousemove",instance:fn.DOCUMENT,capture:!1},{eventName:"mouseup",instance:fn.DOCUMENT,capture:!1},{eventName:"wheel",instance:fn.DOCUMENT,capture:!1},{eventName:"keydown",instance:fn.DOCUMENT,capture:!1,customEventListener:t=>{if((t.ctrlKey||t.metaKey)&&t.keyCode===65){const e=new CustomEvent("selectall",{bubbles:!0,cancelable:!0,detail:{originalEvent:t}});t.target.dispatchEvent(e)}}},{eventName:"scroll",instance:fn.DOCUMENT,capture:!1},{eventName:"focus",instance:fn.DOCUMENT,capture:!0},{eventName:"resize",instance:fn.WINDOW,capture:!1},{eventName:"storage",instance:fn.WINDOW,capture:!1},{eventName:"message",instance:fn.WINDOW,capture:!1},{eventName:"unload",instance:fn.WINDOW,capture:!1},{eventName:"selectall",instance:fn.DOCUMENT,stopIfDefaultPrevented:!0}],Qm=xs.reduce((t,e)=>(t[e.eventName]=e,t),{}),Fl=new Map;function Zm(t){const e={};return xs.forEach(({eventName:n})=>{e[n]=new Map}),Fl.set(t,e),e}function oi(t=window){return Fl.get(t)}function Ml(t){var e;return t.target.frameElement||((e=t.view)==null?void 0:e.frameElement)||window}function Pa(t){return t===t.top}function Jm(t){return!Pa(Ml(t))}function e2(t){const e=Ml(t),n=oi(e);if(!n)return;const r=t.type,a=Qm[r],i=n[r];if(a.customEventListener&&a.customEventListener(t),i){const s=Array.from(i.values()).sort((o,l)=>l._order-o._order);for(let o=0;o<s.length&&(s[o](t),!(t.defaultPrevented&&(t.detail&&t.detail.originalEvent&&t.detail.originalEvent.preventDefault(),a.stopIfDefaultPrevented)));o++);}}function Ao(){}function Ul(t=window){let e=oi(t);if(e)return e;e=Zm(t);try{let n=Pa(t)?document:t.contentDocument;const r=Pa(t)?window:t.contentWindow,a=()=>{try{xs.forEach(i=>{(i.instance===fn.DOCUMENT?n:r).addEventListener(i.eventName,e2,i.capture)})}catch(i){nt.error("addEventListener error",i)}};if(Pa(t))a();else{t.setAttribute("sandbox","allow-same-origin allow-scripts allow-popups allow-forms");let i=100;const s=setInterval(()=>{try{if(n=t.contentDocument,!n)return;n.readyState==="complete"&&(n.body.childNodes.length>0?(clearInterval(s),a()):(i--,i<1&&(clearInterval(s),a())))}catch(o){nt.error("iframeInterval error: ",o),clearInterval(s),a()}},1e3)}}catch(n){nt.error("addAllEventListeners error",n.message)}return e}function er(t,e,n=window,r=0){if(!t||!e)return Ao;let a=oi(n);a||(a=Ul(n));const i=Ur(),s=a[t];return s?(e._order=r,s.set(i,e),()=>s.delete(i)):Ao}function tr(t,e,n=window){const r=oi(n);if(!r)return;const a=r[t];a&&a.forEach((i,s)=>{i===e&&a.delete(s)})}Ul();const t2=je({__name:"WordTranslateBubble",emits:["alwaysClose","showTranslateWindow"],setup(t,{emit:e}){const{t:n}=Tt(),{setPluginUseTime:r}=qr(),{userSettings:a}=pt(),i=e,s=C(!0),o=C(!1),l=C(!1),c=C(!1),u=C(0),f=C(0),h=C(0),b=C(0),S=C(0),x=C(0),N=C(0),_=C(0),E=C(""),g=C();Te(c,A=>{if(A&&g.value){const D=g.value.getBoundingClientRect();b.value=D.top,h.value=D.left}A&&i("showTranslateWindow")}),Te(o,A=>{A&&k.reportShowEvent("plugin_select_to_translate_entry")}),un(g,()=>{o.value&&(o.value=!1)},{});const p=()=>{c.value=!0,o.value=!1,r(),k.reportClickEvent("plugin_select_to_translate_entry","translate_entry")},m=async()=>{c.value=!1,await vi(50);const A=window.getSelection();A!=null&&A.toString().trim()&&(o.value=!0)};function d(A){var F;if(S.value=A.pageX,x.value=A.pageY,!o.value)return;const y=A.composedPath()[0]||null;y&&((F=g.value)!=null&&F.contains(y))||(o.value=!1)}function J(A){N.value=A.pageX,_.value=A.pageY}function q(A){return A?A.tagName==="INPUT"||A.tagName==="TEXTAREA"||A.getAttribute("contenteditable")==="true"?A:A.querySelector('input, textarea, [contenteditable="true"]'):null}function W(A){const D=y=>{if(y.shadowRoot)return!0;{const F=y.children;for(let G=0;G<F.length;G++)if(D(F[G]))return!0}return!1};!D(A)&&!q(A)||((S.value>N.value||x.value>_.value)&&(l.value=!0),l.value?(f.value=_.value-50,u.value=N.value+2):(u.value=N.value-20,f.value=_.value+15),!c.value&&(o.value=!0))}async function oe(A){var gt,et,Be,Ne,Qe;if(o.value||sc(A.target))return;await vi(50);const D=A.target,y=(D==null?void 0:D.ownerDocument)&&D.ownerDocument!==document,F=(gt=D==null?void 0:D.ownerDocument)==null?void 0:gt.getSelection(),G=F==null?void 0:F.toString().trim();if(!G||!F)return;l.value=!1,E.value=G;const{anchorNode:K,focusNode:de}=F,ne=30,we=F.getRangeAt(0),Q=we.getBoundingClientRect(),{startContainer:Le,endContainer:ie}=we;if(Q.width===0&&Q.height===0){K&&de&&K===de&&W(K);return}K===de&&(S.value>N.value||x.value>_.value)&&(l.value=!0),K!==de&&Le===de&&ie===K&&(l.value=!0);const O=Q.right-ne,M=Q.left,ee=Q.top-ne,Ae=Q.bottom,Re=A.pageX,Ue=((et=A.view)==null?void 0:et.scrollY)||0;let pe=O,ge=Ae;l.value&&(ge=ee,pe=M),Re>=M&&Re<=O&&(pe=Re);const Me=-2,qe=8,Ye=l.value?2:-14,wt=l.value?Me:qe,dt=10;if(u.value=pe+Ye,f.value=ge+wt+Ue,y&&((Be=D.ownerDocument.defaultView)!=null&&Be.frameElement)){const be=D.ownerDocument.defaultView.frameElement.getBoundingClientRect(),Oe=D.ownerDocument.defaultView.scrollY,Ze=D.ownerDocument.defaultView.scrollX,le=((Ne=document.defaultView)==null?void 0:Ne.scrollY)||0,Se=((Qe=document.defaultView)==null?void 0:Qe.scrollX)||0;u.value=u.value+be.left+Se-Ze,f.value=f.value+be.top+le-Oe}const We=()=>f.value+ne-Ue>window.innerHeight,ke=()=>f.value-Ue<0;We()&&(f.value=window.innerHeight-ne-dt+Ue,l.value||(f.value=ee+Me+Ue,l.value=!0)),ke()&&(f.value=dt+Ue,l.value&&(f.value=Ae+qe+Ue,l.value=!1,We()&&(f.value=dt+Ue,l.value=!0))),!c.value&&Y()}async function Y(){var A,D;try{const y=await al(E.value),F=(A=gn(y))==null?void 0:A.value,G=a.value.inTextTranslation;nt.info(`
    detectLanguage: ${y},
    sourceTextLanguage: ${F},
    targetLanguage: ${a.value.targetLanguage},
    blockedLanguages: ${G.blockedLanguages}`),F===a.value.targetLanguage&&((D=G.blockedLanguages)!=null&&D.includes(F))?o.value=!1:o.value=!0}catch{o.value=!0}}function H(A){var F;if(!A)return!1;const D=((F=A.shadowRoot)==null?void 0:F.activeElement)||void 0,y=[sl.toUpperCase(),"INPUT","TEXTAREA"];return H(D)||y.includes(A.tagName)||A.getAttribute("contenteditable")==="true"}async function X(A){var we;const D=A.target;if(H(D))return;const y=((we=A.detail)==null?void 0:we.originalEvent)||void 0;if(y&&(H(y.target)||Jm(y)))return;A.preventDefault();const F=window.getSelection();if(!F)return;F.removeAllRanges();const G=document.createRange();G.selectNodeContents(document.body),F.addRange(G),await vi(50);const K=F.toString().trim();if(!K)return;E.value=K;const ne=F.getRangeAt(0).getBoundingClientRect();ne.width===0&&ne.height===0||(u.value=N.value+5,f.value=_.value+5,!c.value&&Y())}return Bt(async()=>{er("mousedown",d),er("mousemove",J),er("mouseup",oe),er("selectall",X),document.querySelectorAll("iframe").forEach(D=>{er("mouseup",oe,D),er("mousedown",d,D),er("mousemove",J,D),er("selectall",X,D)})}),Un(()=>{tr("mousedown",d),tr("mousemove",J),tr("mouseup",oe),tr("selectall",X),document.querySelectorAll("iframe").forEach(D=>{tr("mouseup",oe,D),tr("mousedown",d,D),tr("mousemove",J,D),tr("selectall",X,D)})}),(A,D)=>(B(),re(kt,null,[fe(Fr,{name:"fade-in"},{default:ft(()=>[Wt(T("div",{ref_key:"translateBubbleRef",ref:g,style:De({top:f.value+"px",left:u.value+"px"}),class:lt(["word-translate-bubble",{"black-theme":s.value}]),onClick:p},[fe(vt,{icon:s.value?"translate-text-white":"translate-text",size:20},null,8,["icon"]),T("div",null,ce(j(n)("translate.translate")),1),T("div",{class:lt(["translate-text-sharp-angle",l.value?"sharp-bottom":"sharp-top"])},null,2)],6),[[qt,o.value]])]),_:1}),fe(Fr,{name:"fade-in"},{default:ft(()=>[c.value?(B(),Fe(Ll,{key:0,top:b.value,left:h.value,"translate-replace-type":j(_t).NONE,"source-text":E.value,show:c.value,onAlwayCloseConfirm:D[0]||(D[0]=y=>i("alwaysClose",y)),onClose:m},null,8,["top","left","translate-replace-type","source-text","show"])):ve("",!0)]),_:1})],64))}}),n2=at(t2,[["__scopeId","data-v-eaaa630d"]]);let Co=!1;const So="anydoc-scholar-buttons-container",$l="anydoc-scholar-text",{userSettings:Ha}=pt(),{onlineParams:r2}=an();Te(Ha,()=>{document.querySelectorAll(`.${$l}`).forEach(e=>{e instanceof HTMLElement&&(e.innerText=ql())})});function a2(t){var c,u,f,h;const e=(t.href||"").toLowerCase(),n=(t.textContent||"").toLowerCase(),r=((u=(c=t.querySelector("img"))==null?void 0:c.alt)==null?void 0:u.toLowerCase())||"",a=[/\.pdf$/i,/\/pdf\//i,/[?&]pdf=/i,/type=pdf/i,/format=pdf/i,/application\/pdf/i,/download=pdf/i],i=[/\[pdf\]/i,/pdf\s*version/i,/pdf\s*file/i,/download\s*pdf/i,/view\s*pdf/i,/full\s*text/i];if(a.some(b=>b.test(e))||i.some(b=>b.test(n)||b.test(r)))return!0;const l=((h=(f=t.parentElement)==null?void 0:f.textContent)==null?void 0:h.toLowerCase())||"";return!!i.some(b=>b.test(l))}function i2(t){const e=t.parentNode;return e instanceof Element&&e.classList.contains("wps-buttons-container")}function Do(t){var a;const e="google_academia_translateplugin_translate_bar_translate",n=(a=r2.value)==null?void 0:a.openPdfProPage,r=new URL(ye.fileTranslateRedirectPage);r.searchParams.set("plugin","anydoc"),r.searchParams.set("is_academia","true"),r.searchParams.set("pdf_url",encodeURIComponent(t)),r.searchParams.set("position",e),n&&r.searchParams.set("isPdf","1"),ct(r.toString())}function ql(){const{targetLanguage:t}=Ha.value;return navigator.language.startsWith("zh")?`[PDF]  [${Ei("zh-CN").language[t]}]`:(Ei("en").language.targetLanguage,`[PDF] Translate to [${Ei("en").language[t]}]Academic Translator`)}const Wl=ls(()=>{document.querySelectorAll(".gs_or_ggsm").forEach(e=>{if(e.dataset.anydocProcessed)return;e.dataset.anydocProcessed="true",e.querySelectorAll("a").forEach(r=>{var a,i;if(a2(r)&&!i2(r)&&!((a=r.parentNode)!=null&&a.querySelector(`.${So}`))){const s=document.createElement("div");s.className=So,s.style.display="flex",s.style.alignItems="center",s.style.gap="8px";const o=document.createElement("span");o.className=$l,o.textContent=ql(),o.style.color="#1a0dab",o.style.cursor="pointer",o.style.fontSize="14px",o.addEventListener("mouseenter",()=>{o.style.textDecoration="underline"}),o.addEventListener("mouseleave",()=>{o.style.textDecoration=""}),o.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),Do(r.href),k.reportClickEvent("google_academia_translateplugin_translate_bar","translate_to_target_lang",{link:r.href,target_lang:Ha.value.targetLanguage})}),s.appendChild(o);const l=document.createElement("img");l.style.width="16px",l.style.height="16px",l.style.cursor="pointer",l.src=chrome.runtime.getURL("public/logo/icon-32.png"),l.addEventListener("click",c=>{c.preventDefault(),c.stopPropagation(),Do(r.href),k.reportClickEvent("google_academia_translateplugin_translate_bar","icon",{link:r.href,target_lang:Ha.value.targetLanguage})}),s.appendChild(l),(i=r.parentNode)==null||i.appendChild(s),Co||(Co=!0,k.reportShowEvent("google_academia_translateplugin_translate_bar"))}})})},250);function s2(){new MutationObserver(ls(e=>{let n=!1;e.forEach(r=>{r.type==="childList"&&r.addedNodes.length>0&&(n=!0)}),n&&Wl()},250)).observe(document.body,{childList:!0,subtree:!0})}function o2(){return{initScholarEnhance:()=>{ma()||location.host.includes("scholar.google.")&&(window.addEventListener("load",()=>{s2()}),Wl())}}}function Gl(t){t.nodeType===Node.ELEMENT_NODE&&t.removeAttribute("id"),t.childNodes.forEach(Gl)}function l2(t){const e=document.querySelector(".ams.bkG");if(e)try{e.click(),setTimeout(()=>{const r=document.querySelector(".ii.gt").cloneNode(!0);Gl(r);const a=document.querySelector(".gmail_quote.gmail_quote_container"),i=a==null?void 0:a.querySelector(".gmail_attr");a&&(oc(a),i&&a.appendChild(i),a.appendChild(document.createElement("br")),a.appendChild(document.createElement("br")),a.appendChild(r),a.appendChild(t))},500)}catch{}}const u2=[{name:Dn.GMAIL,pattern:/^https?:\/\/mail\.google\.com(\/.*)?$/i,btnAnchorSelector:"#gb .gb_Je",detailElementSelector:".ii.gt",detailElementParentLevel:1,btnAppendMethod:$r.INSERT_AFTER,translateAnchorSelector:".gE.iv.gt",translateAppendMethod:$r.INSERT_AFTER,detailPattern:/^https?:\/\/mail\.google\.com\/mail\/u\/\d+\/#inbox\/([a-zA-Z0-9]+)$/i,enableFunction:()=>()=>{},disableFunction:()=>{},transferEmail:l2}];function ys(t){for(const e of u2)if(t.match(e.pattern))return e;return null}const c2=["dir"],d2=["src"],p2={class:"banner-content"},f2={class:"header-section"},g2=["src"],h2={class:"title"},m2=["src"],v2={class:"feature-text"},E2={class:"bottom-section"},_2={class:"enable-text"},T2={key:1,class:"mail-setting-btn-red-hot"},w2=je({__name:"SettingBtn",setup(t){const{locale:e,t:n}=Tt(),{contentScriptRefreshUserInfo:r}=St(),{userSettings:a,getSettingByKey:i,notifyUserSettings:s}=pt(),o=ys(location.href),l=C(!1),c=Z(()=>dn(e.value)?"rtl":"ltr"),u=Z(()=>Hr(e.value)),f=Z(()=>a.value.integrations[o.name].enable?"on":"off"),h=tt("popupContainerRef"),b=tt("logoRef"),S=C(!1),x=C(a.value.integrations[o.name].enable),N=Z(()=>[{id:1,text:n("integration.mail.feature1")},{id:2,text:n("integration.mail.feature2")},{id:3,text:n("integration.mail.feature3")}]);un(h,()=>{S.value=!1},{ignore:[b]}),Te(a,(p,m)=>{p.integrations[o.name].enable!==m.integrations[o.name].enable&&(x.value=p.integrations[o.name].enable,p.integrations[o.name].enable?o.disableFunction=o.enableFunction():o.disableFunction())}),Te(S,p=>{p&&k.reportIntergratedShowEvent("mail_translate_settings_popup",{status:f.value,func_type:"gmail"})});function _(){S.value=!S.value,l.value=!1,mt(Ee.MAIL_GUID_SHOW,!0),r(),k.reportIntergratedClickEvent("translate_settings_icon",{func_type:"gmail"})}function E(){S.value=!1}function g(p){const m=i("integrations");m[o.name].enable=p,s({integrations:m}),p?k.reportIntergratedClickEvent("open_translate_settings_popup",{func_type:"gmail"}):k.reportIntergratedClickEvent("close_translate_settings_popup",{func_type:"gmail"})}return Bt(async()=>{await rt(Ee.MAIL_GUID_SHOW)||(l.value=!0)}),(p,m)=>(B(),re("div",{dir:c.value,style:De({fontFamily:u.value}),class:"mail-setting-container anydoc-translate-ignore"},[T("div",{class:"mail-setting-btn",ref_key:"logoRef",ref:b},[T("img",{ref_key:"logoRef",ref:b,onClick:_,style:{width:"24px",height:"24px",cursor:"pointer"},src:j(cn)("logo/icon-128.png")},null,8,d2)],512),S.value?(B(),re("div",{key:0,ref_key:"popupContainerRef",ref:h,style:De(j(nn)()?"left: 13px;":"right: 13px;"),class:"mail-welcome-banner"},[T("div",p2,[T("div",f2,[T("img",{src:j(cn)("images/celebration.png"),style:{width:"24px",height:"24px"}},null,8,g2),T("div",h2,ce(p.$t("integration.mail.welcome",[j(o).name])),1),fe(jt,{class:"close-button",icon:"close",size:24,onClick:E})]),T("div",null,[(B(!0),re(kt,null,rn(N.value,d=>(B(),re("div",{key:d.id,class:"feature-item"},[T("img",{src:j(cn)("images/check.png"),style:{width:"16px",height:"16px"}},null,8,m2),T("div",v2,ce(d.text),1)]))),128))])]),m[1]||(m[1]=T("div",{class:"separator"},null,-1)),T("div",E2,[T("div",_2,ce(p.$t("integration.mail.enable",[j(o).name])),1),fe(is,{modelValue:x.value,"onUpdate:modelValue":m[0]||(m[0]=d=>x.value=d),onChange:g},null,8,["modelValue"])])],4)):ve("",!0),l.value?(B(),re("div",T2)):ve("",!0)],12,c2))}}),b2=at(w2,[["__scopeId","data-v-e5740f48"]]),x2=["dir"],y2={class:"translate-btn"},A2={class:"logo"},C2={class:"text-content"},S2={class:"send-text-content"},D2=je({__name:"TranslateBanner",setup(t){const{locale:e,t:n}=Tt(),{userSettings:r}=pt(),{translateElement:a,restoreElement:i,setReportParams:s,deleteElementResult:o}=_l(),{isPageTranslated:l}=lr(),{contentScriptRefreshUserInfo:c}=St();let u;const f=ys(location.href),h=new Map,b=C(),S=C(!1),x=C(!1),N=C(!0),_=tt("settingBtnRef"),E=C(!1),g=tt("mailTranslateSettingRef"),p=Z(()=>dn(e.value)?"rtl":"ltr"),m=Z(()=>Hr(e.value)),d=Z(()=>{const y=r.value.targetLanguage,F=gn(y);return F?n(`language.${F.value}`)||F.label:n("language.en")}),J=Z(()=>r.value.integrations[f.name].enable?"on":"off");un(g,()=>{x.value=!1},{ignore:[_]});const q=(y,F)=>{const G=`${F.serviceName}-${F.targetLanguage}`;h.set(G,y),y==="success"&&(N.value=!1),y==="limit"&&(E.value=!0)},W=()=>{if(!u)return;const{translationService:y,targetLanguage:F}=r.value,G=h.get(`${y}-${F}`);G&&q(G,{serviceName:y,targetLanguage:F}),a(u,q)},oe=()=>{S.value&&u&&(x.value=!1,N.value=!0,W())},Y=async()=>{l.value||(x.value=!1,E.value=!1,N.value=!0,u&&(S.value?(S.value=!1,i(u),k.reportIntergratedClickEvent("mail_translate_toolbar_translated_mail_show_original")):(S.value=!0,s("plugin_gmail_integration_mail_translate","plugin_gmail_integration_mail_translate"),W(),c(),k.reportIntergratedClickEvent("mail_translate_toolbar_translate"))))};function H(){l.value||(E.value=!1,x.value=!x.value,k.reportIntergratedClickEvent("mail_translate_toolbar_settings"),x.value&&k.reportIntergratedShowEvent("mail_translate_toolbar_settings",{status:J.value}))}async function X(){const y=await rt(Ee.INSTALL_SOURCE),F=document.createElement("div"),G=`${ye.translatorPage}?source=plugin_gmail_integration&utm_source=${y}`;return F.innerHTML=`
    <div style='font-size: 14px;'>
      <br/>
      <div style="color: rgba(0,0,0,0.9);">
        ${n("integration.mail.waterMarkDesc")}
      </div>
      <a style="display: block;color: rgba(41, 98, 255, 1); text-decoration: underline;" href="${G}" target="_blank">
        ${n("integration.mail.waterMarkLink")}
      </a>
    </div>
  `,F}async function A(){N.value||(f.transferEmail(await X()),k.reportIntergratedClickEvent("mail_translate_toolbar_forward_translated_mail"))}function D(){if(!b.value)return;const F=b.value.getRootNode().host;if(!F)return;let G=F;for(let K=0;K<f.detailElementParentLevel&&G.parentElement;K++)G=G.parentElement;u=G.querySelector(f.detailElementSelector)}return Bt(()=>{D(),u&&(u.selfRestore=()=>{S.value=!1,N.value=!0,i(u)}),k.reportIntergratedShowEvent("mail_translate_toolbar",{status:J.value})}),_r(()=>{u&&(i(u),o(u)),h.clear()}),(y,F)=>(B(),re("div",{dir:p.value,ref_key:"bannerRef",ref:b,class:"mail-translate-banner-container anydoc-translate-ignore",style:De({fontFamily:m.value,textAlign:j(nn)()?"right":"left",alignItems:"flex-start"})},[T("div",y2,[T("div",{class:lt([{"btn-disabled":j(l)},"logo-container"]),onClick:Y},[T("div",A2,[fe(vt,{size:16,icon:"translate-text-white"})]),T("div",C2,ce(S.value?y.$t("integration.mail.showOriginal"):y.$t("hoverBall.tips.translate",[d.value])),1)],2),T("div",{class:lt(["setting-container",{"btn-disabled":j(l)}]),ref_key:"settingBtnRef",ref:_,onClick:H},[fe(vt,{icon:"setting",size:16})],2),x.value?(B(),Fe(Es,{key:0,source:"mail",languageColumn:1,ref_key:"mailTranslateSettingRef",ref:g,class:"translate-setting-container",onSettingChange:oe,onClose:F[0]||(F[0]=G=>x.value=!1)},null,512)):ve("",!0),E.value?(B(),Fe(Er,{key:1,class:"exceed-limit-tip",position:"top",onClose:F[1]||(F[1]=G=>E.value=!1),scene:"plugin_mail_translate_free_trial_limit"})):ve("",!0)]),T("div",{class:lt(["send-email-btn",{"btn-disabled":N.value}]),onClick:A},[fe(vt,{class:"send-mail-icon",size:20,icon:"sendMail"}),T("div",S2,ce(y.$t("integration.mail.sendTranslatedEmail")),1)],2)],12,x2))}}),L2=at(D2,[["__scopeId","data-v-17b61cdd"]]),I2="wps-translate-mail-translation-button",R2="wps-translate-mail-translate-banner";let Dr=null;const Wr=new Map;async function N2(t){let e=0;const n=4,r=2e3;let a=null,i=null;for(;e<n;){if(t.name===Dn.GMAIL){const s=document.querySelector("#aso_search_form_anchor");s&&(a=s.parentElement)}else a=document.querySelector(t.btnAnchorSelector);if(i=document.querySelector(t.translateAnchorSelector),a&&i)break;await new Promise(s=>setTimeout(s,r)),e++}return{btnAnchorElement:a,translateBannerAnchorElement:i}}async function k2(t){const{btnAnchorElement:e}=await N2(t);e&&Ua(e,Dr,t.btnAppendMethod)}async function Lo(t,e){t.forEach(n=>{if(Wr.has(n))return;const r=sr(R2,L2,!1);Wr.set(n,r),Ua(n,r,e.translateAppendMethod)})}function B2(){Wr.forEach((t,e)=>{t.isConnected||(t.cleanup(),Wr.delete(e))})}async function O2(){Wr.forEach(t=>{t.remove()}),Wr.clear()}function P2(t){t.name===Dn.GMAIL&&(t.enableFunction=()=>{t.disableFunction(),Lo(document.querySelectorAll(t.translateAnchorSelector),t);let e=new MutationObserver(n=>{n.forEach(r=>{if(r.type==="childList"){B2();for(let a=0;a<r.addedNodes.length;a++){const i=r.addedNodes[a];if(i instanceof HTMLElement){const s=i.querySelectorAll(t.translateAnchorSelector);if(s.length>0){Lo(s,t);break}}}}})});return e.observe(document.body,{subtree:!0,childList:!0}),()=>{e==null||e.disconnect(),e=null,O2()}})}function F2(t){if(ma())return;const e=ys(location.href);e&&(Dr=sr(I2,b2),k2(e),P2(e),t.integrations[e.name].enable&&(e.disableFunction=e.enableFunction()),ti({name:ni.INJECTION,onDisconnect:()=>{Dr==null||Dr.remove(),Dr=null,e.disableFunction()}}))}function M2(t){F2(t),pm(t)}const U2=je({__name:"googleDocsIntegration",setup(t){const{googleDocsTranslateBallShow:e,googleDocsSettingBtnShow:n}=or();return(r,a)=>(B(),re(kt,null,[j(e)?(B(),Fe(Oh,{key:0})):ve("",!0),j(n)?(B(),Fe(Il,{key:1})):ve("",!0)],64))}}),Hl=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",$2=Hl+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",q2="["+Hl+"]["+$2+"]*",W2=new RegExp("^"+q2+"$");function Vl(t,e){const n=[];let r=e.exec(t);for(;r;){const a=[];a.startIndex=e.lastIndex-r[0].length;const i=r.length;for(let s=0;s<i;s++)a.push(r[s]);n.push(a),r=e.exec(t)}return n}const As=function(t){const e=W2.exec(t);return!(e===null||typeof e>"u")};function G2(t){return typeof t<"u"}const H2={allowBooleanAttributes:!1,unpairedTags:[]};function V2(t,e){e=Object.assign({},H2,e);const n=[];let r=!1,a=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=Ro(t,i),i.err)return i}else if(t[i]==="<"){let s=i;if(i++,t[i]==="!"){i=No(t,i);continue}else{let o=!1;t[i]==="/"&&(o=!0,i++);let l="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)l+=t[i];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),i--),!J2(l)){let f;return l.trim().length===0?f="Invalid space after '<'.":f="Tag '"+l+"' is an invalid name.",$t("InvalidTag",f,on(t,i))}const c=Y2(t,i);if(c===!1)return $t("InvalidAttr","Attributes for '"+l+"' have open quote.",on(t,i));let u=c.value;if(i=c.index,u[u.length-1]==="/"){const f=i-u.length;u=u.substring(0,u.length-1);const h=ko(u,e);if(h===!0)r=!0;else return $t(h.err.code,h.err.msg,on(t,f+h.err.line))}else if(o)if(c.tagClosed){if(u.trim().length>0)return $t("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",on(t,s));if(n.length===0)return $t("InvalidTag","Closing tag '"+l+"' has not been opened.",on(t,s));{const f=n.pop();if(l!==f.tagName){let h=on(t,f.tagStartPos);return $t("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+l+"'.",on(t,s))}n.length==0&&(a=!0)}}else return $t("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",on(t,i));else{const f=ko(u,e);if(f!==!0)return $t(f.err.code,f.err.msg,on(t,i-u.length+f.err.line));if(a===!0)return $t("InvalidXml","Multiple possible root nodes found.",on(t,i));e.unpairedTags.indexOf(l)!==-1||n.push({tagName:l,tagStartPos:s}),r=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=No(t,i);continue}else if(t[i+1]==="?"){if(i=Ro(t,++i),i.err)return i}else break;else if(t[i]==="&"){const f=Q2(t,i);if(f==-1)return $t("InvalidChar","char '&' is not expected.",on(t,i));i=f}else if(a===!0&&!Io(t[i]))return $t("InvalidXml","Extra text at the end",on(t,i));t[i]==="<"&&i--}}else{if(Io(t[i]))continue;return $t("InvalidChar","char '"+t[i]+"' is not expected.",on(t,i))}if(r){if(n.length==1)return $t("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",on(t,n[0].tagStartPos));if(n.length>0)return $t("InvalidXml","Invalid '"+JSON.stringify(n.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $t("InvalidXml","Start tag expected.",1);return!0}function Io(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Ro(t,e){const n=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const r=t.substr(n,e-n);if(e>5&&r==="xml")return $t("InvalidXml","XML declaration allowed only at the start of the document.",on(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function No(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let n=1;for(e+=8;e<t.length;e++)if(t[e]==="<")n++;else if(t[e]===">"&&(n--,n===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const z2='"',j2="'";function Y2(t,e){let n="",r="",a=!1;for(;e<t.length;e++){if(t[e]===z2||t[e]===j2)r===""?r=t[e]:r!==t[e]||(r="");else if(t[e]===">"&&r===""){a=!0;break}n+=t[e]}return r!==""?!1:{value:n,index:e,tagClosed:a}}const X2=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ko(t,e){const n=Vl(t,X2),r={};for(let a=0;a<n.length;a++){if(n[a][1].length===0)return $t("InvalidAttr","Attribute '"+n[a][2]+"' has no space in starting.",na(n[a]));if(n[a][3]!==void 0&&n[a][4]===void 0)return $t("InvalidAttr","Attribute '"+n[a][2]+"' is without value.",na(n[a]));if(n[a][3]===void 0&&!e.allowBooleanAttributes)return $t("InvalidAttr","boolean attribute '"+n[a][2]+"' is not allowed.",na(n[a]));const i=n[a][2];if(!Z2(i))return $t("InvalidAttr","Attribute '"+i+"' is an invalid name.",na(n[a]));if(!r.hasOwnProperty(i))r[i]=1;else return $t("InvalidAttr","Attribute '"+i+"' is repeated.",na(n[a]))}return!0}function K2(t,e){let n=/\d/;for(t[e]==="x"&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(n))break}return-1}function Q2(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,K2(t,e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(t[e]===";")break;return-1}return e}function $t(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function Z2(t){return As(t)}function J2(t){return As(t)}function on(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function na(t){return t.startIndex+t[1].length}const ev={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,n){return t},captureMetaData:!1},tv=function(t){return Object.assign({},ev,t)};let Va;typeof Symbol!="function"?Va="@@xmlMetadata":Va=Symbol("XML Node Metadata");class gr{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:n})}addChild(e,n){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),n!==void 0&&(this.child[this.child.length-1][Va]={startIndex:n})}static getMetaDataSymbol(){return Va}}function nv(t,e){const n={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let r=1,a=!1,i=!1,s="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(a&&hr(t,"!ENTITY",e)){e+=7;let o,l;[o,l,e]=rv(t,e+1),l.indexOf("&")===-1&&(n[o]={regx:RegExp(`&${o};`,"g"),val:l})}else if(a&&hr(t,"!ELEMENT",e)){e+=8;const{index:o}=iv(t,e+1);e=o}else if(a&&hr(t,"!ATTLIST",e))e+=8;else if(a&&hr(t,"!NOTATION",e)){e+=9;const{index:o}=av(t,e+1);e=o}else if(hr(t,"!--",e))i=!0;else throw new Error("Invalid DOCTYPE");r++,s=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,r--):r--,r===0)break}else t[e]==="["?a=!0:s+=t[e];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:e}}const ar=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function rv(t,e){e=ar(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e])&&t[e]!=='"'&&t[e]!=="'";)n+=t[e],e++;if(Cs(n),e=ar(t,e),t.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[e]==="%")throw new Error("Parameter entities are not supported");let r="";return[e,r]=Fa(t,e,"entity"),e--,[n,r,e]}function av(t,e){e=ar(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;Cs(n),e=ar(t,e);const r=t.substring(e,e+6).toUpperCase();if(r!=="SYSTEM"&&r!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${r}"`);e+=r.length,e=ar(t,e);let a=null,i=null;if(r==="PUBLIC")[e,a]=Fa(t,e,"publicIdentifier"),e=ar(t,e),(t[e]==='"'||t[e]==="'")&&([e,i]=Fa(t,e,"systemIdentifier"));else if(r==="SYSTEM"&&([e,i]=Fa(t,e,"systemIdentifier"),!i))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:a,systemIdentifier:i,index:--e}}function Fa(t,e,n){let r="";const a=t[e];if(a!=='"'&&a!=="'")throw new Error(`Expected quoted string, found "${a}"`);for(e++;e<t.length&&t[e]!==a;)r+=t[e],e++;if(t[e]!==a)throw new Error(`Unterminated ${n} value`);return e++,[e,r]}function iv(t,e){e=ar(t,e);let n="";for(;e<t.length&&!/\s/.test(t[e]);)n+=t[e],e++;if(!Cs(n))throw new Error(`Invalid element name: "${n}"`);e=ar(t,e);let r="";if(t[e]==="E"&&hr(t,"MPTY",e))e+=4;else if(t[e]==="A"&&hr(t,"NY",e))e+=2;else if(t[e]==="("){for(e++;e<t.length&&t[e]!==")";)r+=t[e],e++;if(t[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${t[e]}"`);return{elementName:n,contentModel:r.trim(),index:e}}function hr(t,e,n){for(let r=0;r<e.length;r++)if(e[r]!==t[n+r+1])return!1;return!0}function Cs(t){if(As(t))return t;throw new Error(`Invalid entity name ${t}`)}const sv=/^[-+]?0x[a-fA-F0-9]+$/,ov=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,lv={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function uv(t,e={}){if(e=Object.assign({},lv,e),!t||typeof t!="string")return t;let n=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(n))return t;if(t==="0")return 0;if(e.hex&&sv.test(n))return fv(n,16);if(n.search(/.+[eE].+/)!==-1)return dv(t,n,e);{const r=ov.exec(n);if(r){const a=r[1]||"",i=r[2];let s=pv(r[3]);const o=a?t[i.length+1]===".":t[i.length]===".";if(!e.leadingZeros&&(i.length>1||i.length===1&&!o))return t;{const l=Number(n),c=String(l);if(l===0)return l;if(c.search(/[eE]/)!==-1)return e.eNotation?l:t;if(n.indexOf(".")!==-1)return c==="0"||c===s||c===`${a}${s}`?l:t;let u=i?s:n;return i?u===c||a+u===c?l:t:u===c||u===a+c?l:t}}else return t}}const cv=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function dv(t,e,n){if(!n.eNotation)return t;const r=e.match(cv);if(r){let a=r[1]||"";const i=r[3].indexOf("e")===-1?"E":"e",s=r[2],o=a?t[s.length+1]===i:t[s.length]===i;return s.length>1&&o?t:s.length===1&&(r[3].startsWith(`.${i}`)||r[3][0]===i)?Number(e):n.leadingZeros&&!o?(e=(r[1]||"")+r[3],Number(e)):t}else return t}function pv(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function fv(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function gv(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(const n of t)if(typeof n=="string"&&e===n||n instanceof RegExp&&n.test(e))return!0}:()=>!1}class hv{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCodePoint(Number.parseInt(r,16))}},this.addExternalEntities=mv,this.parseXml=wv,this.parseTextData=vv,this.resolveNameSpace=Ev,this.buildAttributesMap=Tv,this.isItStopNode=Av,this.replaceEntitiesValue=xv,this.readStopNodeData=Sv,this.saveTextToParentTag=yv,this.addChild=bv,this.ignoreAttributesFn=gv(this.options.ignoreAttributes)}}function mv(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:t[r]}}}function vv(t,e,n,r,a,i,s){if(t!==void 0&&(this.options.trimValues&&!r&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));const o=this.options.tagValueProcessor(e,t,n,a,i);return o==null?t:typeof o!=typeof t||o!==t?o:this.options.trimValues?es(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?es(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Ev(t){if(this.options.removeNSPrefix){const e=t.split(":"),n=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=n+e[1])}return t}const _v=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Tv(t,e,n){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){const r=Vl(t,_v),a=r.length,i={};for(let s=0;s<a;s++){const o=this.resolveNameSpace(r[s][1]);if(this.ignoreAttributesFn(o,e))continue;let l=r[s][4],c=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const u=this.options.attributeValueProcessor(o,l,e);u==null?i[c]=l:typeof u!=typeof l||u!==l?i[c]=u:i[c]=es(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const s={};return s[this.options.attributesGroupName]=i,s}return i}}const wv=function(t){t=t.replace(/\r\n?/g,`
`);const e=new gr("!xml");let n=e,r="",a="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const o=mr(t,">",i,"Closing Tag is not closed.");let l=t.substring(i+2,o).trim();if(this.options.removeNSPrefix){const f=l.indexOf(":");f!==-1&&(l=l.substr(f+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&(r=this.saveTextToParentTag(r,n,a));const c=a.substring(a.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let u=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(u=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=a.lastIndexOf("."),a=a.substring(0,u),n=this.tagsNodeStack.pop(),r="",i=o}else if(t[i+1]==="?"){let o=Ji(t,i,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,a),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const l=new gr(o.tagName);l.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(l[":@"]=this.buildAttributesMap(o.tagExp,a,o.tagName)),this.addChild(n,l,a,i)}i=o.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const o=mr(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(i+4,o-2);r=this.saveTextToParentTag(r,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}i=o}else if(t.substr(i+1,2)==="!D"){const o=nv(t,i);this.docTypeEntities=o.entities,i=o.i}else if(t.substr(i+1,2)==="!["){const o=mr(t,"]]>",i,"CDATA is not closed.")-2,l=t.substring(i+9,o);r=this.saveTextToParentTag(r,n,a);let c=this.parseTextData(l,n.tagname,a,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):n.add(this.options.textNodeName,c),i=o+2}else{let o=Ji(t,i,this.options.removeNSPrefix),l=o.tagName;const c=o.rawTagName;let u=o.tagExp,f=o.attrExpPresent,h=o.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,a,!1));const b=n;b&&this.options.unpairedTags.indexOf(b.tagname)!==-1&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),l!==e.tagname&&(a+=a?"."+l:l);const S=i;if(this.isItStopNode(this.options.stopNodes,a,l)){let x="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),u=l):u=u.substr(0,u.length-1),i=o.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)i=o.closeIndex;else{const _=this.readStopNodeData(t,c,h+1);if(!_)throw new Error(`Unexpected end of ${c}`);i=_.i,x=_.tagContent}const N=new gr(l);l!==u&&f&&(N[":@"]=this.buildAttributesMap(u,a,l)),x&&(x=this.parseTextData(x,l,a,!0,f,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),N.add(this.options.textNodeName,x),this.addChild(n,N,a,S)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),a=a.substr(0,a.length-1),u=l):u=u.substr(0,u.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const x=new gr(l);l!==u&&f&&(x[":@"]=this.buildAttributesMap(u,a,l)),this.addChild(n,x,a,S),a=a.substr(0,a.lastIndexOf("."))}else{const x=new gr(l);this.tagsNodeStack.push(n),l!==u&&f&&(x[":@"]=this.buildAttributesMap(u,a,l)),this.addChild(n,x,a,S),n=x}r="",i=h}}else r+=t[i];return e.child};function bv(t,e,n,r){this.options.captureMetaData||(r=void 0);const a=this.options.updateTag(e.tagname,n,e[":@"]);a===!1||(typeof a=="string"&&(e.tagname=a),t.addChild(e,r))}const xv=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function yv(t,e,n,r){return t&&(r===void 0&&(r=e.child.length===0),t=this.parseTextData(t,e.tagname,n,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,r),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Av(t,e,n){const r="*."+n;for(const a in t){const i=t[a];if(r===i||e===i)return!0}return!1}function Cv(t,e,n=">"){let r,a="";for(let i=e;i<t.length;i++){let s=t[i];if(r)s===r&&(r="");else if(s==='"'||s==="'")r=s;else if(s===n[0])if(n[1]){if(t[i+1]===n[1])return{data:a,index:i}}else return{data:a,index:i};else s==="	"&&(s=" ");a+=s}}function mr(t,e,n,r){const a=t.indexOf(e,n);if(a===-1)throw new Error(r);return a+e.length-1}function Ji(t,e,n,r=">"){const a=Cv(t,e+1,r);if(!a)return;let i=a.data;const s=a.index,o=i.search(/\s/);let l=i,c=!0;o!==-1&&(l=i.substring(0,o),i=i.substring(o+1).trimStart());const u=l;if(n){const f=l.indexOf(":");f!==-1&&(l=l.substr(f+1),c=l!==a.data.substr(f+1))}return{tagName:l,tagExp:i,closeIndex:s,attrExpPresent:c,rawTagName:u}}function Sv(t,e,n){const r=n;let a=1;for(;n<t.length;n++)if(t[n]==="<")if(t[n+1]==="/"){const i=mr(t,">",n,`${e} is not closed`);if(t.substring(n+2,i).trim()===e&&(a--,a===0))return{tagContent:t.substring(r,n),i};n=i}else if(t[n+1]==="?")n=mr(t,"?>",n+1,"StopNode is not closed.");else if(t.substr(n+1,3)==="!--")n=mr(t,"-->",n+3,"StopNode is not closed.");else if(t.substr(n+1,2)==="![")n=mr(t,"]]>",n,"StopNode is not closed.")-2;else{const i=Ji(t,n,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&a++,n=i.closeIndex)}}function es(t,e,n){if(e&&typeof t=="string"){const r=t.trim();return r==="true"?!0:r==="false"?!1:uv(t,n)}else return G2(t)?t:""}const Wi=gr.getMetaDataSymbol();function Dv(t,e){return zl(t,e)}function zl(t,e,n){let r;const a={};for(let i=0;i<t.length;i++){const s=t[i],o=Lv(s);let l="";if(n===void 0?l=o:l=n+"."+o,o===e.textNodeName)r===void 0?r=s[o]:r+=""+s[o];else{if(o===void 0)continue;if(s[o]){let c=zl(s[o],e,l);const u=Rv(c,e);s[Wi]!==void 0&&(c[Wi]=s[Wi]),s[":@"]?Iv(c,s[":@"],l,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),a[o]!==void 0&&a.hasOwnProperty(o)?(Array.isArray(a[o])||(a[o]=[a[o]]),a[o].push(c)):e.isArray(o,l,u)?a[o]=[c]:a[o]=c}}}return typeof r=="string"?r.length>0&&(a[e.textNodeName]=r):r!==void 0&&(a[e.textNodeName]=r),a}function Lv(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const r=e[n];if(r!==":@")return r}}function Iv(t,e,n,r){if(e){const a=Object.keys(e),i=a.length;for(let s=0;s<i;s++){const o=a[s];r.isArray(o,n+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function Rv(t,e){const{textNodeName:n}=e,r=Object.keys(t).length;return!!(r===0||r===1&&(t[n]||typeof t[n]=="boolean"||t[n]===0))}class Nv{constructor(e){this.externalEntities={},this.options=tv(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const i=V2(e,n);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const r=new hv(this.options);r.addExternalEntities(this.externalEntities);const a=r.parseXml(e);return this.options.preserveOrder||a===void 0?a:Dv(a,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}static getMetaDataSymbol(){return gr.getMetaDataSymbol()}}var ia={exports:{}};/*! https://mths.be/he v1.2.0 by @mathias | MIT license */var kv=ia.exports,Bo;function Bv(){return Bo||(Bo=1,function(t,e){(function(n){var r=e,a=t&&t.exports==r&&t,i=typeof to=="object"&&to;(i.global===i||i.window===i)&&(n=i);var s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[\x01-\x7F]/g,l=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,c=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,u={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","	":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr",:"ordf",:"aacute",:"Aacute",:"agrave",:"Agrave",:"abreve",:"Abreve",:"acirc",:"Acirc",:"aring",:"angst",:"auml",:"Auml",:"atilde",:"Atilde",:"aogon",:"Aogon",:"amacr",:"Amacr",:"aelig",:"AElig","":"bscr","":"bopf","":"bfr","":"Bopf",:"Bscr","":"Bfr","":"cfr","":"cscr","":"copf",:"Cfr","":"Cscr",:"Copf",:"cacute",:"Cacute",:"ccirc",:"Ccirc",:"ccaron",:"Ccaron",:"cdot",:"Cdot",:"ccedil",:"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf",:"dcaron",:"Dcaron",:"dstrok",:"Dstrok",:"eth",:"ETH","":"ee",:"escr","":"efr","":"eopf",:"Escr","":"Efr","":"Eopf",:"eacute",:"Eacute",:"egrave",:"Egrave",:"ecirc",:"Ecirc",:"ecaron",:"Ecaron",:"euml",:"Euml",:"edot",:"Edot",:"eogon",:"Eogon",:"emacr",:"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf",:"Fscr",:"fflig",:"ffilig",:"ffllig",:"filig",fj:"fjlig",:"fllig",:"fnof",:"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr",:"gacute",:"gbreve",:"Gbreve",:"gcirc",:"Gcirc",:"gdot",:"Gdot",:"Gcedil","":"hfr",:"planckh","":"hscr","":"hopf",:"Hscr",:"Hfr",:"Hopf",:"hcirc",:"Hcirc",:"hbar",:"hstrok",:"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf",:"Iscr",:"Im",:"iacute",:"Iacute",:"igrave",:"Igrave",:"icirc",:"Icirc",:"iuml",:"Iuml",:"itilde",:"Itilde",:"Idot",:"iogon",:"Iogon",:"imacr",:"Imacr",:"ijlig",:"IJlig",:"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf",:"jcirc",:"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr",:"kcedil",:"Kcedil","":"lfr","":"lscr",:"ell","":"lopf",:"Lscr","":"Lfr","":"Lopf",:"lacute",:"Lacute",:"lcaron",:"Lcaron",:"lcedil",:"Lcedil",:"lstrok",:"Lstrok",:"lmidot",:"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf",:"Mscr","":"nfr","":"nopf","":"nscr",:"Nopf","":"Nscr","":"Nfr",:"nacute",:"Nacute",:"ncaron",:"Ncaron",:"ntilde",:"Ntilde",:"ncedil",:"Ncedil","":"numero",:"eng",:"ENG","":"oopf","":"ofr",:"oscr","":"Oscr","":"Ofr","":"Oopf",:"ordm",:"oacute",:"Oacute",:"ograve",:"Ograve",:"ocirc",:"Ocirc",:"ouml",:"Ouml",:"odblac",:"Odblac",:"otilde",:"Otilde",:"oslash",:"Oslash",:"omacr",:"Omacr",:"oelig",:"OElig","":"pfr","":"pscr","":"popf",:"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr",:"Qopf",:"kgreen","":"rfr","":"ropf","":"rscr",:"Rscr",:"Re",:"Ropf",:"racute",:"Racute",:"rcaron",:"Rcaron",:"rcedil",:"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS",:"sacute",:"Sacute",:"scirc",:"Scirc",:"scaron",:"Scaron",:"scedil",:"Scedil",:"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf",:"tcaron",:"Tcaron",:"tcedil",:"Tcedil","":"trade",:"tstrok",:"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr",:"uacute",:"Uacute",:"ugrave",:"Ugrave",:"ubreve",:"Ubreve",:"ucirc",:"Ucirc",:"uring",:"Uring",:"uuml",:"Uuml",:"udblac",:"Udblac",:"utilde",:"Utilde",:"uogon",:"Uogon",:"umacr",:"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr",:"wcirc",:"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf",:"yacute",:"Yacute",:"ycirc",:"Ycirc",:"yuml",:"Yuml","":"zscr","":"zfr","":"zopf",:"Zfr",:"Zopf","":"Zscr",:"zacute",:"Zacute",:"zcaron",:"Zcaron",:"zdot",:"Zdot",:"imped",:"thorn",:"THORN",:"napos",:"alpha",:"Alpha",:"beta",:"Beta",:"gamma",:"Gamma",:"delta",:"Delta",:"epsi","":"epsiv",:"Epsilon",:"gammad",:"Gammad",:"zeta",:"Zeta",:"eta",:"Eta",:"theta",:"thetav",:"Theta",:"iota",:"Iota",:"kappa",:"kappav",:"Kappa",:"lambda",:"Lambda",:"mu",:"micro",:"Mu",:"nu",:"Nu",:"xi",:"Xi",:"omicron",:"Omicron",:"pi",:"piv",:"Pi",:"rho",:"rhov",:"Rho",:"sigma",:"Sigma",:"sigmaf",:"tau",:"Tau",:"upsi",:"Upsilon",:"Upsi",:"phi",:"phiv",:"Phi",:"chi",:"Chi",:"psi",:"Psi",:"omega",:"ohm",:"acy",:"Acy",:"bcy",:"Bcy",:"vcy",:"Vcy",:"gcy",:"Gcy",:"gjcy",:"GJcy",:"dcy",:"Dcy",:"djcy",:"DJcy",:"iecy",:"IEcy",:"iocy",:"IOcy",:"jukcy",:"Jukcy",:"zhcy",:"ZHcy",:"zcy",:"Zcy",:"dscy",:"DScy",:"icy",:"Icy",:"iukcy",:"Iukcy",:"yicy",:"YIcy",:"jcy",:"Jcy",:"jsercy",:"Jsercy",:"kcy",:"Kcy",:"kjcy",:"KJcy",:"lcy",:"Lcy",:"ljcy",:"LJcy",:"mcy",:"Mcy",:"ncy",:"Ncy",:"njcy",:"NJcy",:"ocy",:"Ocy",:"pcy",:"Pcy",:"rcy",:"Rcy",:"scy",:"Scy",:"tcy",:"Tcy",:"tshcy",:"TSHcy",:"ucy",:"Ucy",:"ubrcy",:"Ubrcy",:"fcy",:"Fcy",:"khcy",:"KHcy",:"tscy",:"TScy",:"chcy",:"CHcy",:"dzcy",:"DZcy",:"shcy",:"SHcy",:"shchcy",:"SHCHcy",:"hardcy",:"HARDcy",:"ycy",:"Ycy",:"softcy",:"SOFTcy",:"ecy",:"Ecy",:"yucy",:"YUcy",:"yacy",:"YAcy",:"aleph",:"beth",:"gimel",:"daleth"},f=/["&'<>`]/g,h={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},b=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,S=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,x=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,N={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},_={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},E={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},g=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],p=String.fromCharCode,m={},d=m.hasOwnProperty,J=function(K,de){return d.call(K,de)},q=function(K,de){for(var ne=-1,we=K.length;++ne<we;)if(K[ne]==de)return!0;return!1},W=function(K,de){if(!K)return de;var ne={},we;for(we in de)ne[we]=J(K,we)?K[we]:de[we];return ne},oe=function(K,de){var ne="";return K>=55296&&K<=57343||K>1114111?(de&&X("character reference outside the permissible Unicode range"),""):J(E,K)?(de&&X("disallowed character reference"),E[K]):(de&&q(g,K)&&X("disallowed character reference"),K>65535&&(K-=65536,ne+=p(K>>>10&1023|55296),K=56320|K&1023),ne+=p(K),ne)},Y=function(K){return"&#x"+K.toString(16).toUpperCase()+";"},H=function(K){return"&#"+K+";"},X=function(K){throw Error("Parse error: "+K)},A=function(K,de){de=W(de,A.options);var ne=de.strict;ne&&S.test(K)&&X("forbidden code point");var we=de.encodeEverything,Q=de.useNamedReferences,Le=de.allowUnsafeSymbols,ie=de.decimal?H:Y,O=function(M){return ie(M.charCodeAt(0))};return we?(K=K.replace(o,function(M){return Q&&J(u,M)?"&"+u[M]+";":O(M)}),Q&&(K=K.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),Q&&(K=K.replace(c,function(M){return"&"+u[M]+";"}))):Q?(Le||(K=K.replace(f,function(M){return"&"+u[M]+";"})),K=K.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),K=K.replace(c,function(M){return"&"+u[M]+";"})):Le||(K=K.replace(f,O)),K.replace(s,function(M){var ee=M.charCodeAt(0),Ae=M.charCodeAt(1),Re=(ee-55296)*1024+Ae-56320+65536;return ie(Re)}).replace(l,O)};A.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var D=function(K,de){de=W(de,D.options);var ne=de.strict;return ne&&b.test(K)&&X("malformed character reference"),K.replace(x,function(we,Q,Le,ie,O,M,ee,Ae,Re){var Ue,pe,ge,Me,qe,Ye;return Q?(qe=Q,N[qe]):Le?(qe=Le,Ye=ie,Ye&&de.isAttributeValue?(ne&&Ye=="="&&X("`&` did not start a character reference"),we):(ne&&X("named character reference was not terminated by a semicolon"),_[qe]+(Ye||""))):O?(ge=O,pe=M,ne&&!pe&&X("character reference was not terminated by a semicolon"),Ue=parseInt(ge,10),oe(Ue,ne)):ee?(Me=ee,pe=Ae,ne&&!pe&&X("character reference was not terminated by a semicolon"),Ue=parseInt(Me,16),oe(Ue,ne)):(ne&&X("named character reference was not terminated by a semicolon"),we)})};D.options={isAttributeValue:!1,strict:!1};var y=function(K){return K.replace(f,function(de){return h[de]})},F={version:"1.2.0",encode:A,decode:D,escape:y,unescape:D};if(r&&!r.nodeType)if(a)a.exports=F;else for(var G in F)J(F,G)&&(r[G]=F[G]);else n.he=F})(kv)}(ia,ia.exports)),ia.exports}var Ov=Bv();const Pv=cs(Ov),Gi={OK:"OK",ERROR:"ERROR",LOGIN_REQUIRED:"LOGIN_REQUIRED"},Hi={BOT_DETECTED:"Sign in to confirm you're not a bot",AGE_RESTRICTED:"This video may be inappropriate for some users.",VIDEO_UNAVAILABLE:"This video is unavailable"},Fv=["strong","em","b","i","mark","small","del","ins","sub","sup"],Mv=["zh-CN","zh-TW","zh-Hant","zh-Hans","zh","ja","ko","ja-JP","ko-KR"];class Oo{constructor(e){Ce(this,"videoId",null);Ce(this,"_preserveFormatting",!1);Ce(this,"innertubeData",null);Ce(this,"captionsJson",null);Ce(this,"captionLanguage","");Ce(this,"url","");Ce(this,"adCallback",null);Ce(this,"adObserver",null);Ce(this,"containerObserver",null);this.videoId=(e==null?void 0:e.videoId)||null,this._preserveFormatting=e.preserveFormatting||!1}async fetchCaption(){this.innertubeData||(this.innertubeData=await this._getInnertubeData()),this.captionsJson=this._extractCaptionJson(this.innertubeData);const e=this._selectBestCaption(this.captionsJson);if(!e)return nt.info(`No subtitle found for video: ${this.videoId}`),[];this.captionLanguage=e.languageCode;const n=await this._getCaptionXml(e),r=this._parseCaptionXml(n);return this.formatSubtitle(r)}async fetchSubtitle(e){const n=this.getManualSubtitleLanguage(),r=e==null?void 0:e.split("-")[0];if(this.url&&(n!=null&&n.includes(r)))return this._fetchManualSubtitle(r);let a=this._selectBestCaption(this.captionsJson,e);if(!a&&r&&(a=this._selectBestCaption(this.captionsJson,r)),!a)return[];const i=await this._getCaptionXml(a),s=this._parseCaptionXml(i);return s!=null&&s.length?this.formatSubtitle(s):[]}async _fetchManualSubtitle(e){const r={"zh-CN":"zh-Hans","zh-TW":"zh-Hant"}[e]||e;if(r)try{const a=`${this.url}&tlang=${r}`,s=await(await fetch(a,{method:"GET"})).json();return nt.success("_fetchManualSubtitle data",s),(s==null?void 0:s.events)||[]}catch{return[]}return[]}getManualSubtitleLanguage(){var e;return((e=this.captionsJson)==null?void 0:e.filter(n=>(n==null?void 0:n.kind)!=="asr").map(n=>n==null?void 0:n.languageCode))||[]}processInterceptorData(e){var n;try{const r=JSON.parse(e.data);return this.url=typeof e.url=="string"?e.url:JSON.stringify(e.url),nt.success("",r,this.url),((n=r==null?void 0:r.events)==null?void 0:n.length)===0?[]:this.formatInterceptorData(r.events,e.language)}catch{return[]}}formatInterceptorData(e,n){try{const a=e.filter(s=>s.segs&&s.segs.length>0&&(s==null?void 0:s.tStartMs)&&(s==null?void 0:s.dDurationMs)).map(s=>this._createCaptionItem(s,n));if(a.length===0)return[];for(let s=0;s<a.length-1;s++){const o=a[s],l=a[s+1];o.end===l.end&&(o.text+=` ${l.text}`,o.duration=o.end-o.start,a.splice(s+1,1),s--)}const i=a.map((s,o)=>{const l=Number(s.start)/1e3,c=Number(s.duration)/1e3,u=Number(s.end)/1e3;return{text:s.text,start:l,duration:c,end:u,index:o}}).filter(s=>s!==null);return this.formatSubtitle(i)}catch{return[]}}formatSubtitle(e){if((e==null?void 0:e.length)===0)return[];for(let n=0;n<e.length-2;n++){const r=e[n],a=e[n+1],i=e[n+2];this._isFloatEqual(r.start+r.duration,i.start)&&(r.text+=` ${a.text}`,r.duration=Math.round((i.start-r.start)*1e3)/1e3,r.end=Math.round((r.start+r.duration)*1e3)/1e3,e.splice(n+1,1),n--)}return e}getCaptionLanguage(){return this.captionLanguage}setVideoInfo(e){if(!e)return;const n=typeof e=="string"?JSON.parse(e):e;this.innertubeData=n}hasAds(){var e,n;return((n=(e=this.innertubeData)==null?void 0:e.adPlacements)==null?void 0:n.length)>0}initAdDetector(e){this.adCallback=e,this.initAdObserver()}initAdObserver(){var n;this.adObserver=new MutationObserver(r=>{let a=!1;r.forEach(i=>{i.type==="childList"&&(a=this.checkAdElementChanges(i))}),a&&this.checkAdStatus()});const e=document.querySelector(".video-ads")||document.querySelector(".ytp-ad-module");e&&((n=this.adObserver)==null||n.observe(e,{childList:!0,subtree:!0})),this.checkAdStatus()}checkAdElementChanges(e){return Array.from(e.addedNodes).length>0||Array.from(e.removedNodes).length>0}checkAdStatus(){var r,a,i;const e=document.querySelector(".video-ads"),n=!!((r=e==null?void 0:e.innerHTML)!=null&&r.trim()||(a=e==null?void 0:e.textContent)!=null&&a.trim());(i=this.adCallback)==null||i.onAdStatusChange(n)}destroyAdDetector(){this.adObserver&&(this.adObserver.disconnect(),this.adObserver=null),this.containerObserver&&(this.containerObserver.disconnect(),this.containerObserver=null),this.adCallback=null}getVideoInfo(){var e;return((e=this.innertubeData)==null?void 0:e.videoDetails)||{}}_selectBestCaption(e,n){if(!e||e.length===0)return null;if(n)return e.find(i=>i.languageCode===n&&i.kind!=="asr");if(e.length===1)return e[0];const r=this._formatCaptionLanguage();let a=e.find(i=>i.languageCode===r&&i.kind!=="asr");return a||(a=e.find(i=>i.languageCode===r||i.languageCode==="en")),a||(a=e[0]),a}async _getInnertubeData(){return await(await fetch("https://www.youtube.com/youtubei/v1/player",{method:"POST",body:JSON.stringify({contentCheckOk:!1,context:{client:{clientName:"WEB_EMBEDDED_PLAYER",clientVersion:"1.20241009.01.00"}},videoId:this.videoId})})).json()}_extractCaptionJson(e){var r,a;try{this._isAvailable(e.playabilityStatus)}catch{return[]}const n=(a=(r=e.captions)==null?void 0:r.playerCaptionsTracklistRenderer)==null?void 0:a.captionTracks;return n||(nt.info(`Transcripts disabled for video: ${this.videoId}`),[])}_isAvailable(e){var r,a,i;const n=e==null?void 0:e.status;if(n!==Gi.OK&&n!=null){const s=e.reason;if(n===Gi.LOGIN_REQUIRED){if(s===Hi.BOT_DETECTED)throw new Error(`Request blocked for video: ${this.videoId}`);if(s===Hi.AGE_RESTRICTED)throw new Error(`Age restricted for video: ${this.videoId}`)}if(n===Gi.ERROR&&s===Hi.VIDEO_UNAVAILABLE)throw new Error(`Video unavailable: ${this.videoId}`);const o=((i=(a=(r=e.errorScreen)==null?void 0:r.playerErrorMessageRenderer)==null?void 0:a.subreason)==null?void 0:i.runs)||[];throw new Error(`Video unplayable: ${this.videoId}, reason: ${s}, subreasons: ${o.map(l=>l.text||"").join(", ")}`)}}async _getCaptionXml(e){return await(await fetch(e.baseUrl,{method:"GET"})).text()}_parseCaptionXml(e){var s;const a=((s=new Nv({ignoreAttributes:!1,attributeNamePrefix:""}).parse(e).transcript)==null?void 0:s.text)||[],i=this._getHtmlRegex();return a.map(o=>{const l=typeof o["#text"]=="string"?o["#text"]:JSON.stringify(o);return{text:l?Pv.unescape(l).replace(i,""):"",start:parseFloat(o.start),duration:parseFloat(o.dur||"0.0")}}).filter(o=>o.text)}_getHtmlRegex(){if(this._preserveFormatting){const e=Fv.join("|");return new RegExp(`<\\/?(?!\\/?(?:${e})\\b).*?\\b>`,"gi")}return/<[^>]*>/gi}_isFloatEqual(e,n,r=.001){return Math.abs(e-n)<r}_needsSpaceJoining(e){return!Mv.includes(e)}_createCaptionItem(e,n){var i;const a=this._needsSpaceJoining(n)?" ":"";return{text:((i=e.segs)==null?void 0:i.map(s=>{var o;return(o=s.utf8)==null?void 0:o.replace(/\n/g," ")}).join(a))||"",start:Number(e.tStartMs),duration:Number(e.dDurationMs),end:Number(e.tStartMs)+Number(e.dDurationMs)}}_formatCaptionLanguage(){let e=navigator.language;return(e==="zh-TW"||e==="zh-HK")&&(e="zh-Hant"),e}}const Cr=()=>{},Uv={"zh-Hant":"zh-TW","en-US":"en"};class $v{constructor(e){Ce(this,"videoPlatform","youtube");Ce(this,"translationService",Ln.GOOGLE);Ce(this,"captionLanguage","");Ce(this,"targetLanguage","");Ce(this,"useManualSubtitle",!0);Ce(this,"displayMode",Fn.BILINGUAL);Ce(this,"videoElement",null);Ce(this,"captionElement",null);Ce(this,"subtitleElement",null);Ce(this,"subtitleExtractor",null);Ce(this,"captionList",[]);Ce(this,"subtitleList",[]);Ce(this,"isPlaying",!1);Ce(this,"lastRenderedTime",-1);Ce(this,"renderThrottleTimer",null);Ce(this,"currentSubtitle",{caption:"",subtitle:""});Ce(this,"translatedCount",0);Ce(this,"batchSize",10);Ce(this,"translateErrorcount",0);Ce(this,"pauseTranslation",!1);Ce(this,"isTranslating",!1);Ce(this,"needTranslate",!0);Ce(this,"translationQueue",[]);Ce(this,"preloadThreshold",15);Ce(this,"stopRender",!1);Ce(this,"isAdPlaying",!1);Ce(this,"captionCallbackCalled",!1);Ce(this,"translationCallback",Cr);Ce(this,"captionStatusCallback",Cr);Ce(this,"captionEntryTriggerCallback",Cr);Ce(this,"isInitialized",!1);Ce(this,"isDownloadingSubtitle",!1);Ce(this,"boundEventHandlers",{play:()=>this.handlePlay(),pause:()=>this.handlePause(),timeupdate:()=>this.handleTimeUpdate(),seeked:()=>this.handleSeeked()});this.isInitialized&&this.destroy(),this.initInterceptor(),this.videoPlatform=e.videoPlatform||"youtube",this.translationService=e.translationService,this.targetLanguage=e.targetLanguage,this.useManualSubtitle=e.useManualSubtitle??!0,this.displayMode=e.displayMode||Fn.BILINGUAL,this.videoElement=e.videoElement,this.captionElement=e.captionElement,this.subtitleElement=e.subtitleElement,this.translationCallback=e.translationCallback||Cr,this.captionStatusCallback=e.captionStatusCallback||Cr,this.captionEntryTriggerCallback=e.captionEntryTriggerCallback||Cr,nt.info("this.videoPlatform",this.videoPlatform)}initInterceptor(){window.addEventListener("message",e=>{if(e.source===window&&e.origin===window.location.origin){if(e.data.eventType==="ANYDOC_SUBTITLE_DATA"&&e.data.source==="inject"){this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0}));const n=e.data.data;(n==null?void 0:n.language)===this.targetLanguage?this.useManualSubtitle&&this.subtitleList.length!==this.captionList.length&&this.processInterceptorSubtitleData(n,"subtitle"):this.processInterceptorSubtitleData(n,"caption")}else if(e.data.eventType==="ANYDOC_VIDEO_INFO"&&e.data.source==="inject"){const n=e.data.data;mt(Ee.SUBTITLE_TRANSLATE_VIDEO_INFO,n)}}})}async processInterceptorSubtitleData(e,n){var r,a;try{this.subtitleExtractor=new Oo({}),n==="subtitle"?(this.subtitleList=this.subtitleExtractor.processInterceptorData(e),this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.captionList=this.subtitleExtractor.processInterceptorData(e),this.captionList.length>0&&(this.preloadSubtitles(),this.captionCallbackCalled||(this.captionCallbackCalled=!0,this.captionStatusCallback({hasCaption:!0})),this.captionLanguage=e.language,nt.success("",this.captionLanguage,this.captionList.length),this.initializeSubtitles()),this.useManualSubtitle&&this.needTranslate&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((a=this.subtitleList)==null?void 0:a.length)===0))}catch{}}async processVideoInfoData(){var e;try{const n=await rt(Ee.SUBTITLE_TRANSLATE_VIDEO_INFO),r=JSON.parse((n==null?void 0:n.data)||"{}");switch(Mr(Ee.SUBTITLE_TRANSLATE_VIDEO_INFO),this.videoPlatform){case"youtube":(e=this.subtitleExtractor)==null||e.setVideoInfo(r);break;default:nt.info(":",n==null?void 0:n.site)}}catch{}}async init(){this.setupVideoEventListeners(),this.processVideoInfoData(),setTimeout(()=>{this.captionList.length||this.captionEntryTriggerCallback&&this.captionEntryTriggerCallback()},3e3),setTimeout(()=>{this.captionList.length||this.fallbackToTraditionalMethod()},5e3),this.isInitialized=!0}async fallbackToTraditionalMethod(){var n,r,a;const e=new URL(location.href).searchParams.get("v")||"";this.subtitleExtractor=new Oo({videoId:e}),this.captionList=await this.subtitleExtractor.fetchCaption(),this.captionLanguage=((n=this.subtitleExtractor)==null?void 0:n.getCaptionLanguage())||"",this.preloadSubtitles(),(r=this.subtitleExtractor)!=null&&r.hasAds()&&((a=this.subtitleExtractor)==null||a.initAdDetector({onAdStatusChange:i=>{this.isAdPlaying=i}})),nt.success("",this.captionLanguage,this.targetLanguage),await this.initializeSubtitles()}async initializeSubtitles(){var e;this.useManualSubtitle&&this.subtitleExtractor&&(this.subtitleList=await this.subtitleExtractor.fetchSubtitle(this.targetLanguage),this.needTranslate=((e=this.subtitleList)==null?void 0:e.length)===0),this.isSameLanguage(this.captionLanguage,this.targetLanguage)&&(this.subtitleList=this.captionList,this.needTranslate=!1)}isSameLanguage(e,n){return e===n||Uv[e]===n}setupVideoEventListeners(){Object.entries(this.boundEventHandlers).forEach(([e,n])=>{var r;(r=this.videoElement)==null||r.addEventListener(e,n)})}handlePlay(){this.isPlaying=!0,this.startSubtitleRendering()}handlePause(){this.isPlaying=!1,this.stopSubtitleRendering()}handleTimeUpdate(){var e,n,r;this.isPlaying||(this.isPlaying=!!this.videoElement&&!((e=this.videoElement)!=null&&e.paused)&&!((n=this.videoElement)!=null&&n.ended)&&((r=this.videoElement)==null?void 0:r.readyState)>=2),this.isPlaying&&!this.stopRender&&this.processVideoUpdate()}handleSeeked(){this.stopRender||(this.lastRenderedTime=-1,this.processVideoUpdate())}processVideoUpdate(){this.checkAndRenderSubtitle(),this.checkTranslationQueue()}startSubtitleRendering(){this.stopRender||this.isAdPlaying||(this.stopSubtitleRendering(),this.renderSubtitleLoop())}stopSubtitleRendering(){this.renderThrottleTimer&&(clearTimeout(this.renderThrottleTimer),this.renderThrottleTimer=null)}renderSubtitleLoop(){!this.isPlaying||this.isAdPlaying||(this.processVideoUpdate(),this.renderThrottleTimer=setTimeout(()=>{this.renderSubtitleLoop()},200))}async checkAndRenderSubtitle(){var r;if(this.isAdPlaying)return;const e=((r=this.videoElement)==null?void 0:r.currentTime)||0;if(Math.abs(e-this.lastRenderedTime)<.1)return;const n=this.getSubtitleText(e);(n.caption!==this.currentSubtitle.caption||n.subtitle!==this.currentSubtitle.subtitle)&&(this.currentSubtitle=n,this.renderSubtitle(n),this.lastRenderedTime=e)}getSubtitleText(e){var s,o;if(!((s=this.captionList)!=null&&s.length))return{caption:"",subtitle:""};const n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return{caption:"",subtitle:""};const a=this.captionList[n].text;let i="";if(((o=this.subtitleList)==null?void 0:o.length)>n){const l=this.subtitleList[n];l!=null&&l.text&&(i=l.text)}return{caption:a,subtitle:i}}findSubtitleIndex(e,n){let r=0,a=n.length-1;for(;r<=a;){const i=Math.floor((r+a)/2),s=n[i];if(e>=s.start&&e<s.end)return i;e<s.start?a=i-1:r=i+1}return-1}async renderSubtitle(e){const{caption:n,subtitle:r}=e;if(this.isSameLanguage(this.captionLanguage,this.targetLanguage)){this.updateSingleCaption(n,"");return}if(r&&r.trim()){this.updateSingleCaption(n,r);return}this.updateSingleCaption(n,"")}updateSingleCaption(e,n=""){const r=e.trim(),a=n.trim();if(this.captionElement){this.captionElement.innerText=e;const i=this.displayMode===Fn.BILINGUAL&&r;this.captionElement.style.display=i?"block":"none"}this.subtitleElement&&(a?(this.subtitleElement.innerText=n,this.subtitleElement.style.display="block"):this.subtitleElement.style.display="none")}checkTranslationQueue(){var i;if(!this.needTranslate||this.isTranslating||this.pauseTranslation)return;const e=((i=this.videoElement)==null?void 0:i.currentTime)||0,n=this.findSubtitleIndex(e,this.captionList);if(n===-1)return;const r=n+1,a=Math.min(n+this.preloadThreshold,this.captionList.length);for(let s=r;s<a;s++)!this.isSubtitleTranslated(s)&&!this.translationQueue.includes(s)&&this.translationQueue.push(s);this.translationQueue.length>=this.batchSize&&this.processTranslationQueue()}async processTranslationQueue(e=""){if(!(this.isTranslating||this.translationQueue.length===0||this.pauseTranslation)){this.isTranslating=!0;try{const n=this.translationQueue.splice(0,this.batchSize),r=n.map(i=>this.captionList[i].text);nt.info(` ${r.length}  :${this.translationService}`);const a=await this.batchTranslateSubtitles(r);this.updateTranslationResults(n,a),this.translatedCount+=n.length,nt.success(` ${n.length} `)}catch{this.translateErrorcount++,this.translationQueue.push(...this.translationQueue.splice(0,this.batchSize))}finally{this.isTranslating=!1,this.translationQueue.length>0&&(e==="all"?await this.processTranslationQueue(e):setTimeout(()=>this.processTranslationQueue(e),1e3))}}}updateTranslationResults(e,n){e.forEach((r,a)=>{const i=this.captionList[r];for(;this.subtitleList.length<=r;)this.subtitleList.push({start:i.start,duration:i.duration,text:"",end:i.end,index:r});this.subtitleList[r]={start:i.start,duration:i.duration,text:n[a]||"",end:i.end,index:r}})}async batchTranslateSubtitles(e){return new Promise(async(n,r)=>{var i;if(e.length===0){n([]);return}const a=this.targetLanguage;try{const s=await zr({service:this.translationService,texts:e.map(o=>({text:o})),from:"",to:a,type:V.SUBTITLE},{position:"plugin_subtitle_translate",feature:"plugin_subtitle_translate"});(s==null?void 0:s.code)!==0&&(this.translationCallback({error:s}),r(s)),a!==this.targetLanguage&&n([]),n(((i=s==null?void 0:s.data)==null?void 0:i.map(o=>o.text))||e.map(()=>""))}catch(s){this.translationCallback({error:s}),n([])}})}async translateAllSubtitles(){if(this.captionList.length===0)return;await this.waitForTranslationComplete();const e=[];for(let n=0;n<this.captionList.length;n++)this.isSubtitleTranslated(n)||e.push(n);e.length!==0&&(this.translationQueue.push(...e),await this.processTranslationQueue("all"),await this.waitForTranslationComplete())}async waitForTranslationComplete(){return new Promise(e=>{const n=()=>{!this.isTranslating&&this.translationQueue.length===0?e():setTimeout(n,200)};n()})}preloadSubtitles(){const e=n=>{n.length>0&&n.forEach((r,a)=>{r.end=Math.round((r.start+r.duration)*1e3)/1e3,r.index=a})};e(this.captionList),e(this.subtitleList)}isSubtitleTranslated(e){var n,r;return e<0||e>=this.subtitleList.length?!1:!!((r=(n=this.subtitleList[e])==null?void 0:n.text)!=null&&r.trim())}hasCaption(){var e;return((e=this.captionList)==null?void 0:e.length)>0}pauseRendering(){this.stopRender=!0}resumeRendering(){this.stopRender=!1}cancelTranslate(){this.pauseTranslation=!0}destroy(){var e;this.stopSubtitleRendering(),(e=this.subtitleExtractor)==null||e.destroyAdDetector(),this.subtitleExtractor=null,this.captionList=[],this.subtitleList=[],this.translationQueue=[],this.captionLanguage="",this.targetLanguage="",this.useManualSubtitle=!0,this.isInitialized=!1,this.isPlaying=!1,this.lastRenderedTime=-1,this.currentSubtitle={caption:"",subtitle:""},this.translatedCount=0,this.translateErrorcount=0,this.pauseTranslation=!1,this.isTranslating=!1,this.needTranslate=!0,this.stopRender=!1,this.isAdPlaying=!1,this.videoElement&&Object.entries(this.boundEventHandlers).forEach(([n,r])=>{var a;(a=this.videoElement)==null||a.removeEventListener(n,r)})}formatTime(e){const n=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60),i=Math.floor(e%1*1e3);return`${n.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")},${i.toString().padStart(3,"0")}`}downloadSubtitle(){return new Promise(async e=>{var n;if(!this.captionList||this.captionList.length===0){setTimeout(()=>{e({isCompleted:!1,error:!0,message:"no_subtitle_data"})},100);return}try{const r=(n=this.subtitleExtractor)==null?void 0:n.getVideoInfo();if(this.isDownloadingSubtitle){setTimeout(()=>{e({isCompleted:!1,error:!1,message:""})},100);return}if(this.needTranslate&&this.subtitleList.length<this.captionList.length)try{this.isDownloadingSubtitle=!0,await this.translateAllSubtitles()}catch{this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:"translate_failed"})},100);return}e({isCompleted:!0,error:!1,message:""}),setTimeout(()=>{var s;const a=this.generateSrtContent(),i=(s=document.querySelector("yt-formatted-string.style-scope.ytd-watch-metadata"))==null?void 0:s.innerText;this.downloadSrtFile(a,(r==null?void 0:r.title)||i||"video"),this.isDownloadingSubtitle=!1},100)}catch(r){this.isDownloadingSubtitle=!1,setTimeout(()=>{e({isCompleted:!1,error:!0,message:(r==null?void 0:r.message)||"network_error"})},100)}})}generateSrtContent(){return this.captionList.map((e,n)=>{var l,c;const r=this.formatTime(e.start),a=this.formatTime(e.end),i=e.text.trim();let s="";this.subtitleList&&this.subtitleList.length>n&&(s=((c=(l=this.subtitleList[n])==null?void 0:l.text)==null?void 0:c.trim())||"");let o="";return this.displayMode===Fn.BILINGUAL?o=s?`${i}
${s}`:i:o=s,`${n+1}
${r} --> ${a}
${o}
`}).join(`
`)}downloadSrtFile(e,n){const r=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(r),i=document.createElement("a");i.id="subtitle-download-link",i.href=a,i.download=`${n}-${this.targetLanguage}-translation.srt`,i.style.display="none";const s=()=>{const o=document.getElementById("subtitle-download-link");o&&o.remove(),URL.revokeObjectURL(a)};i.addEventListener("click",()=>{setTimeout(s,100)}),document.body.appendChild(i),i.click()}setService(e){this.pauseTranslation=!1,this.translationService=e,this.needTranslate&&(this.subtitleList=[],this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue())}async setTargetLanguage(e){var n,r;e!==this.targetLanguage&&(this.targetLanguage=e,e===this.captionLanguage?(this.needTranslate=!1,this.subtitleList=this.captionList):this.useManualSubtitle?(this.subtitleList=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[],this.needTranslate=((r=this.subtitleList)==null?void 0:r.length)===0):(this.needTranslate=!0,this.subtitleList=[]),this.needTranslate&&(this.translatedCount=0,this.translationQueue=[],this.isTranslating=!1,this.checkTranslationQueue()))}async setUseManualSubtitle(e){var n;if(e!==this.useManualSubtitle&&(this.useManualSubtitle=e,this.useManualSubtitle)){const r=await((n=this.subtitleExtractor)==null?void 0:n.fetchSubtitle(this.targetLanguage))||[];r.length>0&&(this.subtitleList=r,this.needTranslate=!1)}}setDisplayMode(e){this.displayMode=e,this.captionElement&&(this.captionElement.style.display=e===Fn.BILINGUAL?"block":"none")}}const{userSettings:jl}=pt(),{onlineParams:qv}=an();let Yn=null,At=null;const ts=new Set,xn=C(void 0),Ss=C(!1),Ds=C(!1),Ls=C(!1),Is=C(!1),Wv=C(!1);Te(jl,(t,e)=>{e.subtitleTranslation.enable!==t.subtitleTranslation.enable&&(t.subtitleTranslation.enable?Gv():Hv()),t.subtitleTranslation.enable&&At&&pa(),e.subtitleTranslation.translationService!==t.subtitleTranslation.translationService&&(Yl(),xn.value&&(xn.value.translationService=t.subtitleTranslation.translationService),At==null||At.setService(t.subtitleTranslation.translationService)),e.targetLanguage!==t.targetLanguage&&(xn.value&&(xn.value.targetLanguage=t.targetLanguage),At==null||At.setTargetLanguage(t.targetLanguage)),e.subtitleTranslation.useSiteSubtitle!==t.subtitleTranslation.useSiteSubtitle&&(xn.value&&(xn.value.useManualSubtitle=t.subtitleTranslation.useSiteSubtitle),At==null||At.setUseManualSubtitle(t.subtitleTranslation.useSiteSubtitle)),e.subtitleTranslation.displayMode!==t.subtitleTranslation.displayMode&&(xn.value&&(xn.value.displayMode=t.subtitleTranslation.displayMode),At==null||At.setDisplayMode(t.subtitleTranslation.displayMode))});const Yl=()=>{Ss.value=!1,Ds.value=!1,Is.value=!1,Ls.value=!1},pa=()=>{if(Yn){const t=document.querySelector(Yn.originCaptionSelector);t&&(t.style.display="none")}},Rs=()=>{if(Yn){const t=document.querySelector(Yn.originCaptionSelector);t&&(t.style.display="block")}},Gv=()=>{if(At?At.resumeRendering():Ns(),Yn!=null&&Yn.subtitleBtnSelector){const t=document.querySelector(Yn.subtitleBtnSelector);t&&(t.getAttribute("aria-pressed")==="true"||setTimeout(()=>{t.click()},100))}pa()},Hv=()=>{At==null||At.pauseRendering(),Rs()},Vv=(t,e)=>{Yn=t,xn.value=e},zv=t=>{const e=t.error;e&&(Ss.value=!0,Rs(),At==null||At.cancelTranslate(),e.code===ze.EXTEND_LIMIT?Ds.value=!0:lc.includes(e.code)?Ls.value=!0:Is.value=!0)},jv=()=>{pa(),setTimeout(()=>{pa()},5e3),ts.forEach(t=>{try{t()}catch{}})},Yv=()=>At?At.downloadSubtitle():Promise.reject(new Error("subtitle translator not initialized")),Ns=async()=>{Yl(),At&&Xl(),xn.value&&jl.value.subtitleTranslation.enable&&(At=new $v({...xn.value,translationCallback:zv,captionStatusCallback:jv}),At.init())},Xl=()=>{At==null||At.destroy(),At=null},Xv=()=>{xn.value&&Ns()},Kv=t=>(ts.add(t),()=>ts.delete(t)),Qv=async()=>{var f;const{survey:t}=((f=qv.value)==null?void 0:f.subtitleConfig)||{};if(!t||!t.enable)return!1;const{dayTimes:e=1,weekTimes:n=3}=t,r=()=>{const h=new Date;return h.setHours(0,0,0,0),h.getTime()},a=()=>{const h=new Date,b=h.getDay(),S=b===0?-6:1-b;return h.setDate(h.getDate()+S),h.setHours(0,0,0,0),h.getTime()},i=await rt(Ee.SUBTITLE_SURVEY_SHOW_TIME)||[],s=r(),o=a(),l=i.filter(h=>h>=o);return l.filter(h=>h>=s).length>=e||l.length>=n?!1:(l.push(Date.now()),await mt(Ee.SUBTITLE_SURVEY_SHOW_TIME,l),!0)},li=()=>({setSubtitleTranslateInfo:Vv,resetSubtitleTranslateInfo:Xv,initTranslateSubtitle:Ns,destroySubtitleTranslate:Xl,hideOriginCaption:pa,showOriginCaption:Rs,limitError:Ds,errorTipShow:Is,translateError:Ss,otherLimitError:Ls,addCaptionStatusListener:Kv,downloadSubtitle:Yv,checkShowSurvey:Qv,userChangeService:Wv});var za=(t=>(t.YOUTUBE="youtube",t))(za||{});const Kl=[{name:"youtube",pattern:/^https:\/\/www\.youtube\.com\//i,videoIdPattern:/^(https?:\/\/)?(www\.|m\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})(?:[?#&].*)?$/i,btnAnchorSelector:"#movie_player .ytp-right-controls",videoSelector:"#movie_player video",originCaptionSelector:"#ytp-caption-window-container",btnAppendMethod:$r.INSERT_BEFORE,captionAnchorSelector:"#movie_player",captionAppendMethod:$r.APPEND_CHILD,subtitleBtnSelector:"#movie_player .ytp-subtitles-button"}];function ui(t){for(const e of Kl)if(t.match(e.pattern))return e;return null}function Po(t){for(const e of Kl){const n=t.match(e.videoIdPattern);if(n)return n[n.length-1]||null}return null}function Zv(t){if(t.name==="youtube"){if(!t.subtitleBtnSelector)return!1;const e=document.querySelector(t.subtitleBtnSelector);if(!e)return!1;const n=e.querySelector("svg");return n?n.getAttribute("fill-opacity")==="0.3":!1}return!1}const Jv={style:{position:"absolute",left:"40px",right:"40px",bottom:"5px",display:"flex","white-space":"pre-wrap","flex-direction":"column","pointer-events":"all","user-select":"text","align-items":"center"}},e0={key:0,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px"}},t0=je({__name:"captionWindow",setup(t){const{userSettings:e}=pt(),{initTranslateSubtitle:n,setSubtitleTranslateInfo:r,destroySubtitleTranslate:a,resetSubtitleTranslateInfo:i,hideOriginCaption:s,translateError:o,addCaptionStatusListener:l}=li(),c=ui(location.href);let u=Po(location.href),f=null,h=null,b=null,S=null;const x=C(0),N=tt("subtitleRef"),_=tt("captionRef"),E=C(!0),g=C(!1),p=Z(()=>e.value.subtitleTranslation.enable&&!o.value),m=()=>{const Y=document.getElementById("movie_player");Y&&(Y.classList.contains("ytp-autohide")?x.value=0:x.value=60,h=new MutationObserver(X=>{X.forEach(A=>{A.type==="attributes"&&A.attributeName==="class"&&(A.target.classList.contains("ytp-autohide")?x.value=0:x.value=60)})}),h.observe(Y,{attributes:!0,attributeFilter:["class"],subtree:!1}))},d=Y=>{f=new MutationObserver(H=>{H.forEach(X=>{if(X.type==="attributes"&&X.attributeName==="src"){const A=X.target;if(A.src){nt.info("video src change",A.src);const D=Po(location.href);D||(E.value=!1),u!==D&&(E.value=!1,_.value&&(_.value.innerText=""),N.value&&(N.value.innerText=""),u=D,i())}}})}),f.observe(Y,{attributes:!0,attributeFilter:["src"]})},J=()=>{if(!c.subtitleBtnSelector)return;const Y=document.querySelector(c.subtitleBtnSelector);Y&&Y.addEventListener("click",()=>{p.value&&(E.value=Y.getAttribute("aria-pressed")==="true",setTimeout(()=>{s()},100))})},q=Y=>{Y.name===za.YOUTUBE&&(m(),J())},W=()=>{S&&clearTimeout(S),E.value=!0,g.value=!0,S=setTimeout(()=>{g.value=!1},3e3)};async function oe(){try{if(c.name===za.YOUTUBE){const Y=document.querySelector(c.subtitleBtnSelector);if(Y){const H=Y.getAttribute("aria-pressed")==="true";Y.click(),H&&setTimeout(()=>{Y.click()},100)}}}catch{}}return Bt(()=>{const Y=document.querySelector(c.videoSelector);!Y||!(Y instanceof HTMLVideoElement)||!_.value||!N.value||(r(c,{videoPlatform:c.name,translationService:e.value.subtitleTranslation.translationService,targetLanguage:e.value.targetLanguage,videoElement:Y,captionElement:_.value,subtitleElement:N.value,useManualSubtitle:e.value.subtitleTranslation.useSiteSubtitle,displayMode:e.value.subtitleTranslation.displayMode,captionEntryTriggerCallback:oe}),b=l(W),u&&n(),q(c),d(Y))}),Un(()=>{a(),f==null||f.disconnect(),f=null,h==null||h.disconnect(),h=null,b==null||b(),b=null}),(Y,H)=>Wt((B(),re("div",{style:De([{position:"absolute",width:"100%",top:"0px",left:"0px","pointer-events":"none","z-index":"10","font-size":"20px",color:"rgba(255,255,255,0.9)","font-weight":"400","line-height":"150%",transition:"bottom 0.1s ease-in-out"},{bottom:`${x.value}px`}])},[Wt(T("div",Jv,[T("div",{ref_key:"captionRef",ref:_,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),T("div",{ref_key:"subtitleRef",ref:N,style:{"background-color":"rgba(0, 0, 0, 0.75)",padding:"2px 8px",display:"none"}},null,512),g.value?(B(),re("div",e0," ["+ce(Y.$t("subtitle.guidText"))+"] ",1)):ve("",!0)],512),[[qt,E.value]])],4)),[[qt,p.value]])}}),n0=at(t0,[["__scopeId","data-v-d1944dd0"]]),r0={class:"subtitle-guide-dialog-container"},a0={class:"dialog-title"},i0={class:"dialog-description"},s0={class:"dialog-actions"},o0=je({__name:"guidDialog",emits:["gotIt","exploreMore"],setup(t,{emit:e}){const n=e;function r(){n("gotIt"),k.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","got_it")}function a(){n("exploreMore"),k.reportClickEvent("plugin_subtitle_translate_newuser_guide_page","explore_more")}return(i,s)=>(B(),re("div",r0,[T("h3",a0,ce(i.$t("subtitle.guidText")),1),T("p",i0,ce(i.$t("subtitle.guidDialog.desc")),1),T("div",s0,[fe(Tn,{type:"text",class:"got-it-button",onClick:r},{default:ft(()=>[Qt(ce(i.$t("common.gotIt")),1)]),_:1}),fe(Tn,{type:"primary",class:"explore-button",onClick:a},{default:ft(()=>[Qt(ce(i.$t("common.exploreMore")),1)]),_:1})])]))}}),l0=at(o0,[["__scopeId","data-v-e6e519b9"]]),u0={class:"subtitle-icon"},c0=["src"],d0=je({__name:"SubtitleIcon",props:{icon:{},size:{default:24}},setup(t){const e=t,n=()=>e.icon==="arrowLeft"?chrome.runtime.getURL("public/subtitle/arrowLeft.png"):chrome.runtime.getURL(`public/subtitle/${e.icon}.svg`);return(r,a)=>(B(),re("div",u0,[T("img",{src:n(),style:De({width:`${r.size}px`,height:`${r.size}px`})},null,12,c0)]))}}),ci=at(d0,[["__scopeId","data-v-64fd24a9"]]),p0={class:"menu-cell-left"},f0={class:"menu-cell-right"},g0={key:0,style:{"font-size":"14px"}},h0=je({__name:"MenuCell",props:{title:{},value:{default:""},isLink:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},className:{default:""}},emits:["click"],setup(t,{emit:e}){const{isRtl:n}=Vo(),r=t,a=e,{disabled:i}=r,s=()=>{r.disabled||a("click")};return(o,l)=>(B(),re("div",{class:lt(["menu-cell",o.className]),style:De({cursor:j(i)?"not-allowed":"pointer",opacity:j(i)?.5:1}),onClick:s},[T("div",p0,[ga(o.$slots,"left-icon",{},void 0,!0),T("span",null,ce(o.title),1)]),T("div",f0,[o.value?(B(),re("span",g0,ce(o.value),1)):ve("",!0),o.isLink?(B(),Fe(ci,{key:1,size:16,style:De(j(n)?{transform:"rotate(180deg)"}:{}),icon:"arrowRightSmall"},null,8,["style"])):ve("",!0)])],6))}}),m0=at(h0,[["__scopeId","data-v-de94c478"]]),v0=je({__name:"MenuContainer",props:{className:{default:""}},setup(t){return(e,n)=>(B(),re("div",{class:lt(["menu-container",e.className])},[ga(e.$slots,"default",{},void 0,!0)],2))}}),Ql=at(v0,[["__scopeId","data-v-20d5d8e7"]]),E0={},_0={class:"menu-divider"};function T0(t,e){return B(),re("div",_0)}const Zl=at(E0,[["render",T0],["__scopeId","data-v-f1c6b8bc"]]),w0=["onClick"],Fo=24,b0=je({__name:"SelectList",props:{items:{}},emits:["select"],setup(t,{emit:e}){const n=e,r=a=>{n("select",a)};return(a,i)=>(B(),re("div",null,[(B(!0),re(kt,null,rn(a.items,s=>(B(),re("div",{key:s.id,class:"select-list-item",onClick:()=>r(s.id)},[s.selected?(B(),Fe(ci,{key:0,size:Fo,icon:"check"})):(B(),re("div",{key:1,style:De({width:`${Fo}px`})},null,4)),ga(a.$slots,"default",{item:s},()=>[T("span",null,ce(s.title),1)],!0)],8,w0))),128))]))}}),Jl=at(b0,[["__scopeId","data-v-cab79358"]]),x0={class:"menu-header-title"},y0=je({__name:"MenuHeader",props:{title:{}},emits:["back"],setup(t,{emit:e}){const n=e,r=()=>{n("back")};return(a,i)=>(B(),re("div",{class:"menu-header",onClick:r},[fe(ci,{icon:"arrowLeft",size:24}),T("span",x0,ce(a.title),1)]))}}),A0=at(y0,[["__scopeId","data-v-4535d3fb"]]),C0={class:"service-list-container"},S0={key:0,class:"group-title"},D0={class:"group-title-text"},L0=["src"],I0={class:"service-item"},R0=["src"],N0=["src"],k0=je({__name:"TranslateServicePanel",emits:["close","back","select","showSurvey"],setup(t,{emit:e}){const{userSettings:n,notifyUserSettings:r,getSettingByKey:a}=pt(),{userInfo:i}=St(),{t:s}=Tt(),{showBuyDialog:o}=vn(),{checkShowSurvey:l,userChangeService:c}=li(),u=Z(()=>{const N=n.value.subtitleTranslation.translationService;return n.value.services.filter(E=>n.value.enabledServices.includes(E.value)||E.value===N).map(E=>({id:E.value,title:E.title,icon:chrome.runtime.getURL(`public/modelIcons/small/${E.icon}.svg`),selected:E.value===N,isAIService:E.isAIService,isVipService:E.isVipService}))}),f=Z(()=>{var N,_;return[{title:s("model.basicModels"),models:u.value.filter(E=>!E.isAIService),tag:(N=i.value)!=null&&N.isVip?"":cn("images/dark-free.svg")},{title:s("model.advancedModels"),models:u.value.filter(E=>E.isAIService),tag:(_=i.value)!=null&&_.isVip?"":cn("images/pro.svg")}]}),h=N=>{var E;const _=u.value.find(g=>g.id===N);return!_||(E=i.value)!=null&&E.isVip?"":_.isAIService&&!_.isVipService?cn("/images/dark-limited-free.svg"):""},b=e,S=async N=>{const _=u.value.find(g=>g.id===N);if(!_)return;if(k.reportClickEvent("plugin_subtitle_translate_service_page",_.id),i.value){if(!i.value.isVip&&_.isVipService){await l()?b("showSurvey"):(o("web_translate_subtitle","web_subtitle_translate_ai_payment"),b("close"));return}}else if(_.isAIService){const g="plugin_subtitle_translate_service_page",p="plugin_subtitle_translate_service_page",m=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin`);ct(`${ye.loginUrl}?feature=${p}&position=${g}&cb=${m}`),b("close");return}b("close");const E=a("subtitleTranslation");E.translationService=_.id,c.value=!0,r({subtitleTranslation:E})},x=()=>{b("back")};return(N,_)=>(B(),Fe(Ql,null,{default:ft(()=>[fe(A0,{title:N.$t("translate.serviceLabel"),onBack:x},null,8,["title"]),fe(Zl),T("div",C0,[(B(!0),re(kt,null,rn(f.value,E=>(B(),re("div",{key:E.title},[E.models.length>0?(B(),re("div",S0,[_[0]||(_[0]=T("div",{style:{width:"24px",height:"24px"}},null,-1)),T("div",D0,ce(E.title),1),E.tag?(B(),re("img",{key:0,src:E.tag,width:"32px",height:"16px"},null,8,L0)):ve("",!0)])):ve("",!0),fe(Jl,{class:"service-list",items:E.models,onSelect:S},{default:ft(({item:g})=>[T("div",I0,[T("img",{src:g.icon,style:{width:"24px",height:"24px"}},null,8,R0),T("span",null,ce(g.title),1),h(g.id)?(B(),re("img",{key:0,height:"16px",src:h(g.id)},null,8,N0)):ve("",!0)])]),_:2},1032,["items"])]))),128))])]),_:1}))}}),B0=at(k0,[["__scopeId","data-v-11d9fc6d"]]),O0=["src"],P0=je({__name:"SettingPanel",props:{setDownloadTip:{type:Function}},emits:["close","login","showSurvey"],setup(t,{emit:e}){const{userSettings:n,getSettingByKey:r,notifyUserSettings:a}=pt(),{downloadSubtitle:i}=li(),{userInfo:s}=St(),{t:o}=Tt(),{giftText:l,giftType:c}=Gr(),{onlineParams:u}=an(),{showBuyDialog:f}=vn(),h=e,b=t,S=C(!1),x=Z(()=>!S.value);Te(S,J=>{J&&k.reportShowEvent("plugin_subtitle_translate_service_page")});const N=Z(()=>[{id:"enable-bilingual",title:o("subtitle.autoEnableBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===Fn.BILINGUAL},{id:"disable-bilingual",title:o("subtitle.turnOffBilingualSubtitles"),selected:n.value.subtitleTranslation.enable&&n.value.subtitleTranslation.displayMode===Fn.TRANSLATE_ONLY},{id:"turn-off",title:o("subtitle.turnOff"),selected:!n.value.subtitleTranslation.enable}]),_=()=>{var W;const J=n.value.subtitleTranslation.translationService,q=((W=Ja.find(oe=>oe.value===J))==null?void 0:W.icon)||"google";return chrome.runtime.getURL(`public/modelIcons/small/${q}.svg`)},E=Z(()=>{var q,W;const J=[{id:"translateService",title:o("translate.serviceLabel"),isLink:!0,iconImage:_()},{id:"download",title:o("subtitle.download"),icon:"download"},{id:"settings",title:o("common.setting"),isLink:!0,icon:"setting"}];if(!((q=s.value)!=null&&q.isVip)){const{subtitleConfig:oe}=u.value||{};J.push({id:"gift",title:(W=oe==null?void 0:oe.survey)!=null&&W.enable?o("subtitle.goToSurvey"):l.value,isLink:!1,iconImage:cn("images/gift.png")})}return J}),g=J=>{const q=r("subtitleTranslation");J==="enable-bilingual"?(q.enable=!0,q.displayMode=Fn.BILINGUAL,k.reportClickEvent("plugin_subtitle_translate_page","auto_enable")):J==="disable-bilingual"?(q.enable=!0,q.displayMode=Fn.TRANSLATE_ONLY,k.reportClickEvent("plugin_subtitle_translate_page","show_translated")):J==="turn-off"&&(q.enable=!1,k.reportClickEvent("plugin_subtitle_translate_page","turn_off")),a({subtitleTranslation:q}),h("close")},p=()=>{S.value=!0},m=async()=>{var A;if(!s.value){h("login");return}if(!((A=s.value)!=null&&A.isVip)){f("web_translate_subtitle","web_subtitle_translate_download"),h("close");return}const q={feature:"plugin_subtitle_translate",download_type:r("subtitleTranslation").displayMode===Fn.BILINGUAL?"download_bilingual":"download_translated",action:"save_file",source_language_target_language:`auto_detect||${n.value.targetLanguage}`};k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...q,stage:"download_start",status:"success_pre_upload"});const W=i(),oe=new Promise(D=>setTimeout(D,200)),H=await Promise.race([oe.then(()=>({type:"delay"})),W.then(D=>({type:"download",result:D}))]),X=D=>{D.isCompleted?(k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...q,stage:"download_complete",status:"success"}),b.setDownloadTip({visible:!1,message:""})):D.error&&(k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...q,stage:"download_complete",status:`failed_${D.message}`}),b.setDownloadTip({visible:!0,message:o("subtitle.downloadFailed")}))};if(H.type==="delay"){b.setDownloadTip({visible:!0,message:o("subtitle.downloading")}),k.fireEvent(Lt.OVERSEA_TRANSLATE_STATUS,{...q,stage:"download_start",status:"processing"});const D=await W;X(D)}else X(H.result)},d=J=>{var W;const{subtitleConfig:q}=u.value||{};switch(J){case"download":m(),k.reportClickEvent("plugin_subtitle_translate_page","download_subtitle"),h("close");break;case"translateService":p(),k.reportClickEvent("plugin_subtitle_translate_page","translate_service");break;case"settings":uc(!!s.value,ye.subtitleSettingPage,"plugin_subtitle_translate_page"),k.reportClickEvent("plugin_subtitle_translate_page","settings"),h("close");break;case"gift":(W=q==null?void 0:q.survey)!=null&&W.enable?(ct(q.survey.link),k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"click",item:"web_subtitle_translate_survey_op"})):(ct(`${ye.priceUrl}?position=plugin_subtitle_translate_page_get_trial`),k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"click",item:"plugin_subtitle_translate_page_get_trial",type:c.value==="1"?"1":"7"})),h("close");break}};return(J,q)=>x.value?(B(),Fe(Ql,{key:0,style:{overflow:"auto"}},{default:ft(()=>[fe(Jl,{items:N.value,onSelect:g},null,8,["items"]),fe(Zl),(B(!0),re(kt,null,rn(E.value,W=>(B(),Fe(m0,{key:W.id,title:W.title,"is-link":W.isLink,onClick:()=>d(W.id)},{"left-icon":ft(()=>[W.iconImage?(B(),re("img",{key:0,src:W.iconImage,style:{width:"24px",height:"24px"}},null,8,O0)):(B(),Fe(ci,{key:1,icon:W.icon},null,8,["icon"]))]),_:2},1032,["title","is-link","onClick"]))),128))]),_:1})):S.value?(B(),Fe(B0,{key:1,onClose:q[0]||(q[0]=W=>h("close")),onShowSurvey:q[1]||(q[1]=W=>h("showSurvey")),onBack:q[2]||(q[2]=W=>S.value=!1)})):ve("",!0)}}),F0={class:"upgrade-prompt-card"},M0={class:"close-button"},U0={class:"title"},$0={class:"promo-section"},q0=["src"],W0={class:"promo-color-text"},G0={class:"button-group"},H0=je({__name:"UpgradePrompt",props:{scene:{}},emits:["close"],setup(t,{emit:e}){const{showBuyDialog:n}=vn(),{onlineParams:r}=an(),{t:a}=Tt(),i=e,s=t,o=Z(()=>s.scene==="limit"?"web_subtitle_4o_questionnaire":"web_subtitle_ai_questionnaire"),l=Z(()=>s.scene==="limit"?a("upgradePrompt.limitTitle"):a("upgradePrompt.title"));function c(){i("close"),k.reportClickEvent(o.value,"close")}function u(){s.scene==="limit"?n("plugin_translate_subtitle","ai_model_free_trial_limit"):n("web_translate_subtitle","web_subtitle_translate_ai_payment"),i("close"),k.reportClickEvent(o.value,"upgrade")}function f(){var b;const{survey:h}=((b=r.value)==null?void 0:b.subtitleConfig)||{};ct((h==null?void 0:h.link)||"https://form.typeform.com/to/htX09piP"),i("close"),k.reportClickEvent(o.value,"participate_now")}return(h,b)=>(B(),re("div",F0,[T("div",M0,[fe(jt,{icon:"close",size:24,onClick:c})]),T("div",U0,ce(l.value),1),T("div",$0,[T("img",{src:j(cn)("images/gift.png"),alt:"gift",class:"gift-icon"},null,8,q0),fe(j(la),{keypath:"upgradePrompt.promoText",class:"promo-text",tag:"div"},{default:ft(()=>[T("span",W0,ce(h.$t("upgradePrompt.promoColorText")),1)]),_:1})]),T("div",G0,[fe(Tn,{type:"default",class:"skip-button",onClick:u},{default:ft(()=>[Qt(ce(h.$t("upgradePrompt.skipButtonText")),1)]),_:1}),fe(Tn,{type:"primary",class:"participate-button",onClick:f},{default:ft(()=>[Qt(ce(h.$t("upgradePrompt.participateButtonText")),1)]),_:1})])]))}}),V0=at(H0,[["__scopeId","data-v-b253b8d0"]]),z0={class:"try-ai-model-tip-wrapper"},j0={class:"try-ai-model-tip"},Y0={class:"tip-content"},X0={class:"tip-text"},K0=je({__name:"TryAiModelTip",props:{position:{},scene:{}},emits:["close","tryAiModel"],setup(t,{emit:e}){const{locale:n}=Tt(),r=t,a=Z(()=>dn(n.value)&&r.position==="right"?"left":r.position||"bottom"),i=Z(()=>({plugin_subtitle_translate_ai_service_guide_page:r.scene})[r.scene]),s=e;function o(){s("close"),k.reportClickEvent(i.value,"close")}async function l(){s("tryAiModel"),k.reportClickEvent(i.value,"try_use")}return Bt(()=>{k.reportShowEvent(r.scene)}),(c,u)=>(B(),re("div",z0,[u[0]||(u[0]=T("div",{class:"try-ai-model-tip-bg"},null,-1)),T("div",j0,[T("div",Y0,[T("div",X0,ce(c.$t("translate.tryAiTip")),1),T("div",{class:"try-text-btn",onClick:l},ce(c.$t("common.tryAiModel")),1)]),T("div",{class:lt(["arrow",`arrow-${a.value||"bottom"}`])},null,2),fe(vt,{class:"icon-close",icon:"close",size:16,onClick:o})])]))}}),Q0=at(K0,[["__scopeId","data-v-eda2ac46"]]),Z0=["dir"],J0={class:"logo-outer-border"},eE={class:"logo-inner-border"},tE=["src"],nE=je({__name:"quickButton",setup(t){const e=ui(location.href);let n=null;const{getServiceOnlineParams:r,onlineParams:a}=an(),{userInfo:i}=St(),{checkBoundary:s}=Qo({margin:2}),{userSettings:o,notifyUserSettings:l,getSettingByKey:c}=pt(),{contentScriptRefreshUserInfo:u}=St(),{subtitleLoginTipShow:f,setNoLoginTranslateUseCount:h,showLoginTipGuid:b,checkLoginTipShow:S}=va(),{limitError:x,errorTipShow:N,otherLimitError:_,addCaptionStatusListener:E,checkShowSurvey:g,userChangeService:p}=li(),{locale:m}=Tt(),{giftType:d}=Gr(),J=Z(()=>dn(m.value)?"rtl":"ltr");let q=null,W=null,oe=!1;const Y=C(!1),H=C(!1),X=C(!1),A=C(!1),D=C(!1),y=C("limit"),F=C(!1),G=C(!1),K=C({maxWidth:"0px",maxHeight:"0px"}),de=tt("logoRef"),ne=tt("settingPanelRef"),we=tt("noCaptionTipRef"),Q=tt("errorTipRef"),Le=tt("downloadTipRef"),ie=C("");un(ne,()=>{G.value=!1},{ignore:[de]}),un(we,()=>{X.value=!1},{ignore:[de]}),un(Q,()=>{gt()},{ignore:[de]}),un(Le,()=>{F.value=!1},{ignore:[de]});const O=Z(()=>!Y.value&&!D.value),M=Z(()=>Hr(m.value)),ee=()=>{ht(()=>{ne.value&&s(ne.value.$el,Be=>{Be&&Ae()})})},Ae=Zo(()=>{if(!ne.value)return;const Be=ne.value.$el,Ne=Be.getBoundingClientRect();Ne.left<0?Be.style.transform=`translateX(${-Ne.left}px)`:Ne.right>window.innerWidth&&(Be.style.transform=`translateX(${window.innerWidth-Ne.right}px)`)},100),Re=Be=>{ie.value=Be.message,F.value=Be.visible};Te(x,async Be=>{var Ne;if(Be)if(G.value=!1,await g())D.value=!0,y.value="limit",k.reportShowEvent("web_subtitle_4o_questionnaire");else{if(p.value)A.value=!0,p.value=!1;else{const le=((Ne=a.value)==null?void 0:Ne.limitTipGap)||3,Se=await rt(Ee.SUBTITLE_EXCEED_LIMIT_TIP_CLOSE_CLICK);(!Se||Date.now()-Se>le*24*60*60*1e3)&&(A.value=!0)}const{userSettings:Qe,notifyUserSettings:ae}=pt(),be=Qe.value.services.find(le=>!le.isAIService&&!le.isVipService),Oe=be?be.value:Ln.GOOGLE,Ze=c("subtitleTranslation");Ze.translationService=Oe,ae({subtitleTranslation:Ze})}else D.value=!1}),Te(G,Be=>{var Ne;Be&&(ee(),k.reportShowEvent("plugin_subtitle_translate_page"),(Ne=i.value)!=null&&Ne.isVip||k.fireEvent(Lt.PREMIUM_PROMOTION,{action:"show",item:"plugin_subtitle_translate_page_get_trial",type:d.value==="1"?"1":"7"}))});const Ue=async()=>{if(A.value=!1,D.value=!1,N.value=!1,Y.value=!1,H.value=!1,k.reportClickEvent("plugin_subtitle_translate_page","plugin_subtitle_translate_entry"),Zv(e)){X.value=!X.value;return}if(u(),!G.value&&(await h(),await S())){b(Br.SUBTITLE);return}f.value=!1,G.value=!G.value},pe=()=>{Y.value=!1,ct(`${ye.mainPage}?position=plugin_subtitle_translate_newuser_guide`)},ge=()=>{var Be;if(H.value=!1,i.value){let Ne;const Qe=i.value.isVip,{translationService:ae,services:be}=r();if(be.find(Ze=>Ze.value===ae)?Ne=ae:Qe&&(Ne=(Be=be.find(Ze=>Ze.isAIService))==null?void 0:Be.value),Ne){const Ze=c("subtitleTranslation");Ze.translationService=Ne,l({subtitleTranslation:Ze})}}else{const Ne=encodeURIComponent(`${ye.mainPage}?from=extensionLogin`);ct(`${ye.loginUrl}?position=plugin_subtitle_translate_ai_service_guide&feature=plugin_translate_subtitle&cb=${Ne}`)}},Me=()=>{G.value=!1,D.value=!0,y.value="service",k.reportShowEvent("web_subtitle_ai_questionnaire")},qe=()=>chrome.runtime.getURL("public/logo/icon-128.png"),Ye=()=>{var Oe;const Be=n==null?void 0:n.getBoundingClientRect(),Ne=(Oe=de.value)==null?void 0:Oe.getBoundingClientRect();if(!Be||!Ne){K.value={maxWidth:"0px",maxHeight:"0px"};return}const Qe=5,ae=Be.width-Qe,be=Ne.top-Be.top-Qe;K.value={maxWidth:`${ae}px`,maxHeight:`${be}px`}},wt=()=>{n&&(q=new ResizeObserver(()=>{Ye(),ee()}),q.observe(n))};let dt=null;const We=async()=>{var ae;const Be=((ae=a.value)==null?void 0:ae.subtitleConfig)||{tryAiModelGap:7,tryAiModelShowTime:60},Ne=o.value.subtitleTranslation.translationService;if(H.value=!1,dt&&clearTimeout(dt),no.includes(Ne))return;const Qe=await rt(Ee.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME);Qe&&Date.now()-Qe<Be.tryAiModelGap*24*60*60*1e3||(dt=setTimeout(()=>{if(N.value||_.value)return;const be=o.value.subtitleTranslation.translationService;no.includes(be)||(mt(Ee.SUBTITLE_TRY_AI_MODEL_TIP_SHOW_TIME,Date.now()),H.value=!0,G.value=!1,f.value=!1)},Be.tryAiModelShowTime*1e3))},ke=async()=>{oe=!0,Y.value===!1&&We()},gt=()=>{N.value=!1,_.value=!1},et=()=>{A.value=!1,mt(Ee.SUBTITLE_EXCEED_LIMIT_TIP_CLOSE_CLICK,Date.now())};return Bt(async()=>{n=document.querySelector(e.videoSelector),Ye(),wt(),W=E(ke),await rt(Ee.SUBTITLE_GUID_TEXT_TIP_SHOW)||(Y.value=!0,mt(Ee.SUBTITLE_GUID_TEXT_TIP_SHOW,!0),k.reportShowEvent("plugin_subtitle_translate_newuser_guide_page"),Te(Y,Be=>{!Be&&oe&&We()})),k.reportShowEvent("plugin_subtitle_translate_entry")}),Un(()=>{q==null||q.disconnect(),q=null,W==null||W(),W=null}),(Be,Ne)=>Wt((B(),re("div",{dir:J.value,class:"quick-button-container",style:De({fontFamily:M.value})},[T("div",{class:lt(["logo-container",{"hide-borders":O.value}])},[T("div",J0,[T("div",eE,[T("img",{ref_key:"logoRef",ref:de,onClick:Ue,class:"logo-image",style:{width:"24px",height:"24px"},src:qe()},null,8,tE)])])],2),T("div",{class:lt(["subtitle-popup-container",{"hide-borders":O.value}])},[Y.value?(B(),Fe(l0,{key:0,onGotIt:Ne[0]||(Ne[0]=Qe=>Y.value=!1),onExploreMore:pe})):ve("",!0),!Y.value&&A.value?(B(),Fe(Er,{key:1,class:"exceed-limit-tip",onClose:et,scene:"plugin_subtitle_translate_page_free_trial_limit"})):ve("",!0),!Y.value&&D.value?(B(),Fe(V0,{key:2,scene:y.value,onClose:Ne[1]||(Ne[1]=Qe=>D.value=!1)},null,8,["scene"])):ve("",!0),!Y.value&&(j(N)||j(_))?(B(),re("div",{key:3,class:"error-tip",ref_key:"errorTipRef",ref:Q},[T("div",null,ce(Be.$t("translate.networkError")),1),fe(vt,{class:"error-tip-close",icon:"close",size:16,onClick:gt})],512)):ve("",!0),H.value?(B(),Fe(Q0,{key:4,onClose:Ne[2]||(Ne[2]=Qe=>H.value=!1),onTryAiModel:ge,scene:"plugin_subtitle_translate_ai_service_guide_page"})):ve("",!0),X.value?(B(),re("div",{key:5,class:"no-caption-tip",ref_key:"noCaptionTipRef",ref:we},ce(Be.$t("subtitle.noCaption")),513)):ve("",!0),F.value?(B(),re("div",{key:6,class:"download-tip",ref_key:"downloadTipRef",ref:Le},[T("div",null,ce(ie.value),1)],512)):ve("",!0),j(f)?(B(),Fe(ai,{key:7,source:"plugin_subtitle_translate_login_guide_page",onClose:Ne[3]||(Ne[3]=Qe=>f.value=!1)})):ve("",!0),G.value?(B(),Fe(P0,{key:8,ref_key:"settingPanelRef",ref:ne,style:De(K.value),setDownloadTip:Re,onShowSurvey:Me,onLogin:Ne[4]||(Ne[4]=Qe=>f.value=!0),onClose:Ne[5]||(Ne[5]=Qe=>G.value=!1)},null,8,["style"])):ve("",!0)],2)],12,Z0)),[[qt,j(o).subtitleTranslation.enableShortcut]])}}),rE=at(nE,[["__scopeId","data-v-693b0bf1"]]),aE="wps-translate-subtitle-translation-button",iE="wps-translate-subtitle-translation-caption";let Lr=null,Ir=null;async function sE(t){let e=0;const n=4,r=1e3;let a=null,i=null;for(;e<n&&(a=document.querySelector(t.btnAnchorSelector),i=document.querySelector(t.captionAnchorSelector),!(a&&i));)await new Promise(s=>setTimeout(s,r)),e++;return{btnAnchorElement:a,captionAnchorElement:i}}async function oE(t){const{btnAnchorElement:e,captionAnchorElement:n}=await sE(t);if(!e){nt.error(` ${t.name} `);return}if(!n){nt.error(` ${t.name} `);return}Ua(e,Lr,t.btnAppendMethod),Ua(n,Ir,t.captionAppendMethod)}function lE(){if(ma())return;const t=ui(location.href);t&&(nt.info(":",t.name),Lr=sr(aE,rE),Ir=sr(iE,n0),oE(t),ti({name:ni.INJECTION,onDisconnect:()=>{Lr==null||Lr.remove(),Ir==null||Ir.remove(),Lr=null,Ir=null}}))}const{userInfo:ns,refreshUserInfo:uE,notifyOtherTabUserInfo:cE}=St(),{onlineParams:Mo}=an();function dE(){var t;location.host===ye.webHost&&window.postMessage({type:"userStatus",source:"extension",data:{isVip:(t=ns.value)==null?void 0:t.isVip,isLogin:!!ns.value}},window.location.origin)}async function pE(){try{const t=await ot(Ie.GET_WPS_CLIENT_INFO,{from:Or()?"edge":"chrome"});return t?t.data?t.data:(k.reportCustomEvent("native_get_info",{result:"error",errorMsg:t.errorMsg,code:t.code}),{}):(k.reportCustomEvent("native_get_info",{result:"error",errorMsg:"get wps client info failed",code:-101}),{})}catch(t){return k.reportCustomEvent("native_get_info",{result:"error",errorMsg:t&&t.message||"unknown error",code:-102}),{}}}async function Ia(t){const e=await pE();e&&(t.wps_deviceId=e.deviceId,t.wps_exe_version=e.exe_version,t.wps_host_version=e.host_version),k.reportCustomEvent("native_login",t)}function fE(){return{autoLogin:async()=>{var s,o;if(!cc()||ns.value)return;if(!((s=Mo.value)!=null&&s.nativeLogin)){Ia({result:"error",errorMsg:"native login config not exist",code:-101});return}const e=(o=Mo.value)==null?void 0:o.nativeLogin.gap,n=await rt(Ee.NATIVE_LOGIN_ERROR_TIME);if(n&&Date.now()-n<e*60*1e3)return;Mr(Ee.NATIVE_LOGIN_ERROR_TIME);const r=await ot(Ie.GET_LOGIN_URL);if(!r)return;if(k.reportCustomEvent("native_login",{action:"start"}),!r.url){mt(Ee.NATIVE_LOGIN_ERROR_TIME,Date.now()),Ia({result:"error",errorMsg:r.errorMsg,code:r.code});return}Ia({result:"success"});const a=document.createElement("iframe");a.style.display="none";const i=()=>{setTimeout(async()=>{await uE(),dE(),cE(),document.body.removeChild(a)},5e3)};a.onload=i,a.src=r.url,a.onerror=()=>{nt.error("iframe load url onerror",r.url),Ia({result:"error",errorMsg:"iframe load url onerror",url:r.url})},document.body.appendChild(a)}}}const gE=["dir"],hE={key:6},mE=je({__name:"index",setup(t){const{initScholarEnhance:e}=o2(),{pluginCommentGuidShow:n}=qr(),{translatePage:r,setReportParams:a}=lr(),{userInfo:i,refreshUserInfo:s,initUserInfo:o,noLoginUserInfoRefresh:l,notifyOtherTabUserInfo:c,setUserInfo:u}=St(),{initUserSettings:f,userSettings:h,notifyUserSettings:b,getSettingByKey:S,refreshUserSettings:x}=pt(),{locale:N}=Tt(),{currentWindowId:_,isWindowActive:E}=vs(),{autoLogin:g}=fE(),{upgradeDialogShow:p,exceedLimitDialogShow:m,refreshPaymentDialogShow:d,buyDialogShow:J}=vn(),{checkPageContinueTranslate:q,continueTranslateDialogShow:W}=ri(),{checkUserIsT1:oe}=Gr(),{googleDocsIntegrationShow:Y}=or(),H=dc(),X=C(!1),A=C(!1),D=C(!1),y=C(!1),F=C(""),G=tt("inputTranslateBallRef"),K=Z(()=>dn(N.value)?"rtl":"ltr"),de=Z(()=>Hr(N.value));function ne(pe){const ge=new URL(pe);return`${ge.protocol}//${ge.host}`}async function we(pe){const ge=S("floatButton"),Me=await yr();A.value=!1,pe==="2"&&(_n(Me,ge.blockedSites)||(ge.blockedSites.push(ne(Me)),b({floatButton:ge}))),pe==="3"&&(ge.enable=!1,b({floatButton:ge}))}async function Q(pe){const ge=S("textboxTranslation"),Me=await yr();y.value=!1,pe==="2"&&(_n(Me,ge.blockedSites)||(ge.blockedSites.push(ne(Me)),b({textboxTranslation:ge}))),pe==="3"&&(ge.enable=!1,b({textboxTranslation:ge}))}async function Le(pe){const ge=S("inTextTranslation"),Me=await yr();D.value=!1,pe==="2"&&(_n(Me,ge.blockedSites)||(ge.blockedSites.push(ne(Me)),b({inTextTranslation:ge}))),pe==="3"&&(ge.enable=!1,b({inTextTranslation:ge})),pe==="4"&&(ge.blockedLanguages||(ge.blockedLanguages=[]),ge.blockedLanguages.includes(h.value.targetLanguage)||ge.blockedLanguages.push(h.value.targetLanguage),b({inTextTranslation:ge}))}async function ie(){var pe;(pe=G.value)==null||pe.closeAllWindows()}async function O(pe){const ge=S("imageTranslation"),Me=await yr();pe==="2"&&(_n(Me,ge.blockedSites)||(ge.blockedSites.push(ne(Me)),b({imageTranslation:ge}))),pe==="3"&&(ge.enable=!1,b({imageTranslation:ge}))}async function M(){const pe=await yr();X.value=!0;const{floatButton:ge,inTextTranslation:Me}=h.value;let{textboxTranslation:qe}=h.value;qe||(qe=pc.textboxTranslation),A.value=ge.enable&&!_n(pe,ge.blockedSites),D.value=Me.enable&&!_n(pe,Me.blockedSites),y.value=qe.enable&&!_n(pe,qe.blockedSites)&&!Y.value}function ee(pe,ge){if(ge==="local"&&pe[Ee.TEMP_CONFIGS]){const{newValue:Me}=pe[Ee.TEMP_CONFIGS];Me&&Me.inTextTranslationEnable!==void 0&&(D.value=Me.inTextTranslationEnable)}}function Ae(){window.location.host===ye.webHost&&window.addEventListener("message",async pe=>{var ge,Me,qe,Ye,wt,dt,We,ke,gt,et;if(pe.source===window&&pe.origin===window.location.origin&&pe.data.source==="page"){if(pe.data.type==="settingSync"&&(nt.info("receive settingSync message from web:",pe.data.data),i.value&&b(pe.data.data,!1,!1)),pe.data.type==="userStatus"){const Be=!!((Me=(ge=pe.data)==null?void 0:ge.data)!=null&&Me.isLogin),Ne=!!((Ye=(qe=pe.data)==null?void 0:qe.data)!=null&&Ye.isVip),Qe=((dt=(wt=pe.data)==null?void 0:wt.data)==null?void 0:dt.userId)||void 0,ae=!!i.value,be=!!((We=i.value)!=null&&We.isVip),Oe=(ke=i.value)==null?void 0:ke.userid;nt.info("receive userStatus message from web:",pe.data),(Be!==ae||Ne!==be||Qe!==Oe)&&(Be===!1?u(void 0):await s()),c()}if(pe.data.type==="interfaceLanguageChange"&&(nt.info("receive interfaceLanguageChange message from web:",pe.data),!i.value)){const Be=ol((et=(gt=pe.data)==null?void 0:gt.data)==null?void 0:et.language).value;Ki(Be),ot(Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE,Be)}}})}async function Re(){var Be;const pe=await yr();F.value=await ot(Ie.DETECT_PAGE_LANGUAGE);const ge=((Be=gn(F.value))==null?void 0:Be.value)||"",{pageTranslation:Me}=h.value,qe=Me.alwaysTranslateLanguage||[],Ye=Me.newAlwaysTranslateLanguage||[],wt=Me.neverTranslateSites||[];wt.push("anydoctranslator-test.toolsmart.ai","anydoctranslator.toolsmart.ai","account.wps.com");const dt=_n(pe,wt),We=_n(pe,Me.alwaysTranslateSites),ke=qe.includes(ge)&&Me.alwaysTranslateEnabled||Ye.includes(ge),gt=await q(ge),et=rl();nt.info("check page translate, info:",{pageLanguageValue:ge,pageUrl:pe,alwaysTranslateEnabled:ea(Me.alwaysTranslateEnabled),alwaysTranslateSites:ea(Me.alwaysTranslateSites),neverAutoTranslateSites:ea(Me.neverTranslateSites),alwaysTranslateLanguage:ea(Me.alwaysTranslateLanguage),newAlwaysTranslateLanguage:ea(Me.newAlwaysTranslateLanguage),isNeverAutoTranslatePage:dt,isAlwaysTranslatePage:We,isAlwaysTranslateLanguage:ke,isContinueTranslate:gt,isTranslateGoogleDocsPage:et}),(We||!dt&&ke||!dt&&gt||et)&&(a("plugin_open_translate_website","plugin_translate_website"),r(zt.HOVER_BALL))}async function Ue(){try{const pe=await ot(Ie.GET_TAB_INFO);_.value=pe.windowId,E.value=pe.isWindowActive}catch{}}return ha(async()=>{await k.init(),await o(),await f(),await x(),await l(),e(),await Ue(),M(),Ki(h.value.interfaceLanguage),Re(),Te(h,()=>{M()}),Te(n,pe=>{pe&&k.reportShowEvent("plugin_fivestar_guide_popup")}),Te(W,pe=>{pe&&k.reportShowEvent("plugin_always_translate_popup")}),ot(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,h.value.targetLanguage),chrome.storage.onChanged.addListener(ee),Ae(),g(),lE(),M2(h.value),oe()}),Un(()=>{chrome.storage.onChanged.removeListener(ee)}),(pe,ge)=>X.value?(B(),re("div",{key:0,dir:K.value,id:"root",style:De({fontFamily:de.value}),class:"root"},[!j(H)&&A.value?(B(),Fe(Ap,{key:0,onClose:we})):ve("",!0),!j(H)&&D.value?(B(),Fe(n2,{key:1,onAlwaysClose:Le,onShowTranslateWindow:ie})):ve("",!0),y.value?(B(),Fe(Ol,{key:2,ref_key:"inputTranslateBallRef",ref:G,onClose:Q},null,512)):ve("",!0),fe(og,{onClose:O}),fe(bm),!j(H)&&j(W)?(B(),Fe(Td,{key:3,"page-language":F.value},null,8,["page-language"])):ve("",!0),!j(H)&&j(n)?(B(),Fe(Nm,{key:4})):ve("",!0),!j(H)&&j(Y)?(B(),Fe(U2,{key:5})):ve("",!0),j(H)?ve("",!0):(B(),re("div",hE,[j(m)?(B(),Fe(qm,{key:0})):ve("",!0),j(p)?(B(),Fe(Km,{key:1})):ve("",!0),j(d)?(B(),Fe(Wm,{key:2})):ve("",!0),j(J)?(B(),Fe(sd,{key:3})):ve("",!0)]))],12,gE)):ve("",!0)}}),vE=at(mE,[["__scopeId","data-v-0c0be04a"]]),{userSettings:Uo}=pt(),{setWatchTranslate:eu}=lr(),{t:$o,locale:qo}=Jo.global;let tu=0;const EE=2,Wo=Math.round(1e3/EE),_E="AnyDoc",Pn=[];let ja=!1,rs;const Ya={scrollTop:0,bodyOverflow:""};let Xa;async function nu(){Xa||(Xa={source_language:await ot(Ie.DETECT_PAGE_LANGUAGE),target_language:Uo.value.targetLanguage,service:Uo.value.translationService,feature:"plugin_translate_website",func_type:"quick_save",target_format:"png",has_watermark:1})}async function TE(){await nu(),k.fireEvent("oversea_translate_status",Xa)}async function ks(t){await nu();const n=Date.now()-tu;k.fireEvent("oversea_translate_status",{...Xa,result:t,duration:n})}function wE(){return new Promise(t=>{window.scrollBy(0,window.innerHeight),setTimeout(t,100)})}async function bE(){var r;const t=await ot(Ie.GET_POPUP_PERFORMANCE_NOW),e=((r=Pn[Pn.length-1])==null?void 0:r.time)||0,n=t-e;n<Wo&&await ll(Math.ceil(Wo-n))}async function ru(t,e){const n=vc(t===1,t===e);await ll(200);const r=await ot(Ie.SCREEN_SHOT);r.result===Ec.SUCCESS&&Pn.push({data:r.data,time:r.time}),_c(n),!ja&&(ot(Ie.CAPTURE_PROGRESS,{progress:`${Math.floor(t/e*100)}%`}),t<e&&(await wE(),await bE(),await ru(t+1,e)))}async function xE(t){var h,b,S;const{logoUrl:e,logoText:n,sloganText:r}=t,a=dn(qo.value)?"rtl":"ltr",i=Hr(qo.value),s=await fetch(e).then(x=>x.blob()).then(x=>new Promise((N,_)=>{const E=new FileReader;E.onload=()=>N(E.result),E.onerror=_,E.readAsDataURL(x)})),o=`
    <div dir="${a}" style="display: flex; align-items: center; justify-content: center; font-family: ${i}; padding: 12px 16px;">
      <div style="display: flex; align-items: center; gap: 8px;">
        <img style="flex-basis: 24px" width="24" height="24" src="${s}"/>
        <div style="font-size: 14px; font-weight: 600; margin-inline-end: 8px; line-height: 22px;">${ro(n)}</div>
        <div style="flex: 1; font-size: 14px; line-height: 20px;">${ro(r)}</div>
      </div>
    </div>
  `,l=document.createElement("div"),c=l.attachShadow({mode:"open"});c.innerHTML=o,document.body.appendChild(l);const u=Array.from(c.querySelectorAll("img"));await Promise.all(u.map(x=>new Promise((N,_)=>{x.complete?N():(x.onload=()=>N(),x.onerror=()=>_(new Error(`Failed to load image: ${x.src}`)))})));const f=((S=(b=(h=l==null?void 0:l.shadowRoot)==null?void 0:h.querySelector)==null?void 0:b.call(h,"div"))==null?void 0:S.offsetHeight)||l.offsetHeight;return document.body.removeChild(l),{height:f,htmlString:o}}const yE=async t=>{const{ctx:e,htmlString:n,positions:r,width:a,height:i}=t,s=`
    <svg xmlns="http://www.w3.org/2000/svg" width="${a}" height="${i}">
      <rect width="100%" height="100%" fill="#fff" />
      <foreignObject width="100%" height="100%">
        <div xmlns="http://www.w3.org/1999/xhtml" style="width: ${a}px; height: ${i}px;">
          ${n}
        </div>
      </foreignObject>
    </svg>
  `,o=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(s)))}`,l=new Image;l.src=o,await new Promise(c=>{l.onload=()=>{for(const u of r){const{x:f,y:h}=u;e.drawImage(l,f,h,a,i)}c()}})};async function AE(){const t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return;const n=document.documentElement.scrollHeight,r=Math.ceil(n/window.innerHeight),a=Pn.length,i=r===a&&n%window.innerHeight||window.innerHeight,{height:s,htmlString:o}=await xE({logoUrl:chrome.runtime.getURL("public/logo/icon-48.png"),logoText:$o("common.title"),sloganText:$o("capture.watermark.slogan")});if(t.width=window.innerWidth,t.height=window.innerHeight*(Pn.length-1)+i+s*2,!s)return;await yE({ctx:e,htmlString:o,width:window.innerWidth,height:s,positions:[{x:0,y:0},{x:0,y:window.innerHeight*(Pn.length-1)+i+s}]});let l=s;const c=Pn.map(f=>new Promise(h=>{const{data:b}=f,S=new Image;S.src=b,S.onload=()=>h(S)}));return await Promise.all(c).then(async f=>{f.forEach((S,x)=>{const N=window.innerWidth,_=x===Pn.length-1?i:window.innerHeight,E=S.width,g=S.height,p=S.height/window.innerHeight,m=x===Pn.length-1?(window.innerHeight-i)*p:0;e.drawImage(S,0,m,E,g-m,0,l,N,_),l+=_});const h=t.toDataURL("image/png");return await fetch(h).then(S=>S.blob())}).catch(f=>{ks(`failed_${f&&f.message||"unknown_error"}`)})}function au(){Pn.length=0,hc(Ya.bodyOverflow),eu(!0),window.scrollTo(0,Ya.scrollTop),mc()}function CE(){const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}_${n}_${r}_${a}_${i}_${s}`}function SE(t){const e=new File([t],`${_E}_Screenshot_${CE()}.png`,{type:"image/png"}),n=URL.createObjectURL(e),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e.name,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}async function DE(){tu=Date.now(),TE(),eu(!1),ja=!1;const t=Math.ceil(document.documentElement.scrollHeight/window.innerHeight);Ya.scrollTop=window.scrollY||document.documentElement.scrollTop||document.body.scrollTop,Ya.bodyOverflow=document.body.style.overflow,fc(),gc(),window.scrollTo(0,0),rs=setTimeout(async()=>{await ru(1,t);const e=await AE();ja||(e&&SE(e),au(),ks("success"))},100)}function LE(){ja=!0,rs&&clearTimeout(rs),au(),ks("failed_user_cancelled")}const fa=new Map,Ka=new Map;function IE(t){fa.set(t,[]),ot(Ie.GET_PDF_FILE_CONTENT,{url:t})}function RE(t){const e=fa.get(t.fileName);Ka.set(t.fileName,t.totalChunks),e&&(e[t.chunkIndex]=new Uint8Array(t.data))}function NE(t){const e=fa.get(t.fileName),n=Ka.get(t.fileName);if(e&&n!==void 0&&e.length===n&&e.every(r=>r!==void 0)){const r=new Blob(e,{type:"application/pdf"}),a=URL.createObjectURL(r);fa.delete(t.fileName),Ka.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{url:a,fileName:t.fileName}},window.location.origin)}else window.postMessage({type:"pdfContent",source:"extension",data:{errorType:-1,fileName:t.fileName}},window.location.origin),nt.error(`PDF content for ${t.fileName} is incomplete or invalid.`,e)}function kE(t){fa.delete(t.fileName),Ka.delete(t.fileName),window.postMessage({type:"pdfContent",source:"extension",data:{errorType:t.errorType==="overSize"?-2:-1,fileName:t.fileName}},window.location.origin),nt.error(`PDF get error for ${t.fileName}: ${t.errorType}`),k.reportCustomEvent("pdf_get_error",{type:t.errorType,pdfUrl:t.fileName})}const{isPageTranslated:BE,translatePage:OE,showOriginPage:PE,setTranslatePageStyle:FE,setReportParams:Vi}=lr(),ME={[Ie.TRANSLATE_PAGE]:t=>{const{contentScriptRefreshUserInfo:e}=St(),{userSettings:n}=pt();if((t==null?void 0:t.scene)===zt.CONTEXT_MENU?(e().then(()=>{ot(Ie.UPDATE_CONTEXT_MENU_BY_TARGET_LANGUAGE,n.value.targetLanguage)}),Vi("plugin_rightclickmenu_translate_website","plugin_translate_website")):(t==null?void 0:t.scene)===zt.DROPDOWN?Vi("plugin_dropdown_translate_website","plugin_translate_website"):(t==null?void 0:t.scene)===zt.HOVER_BALL&&Vi("plugin_floatingball_translate_website","plugin_translate_website"),t!=null&&t.clickBtn||(t==null?void 0:t.scene)===zt.CONTEXT_MENU){const{checkDialogAndUpdateUsageInfo:r}=ri();r()}OE(t.scene),(t==null?void 0:t.scene)===zt.CONTEXT_MENU&&k.reportClickEvent("Other","plugin_rightclickmenu_translate_website")},[Ie.SET_TRANSLATE_PAGE_STYLE]:t=>{FE(t.displayMode,t.theme)},[Ie.CAPTURE_PAGE]:(t,e)=>{(e.frameId===void 0||e.frameId===0)&&window===window.top&&DE()},[Ie.STOP_CAPTURE_PAGE]:(t,e)=>{(e.frameId===void 0||e.frameId===0)&&window===window.top&&LE()},[Ie.SHOW_ORIGIN]:t=>{PE(),(t==null?void 0:t.scene)==="contextMenu"&&k.reportClickEvent("Other","plugin_rightclickmenu_show_original")},[Ie.CHECK_PAGE_TRANSLATED]:(t,e,n)=>{n({isTranslated:BE.value})},[Ie.NOTIFY_CONTENT_SETTING_CHANGE]:t=>{const{setUserSettings:e}=pt();e(t),location.host===ye.webHost&&window.postMessage({type:"settingSync",source:"extension",data:t},window.location.origin)},[Ie.NOTIFY_IFRAME_SETTING_CHANGE]:t=>{const{setUserSettings:e}=pt();e(t)},[Ie.NOTIFY_CONTENT_LOGIN_STATE]:t=>{const{setUserInfo:e}=St();e(t)},[Ie.CHAT_COMPLETIONS_RESPONSE]:t=>{var c;const{addExplainImproveWriteText:e,setExplainImproveWriteError:n,explainDone:r,improveWriteDone:a,getCurrentRequestId:i}=Vr(),{userInfo:s}=St(),{requestId:o,translateType:l}=t;if(t.result){if(Li({done:!1,requestId:o}),o!==i(l))return;e(l,t.result)}if(t.done){if(Li({done:!0,code:ze.SUCCESS,requestId:o}),o!==i(l))return;l===V.EXPLAIN?r.value=!0:a.value=!0}if(t.response){if(Li({done:!0,code:(c=t.response)==null?void 0:c.code,requestId:o}),o!==i(l))return;if(n(l,!0,t.response.code||ze.UNKNOWN_ERROR),t.response.code===ze.NOT_LOGIN){s.value=void 0;const u=encodeURIComponent(`${ye.pluginDescPage}?from=extensionLogin`);ct(`${ye.loginUrl}?feature=${t.reportParams.feature}&position=${t.reportParams.position}&cb=${u}`)}t.response.code===ze.PRIVILEGE_INSUFFICIENT&&ct(`${ye.priceUrl}?source=${t.reportParams.feature}`)}},[Ie.CONTEXT_MENU_TOGGLE_SELECT_TRANSLATE]:t=>{const{contentScriptRefreshUserInfo:e}=St();e().then(()=>{const{notifyUserSettings:n,getSettingByKey:r}=pt(),a=r("inTextTranslation");a.enable=t,n({inTextTranslation:a}),k.reportClickEvent("Other",t?"plugin_rightclickmenu_enable_select_to_translate":"plugin_rightclickmenu_disable_select_to_translate")})},[Ie.CHANGE_TRANSLATE_OPTIONS]:t=>{const{changeTranslateOptions:e}=lr();e(t)},[Ie.CLOSE_HOVER_BALL_ONBOARDING]:()=>{const{onBoardingShow:t}=cl();t.value=!1},[Ie.NOTIFY_NO_LOGIN_LOCALE_CHANGE]:t=>{const{userInfo:e}=St();e.value||Ki(t)},[Ie.CURRENT_ACTIVE_WINDOW]:t=>{const{currentWindowId:e,isWindowActive:n}=vs();t===e.value?n.value=!0:n.value=!1},[Ie.GET_PAGE_TRANSLATE_TARGET_LANGUAGE]:(t,e,n)=>{const{userSettings:r}=pt();n(r.value.targetLanguage)},[Ie.PDF_FILE_CHUNK]:t=>{RE(t)},[Ie.PDF_FILE_CHUNK_DONE]:t=>{NE(t)},[Ie.PDF_FILE_GET_ERROR]:t=>{kE(t)},[Ie.NOTIFY_CONTENT_USER_INFO_REFRESH]:t=>{const{setUserInfo:e}=St();e(t)},[Ie.SHOW_BUY_DIALOG]:t=>{const{buyDialogShow:e,buyDialogSource:n,buyDialogPosition:r}=vn();e.value=!0,n.value=t.source,r.value=t.position},[Ie.TRANSLATE_GOOGLE_DOCS_PAGE]:()=>{Tc()}};function UE(){chrome.runtime.onMessage.addListener((t,e,n)=>{const r=ME[t.type];if(r)return r(t.data,e,n)})}const di=["translate","translator","","traduction","traduire","bersetzen","bersetzer","traducir","traductor","traduccin","","","","","","","","","terjemahan","penerjemah","menerjemahkan","tradurre","traduttore","traduzione","","","","","terjemah","penterjemah","tumaczy","tumacz","traduzir","tradutor","traduo","","","","","","eviri","evirmen","","","dch","bin dch","phin dch","",""],$E=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/,qE=["image","scan","picture","photo","screenshot","jpg","jpeg","png","screencap","screengrab","scanned","","","","","","","","","","image","numriser","image numrise","photo","capture d'cran","numrisation","Bild","Scan","gescannt","Foto","Screenshot","Bildschirmfoto","Bilddatei","imagen","escanear","imagen escaneada","foto","captura de pantalla","archivo escaneado","","",""," ","  ","  ",""," ","  "," ","  ","",""," "," "," ","","","","","   ","   ","gambar","pindai","foto","tangkapan layar","file yang dipindai","gambar yang dipindai","immagine","scansione","foto","screenshot","file scansionato","immagine scansionata","","","","","","","","","",""," "," ","imej","imbas","gambar","tangkapan skrin","fail yang diimbas","imej yang diimbas","obraz","skan","zdjcie","zrzut ekranu","zeskanowany plik","zeskanowany obraz","imagem","digitalizar","foto","captura de tela","arquivo digitalizado","imagem digitalizada","","","",""," "," ","","","","","","","resim","tarama","fotoraf","ekran grnts","taranan dosya","taranan resim","","",""," ","  ","  ","hnh nh","qut","nh","nh chp mn hnh","tp  qut","hnh nh  qut","","","","","",""],WE={PDF:["pdf","scanned file","image","",""," ","","","  ","imagen","archivo escaneado","image scanne","fichier scann","gescannt","Bild","scansione","immagine","","","","","imej","fail diimbas","obraz","zeskanowany","imagem","arquivo digitalizado","","","","","taranan dosya","resim","  ","","nh","tp  qut","",""],PPT:["ppt","presentation","powerpoint","pptx","dps","dpt","pps","pot","ppsx","potm","","","",""," ","presentacin","diapositiva","prsentation","diaporama","prsentation","presentazione","presentazione powerpoint","","","","","pembentangan","prezentacja","apresentao","","","","sunum","","","bi thuyt trnh","",""],XLS:["xls","csv","excel","sheets","xlsx","et","ett","xlsm","xltx","xltm","xlsb","xlam","xla","","",""," ",""," ","hoja de clculo","feuille de calcul","tabelle","","","","","lembaran","arkusz","planilha","","","excel","","","bng tnh"],File:["","","","","","","","documento","archivo","document","fichier","dokument","datei","documento","file","","","","","dokumen","fail","dokument","plik","","","","","belge","dosya","","","ti liu","tp tin","",""],DOC:["doc","word","docx","docs","wps","wpt","dot","dotx","docm","dotm","rtf"]},GE=["DeepL"," Google","Papago"," ","iTranslate","  "," ",""," Youdao","","openL"," "," ","","   ","  ","   "," "," 360"," Yandex","  ","   "," "," ",""," ",""," ","DeepL","Google bersetzer","Papago","Immersive Translate","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Maschinelle bersetzung","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360 Translation","Yandex bersetzer","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google Translate","Papago","Immersive Translate","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Machine Translation","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360 Translation","Yandex Translate","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Traductor de Google","Papago","Traduccin Inmersiva","iTranslate","HuiyiAI","LingoCloud","Vittor","Traductor Youdao","Twinslator","openL","Traduccin automtica","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Traduccin 360","Traductor de Yandex","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL"," ","Papago","  ","iTranslate"," ","",""," ","","openL"," "," ",""," "," "," ",""," "," ","  "," ",""," ",""," ",""," ","DeepL","Google Traduction","Papago","Traduction Immersive","iTranslate","HuiyiAI","LingoCloud","Vittor","Traduction Youdao","Twinslator","openL","Traduction automatique","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Traduction 360","Yandex Traduction","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google Translate","Papago","Immersive Translate","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL"," ","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360 Translation","Yandex Translate","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google ","Papago"," ","iTranslate"," ","",""," ","","openL"," "," ","",""," ","","","360 ","Yandex ",""," ",""," ",""," ",""," ","DeepL","Google Terjemahan","Papago","Terjemahan Imersif","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Terjemahan Mesin","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Terjemahan 360","Yandex Terjemahan","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google Traduttore","Papago","Traduzione Immersiva","iTranslate","HuiyiAI","LingoCloud","Vittor","Traduzione Youdao","Twinslator","openL","Traduzione automatica","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Traduzione 360","Yandex Traduttore","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google ","Papago","","iTranslate"," (HuiyiAI)","","Vittor","","","openL","","","","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360","Yandex ","readzh","PDFLeader","","Alex Translations","Taia","Reverso Context","Lokalise","","DeepL","Google ",""," ","iTranslate"," AI","LingoCloud",""," ","","openL"," "," ","",""," AI"," PDF","NiuTrans","360 ","Yandex "," ZH","PDF ",""," ",""," ",""," ","DeepL","Google Terjemah","Papago","Terjemahan Imersif","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Terjemahan Mesin","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Terjemahan 360","Yandex Terjemah","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Tumacz Google","Papago","Immersyjne tumaczenie","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Tumaczenie maszynowe","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Tumaczenie 360","Tumacz Yandex","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google Tradutor","Papago","Traduo Imersiva","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Traduo automtica","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Traduo 360","Yandex Tradutor","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google ","Papago","Immersive Translate","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","","openL"," ","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360 "," ","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google ","Papago","","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans"," 360","Yandex ","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google eviri","Papago","Srkleyici eviri","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Makine evirisi","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","360 eviri","Yandex eviri","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL"," ","Papago"," ","iTranslate","  "," ",""," ","","openL"," "," ","","   ","   ","   "," ","360 "," ","  ","   "," "," ",""," ",""," ","DeepL","Google Dch","Papago","Dch thut chm","iTranslate","HuiyiAI","LingoCloud","Vittor","Youdao Translate","Twinslator","openL","Dch my","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","NiuTrans","Dch thut 360","Yandex Dch","readzh","PDFLeader","Wordvice","Alex Translations","Taia","Reverso Context","Lokalise","Elite Asia","DeepL","Google ","Papago","","iTranslate","","","Vittor","","","openL","","Mirai Translate","","Smallpdf","SimplifyAI","OpenPDF","","360","Yandex ","readzh","PDFLeader","","Alex Translations","Taia","Reverso Context","Lokalise","","DeepL","Google ","Papago","","iTranslate","","","Vittor","","","openL","","Mirai Translate","Canva","Smallpdf","SimplifyAI","OpenPDF","","360","Yandex ","readzh","PDFLeader","","Alex Translations","Taia","Reverso Context","Lokalise",""];let zi;const HE=["","Chinesisch","Chinese","Chino","","Chinois","","","Bahasa","Cinese","","","","Cina","Chiski","Chins","","","ince","Ting","","","","","",""],VE=[" "," ","Chinesisch traditionell","traditionell Chinesisch","Chinese Traditional","Traditional Chinese","Chino tradicional","tradicional Chino"," "," ","Chinois traditionnel","traditionnel Chinois"," "," "," "," ","Bahasa Mandarin Tradisional","Tradisional Mandarin Bahasa","Cinese tradizionale","tradizionale Cinese",""," ",""," "," ","Cina Tradisional","Tradisional Cina","Chiski tradycyjny","tradycyjny Chiski","Chins tradicional","tradicional Chins","  ","  "," "," ","ince Geleneksel","Geleneksel ince"," "," ","Ting Trung phn th","phn th Ting Trung","","","","",""];function vr(t,e){const n=t.toLowerCase();for(const r of e)if(n.includes(r.toLowerCase()))return r.toLowerCase();return null}function zE(t,e){const n=t.toLowerCase();let r=-1;for(const a of e){const i=n.indexOf(a.toLowerCase());i!==-1&&(r===-1||i<r)&&(r=i)}return r}function iu(t){const e=vr(t,di);if(!e)return null;const n=vr(t,qE);if(!n)return null;const r=ou(t);if(r===null)return{type:"Image",keyword:`${e}|${n}`};{const{to:a}=r;return{type:"Image",keyword:`${e}|${n}|${a}`,to:a}}}function su(t){const e=vr(t,di);if(!e)return null;const n=t.toLowerCase();for(const[r,a]of Object.entries(WE))for(const i of a)if(n.includes(i.toLowerCase())){const s=`${e}|${i}`;return{type:r,keyword:s}}return{type:"File",keyword:""}}function jE(t){return t.replace(/[\(\][^)\]*[\)\]/g,"")}function ou(t){const e=new Map;let n=t;const r=vr(n,VE);r&&(e.set("zh-TW",r),n=n.replace(r,""));const a=vr(n,HE);a&&(e.set("zh-CN",a),n=n.replace(a,""));for(const i of Object.keys(Xi)){const s=Xi[i].language;for(const[o,l]of Object.entries(s)){if(e.has(o))continue;let c=jE(l).toLowerCase().trim();if(n.includes(c)){e.set(o,c);continue}if(c=c.replace(/$/,"").replace(/$/,""),n.includes(c)){e.set(o,c);continue}if(c=c.length>6?c.slice(0,-2):c,n.includes(c)){e.set(o,c);continue}}}if(nt.info("",Array.from(e)),e.size===0)return null;if(e.size===1){const i=e.values().next().value,s=e.keys().next().value,o=t.indexOf(i);let l=zE(t,di);return $E.test(t)&&(l=t.indexOf("")),o<l?null:{to:s}}if(e.size>1){const s=Array.from(e.entries()).map(([o,l])=>({key:o,index:t.indexOf(l)})).filter(o=>o.index!==-1).sort((o,l)=>o.index-l.index);if(s.length>=2)return nt.info("",{from:s[0].key,to:s[1].key},""),{from:s[0].key,to:s[1].key}}return null}function lu(t){const e=/([\u4e00-\u9fa5a-zA-Z]+)\s*\s*([\u4e00-\u9fa5a-zA-Z]+)/;let n=vr(t,di);if(e.test(t)&&(n=""),!n)return null;t=t.toLocaleLowerCase().replace(/\+/g," ");const r=ou(t);if(r===null)return null;const{from:a,to:i}=r;if(!a&&i){const s=`${n}|${i}`;return{to:i,keyword:s}}if(a&&i){const s=`${n}|${a}|${i}`;return{from:a,to:i,keyword:s}}return null}function uu(t){if(!zi){const n=new Set;for(const r of GE){const a=r.replace(/\s+/g,"");a.length>0&&n.add(a)}zi=Array.from(n)}t=t.replace(/[\+\s]/g,"");const e=vr(t,zi||[]);return e?{type:"Product",keyword:`${e}`}:null}const Bs=[{name:"google",pattern:/^(https?:\/\/)?(www\.)?google\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("center_col")),addMethod:(t,e)=>{if(e.getBoundingClientRect().width>750)return;let n=document.getElementById("rhs");if(!n){n=document.createElement("div"),n.id="rhs",n.style.display="block",n.style.width="fit-content";const r=e.parentElement;r==null||r.appendChild(n)}n.insertBefore(t,n.firstChild)}},{name:"bing",pattern:/^(https?:\/\/)?((www|cn)\.)?bing\.[a-z.]+\/search.*?[?&]q=([^&#]+)/i,getAnchorElement:()=>new Promise(t=>{setTimeout(()=>{t(document.getElementById("b_context"))},100)})},{name:"yahoo",pattern:/^(https?:\/\/)?([a-z]+\.)?search\.yahoo\.[a-z.]+\/search.*?[?&]p=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("right"))},{name:"duckduckgo",pattern:/^https?:\/\/(www\.)?duckduckgo\.com\/.*[?&]q=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.querySelector('[data-testid="sidebar"]'))},{name:"yandex",pattern:/^(https?:\/\/)?(www\.)?yandex\.[a-z.]+\/search\/?\?(?:.*?&)?text=([^&#]+)/i,getAnchorElement:()=>Promise.resolve(document.getElementById("search-result-aside")),urlChangeListener:!0}];function Qa(t){for(const e of Bs){const n=t.match(e.pattern);if(n){const r=decodeURIComponent(n[n.length-1]||"");return{name:e.name,query:r,urlChangeListener:!!e.urlChangeListener}}}return null}const YE={style:{display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"12px"}},XE=["src"],KE={style:{"font-weight":"600","font-size":"14px",color:"rgba(0, 0, 0, 0.9)"}},QE={style:{"font-size":"14px","font-weight":"400",color:"rgba(0, 0, 0, 0.9)","margin-bottom":"16px","line-height":"1.5"}},ZE=["accept"],JE=je({__name:"index",setup(t){const{t:e,locale:n}=Tt(),{onlineParams:r}=an(),a={TEXT:"text",FILE:"file",IMAGE:"image",PRODUCT:"product"};let i="",s="plugin_search_enginee_translate_file_card",o="",l="",c="";const u=C(null),f=C(a.FILE),h=C(""),b=C(""),S=Z(()=>Hr(n.value)),x=Z(()=>({[a.TEXT]:"plugin_search_engine_translate_text_card_translate",[a.IMAGE]:"plugin_search_engine_translate_image_card_translate",[a.FILE]:"plugin_search_engine_translate_file_card_translate",[a.PRODUCT]:"plugin_search_competitor_translate_file_card_translate"})[f.value]),N=()=>chrome.runtime.getURL("public/logo/icon-128.png"),_=J=>{k.reportClickEvent(s,J,{position:x.value})},E=()=>{_("settings"),ct(`${ye.userCenterPage}?position=${x.value}&source=plugin`)},g=()=>{f.value===a.TEXT?ct(`${ye.textTranslatePage}?position=${x.value}`):f.value===a.IMAGE?ct(`${ye.imagePage}?position=${x.value}`):ct(`${ye.translatorPage}?position=${x.value}`)},p=J=>J.replace(/\s/g,"-"),m=()=>{var J,q,W;if(f.value===a.TEXT){const oe=((J=gn(ye.defaultLanguage))==null?void 0:J.label)||"English",Y=p(((q=gn(l))==null?void 0:q.label)||oe),H=p(((W=gn(o))==null?void 0:W.label)||oe);ct(`${ye.textTranslatePage}/${Y}-to-${H}?position=${x.value}`),_("translate_now")}else if(f.value===a.IMAGE){const oe=new URL(ye.imagePage);c&&oe.searchParams.set("target_language",c),ct(`${oe.href}?position=${x.value}`),_("translate_now")}else{if(_("select_file"),!u.value)return;u.value.value="",u.value.click()}},d=J=>{var A,D;const q=(A=J.target.files)==null?void 0:A[0];if(!q)return;if(q.size>bc){ct(`${ye.fileTranslateRedirectPage}?file_load_error=OUT_OF_PLUGIN_PROXY_FILE_LIMIT&position=${x.value}`);return}const W=new Blob([q],{type:q.type}),oe=URL.createObjectURL(W),Y=q.type==="application/pdf",H=(D=r.value)==null?void 0:D.openPdfProPage,X=new URL(ye.fileTranslateRedirectPage);X.searchParams.set("pdf_url",encodeURIComponent(oe)),X.searchParams.set("file_name",encodeURIComponent(q.name)),X.searchParams.set("position",x.value),Y&&H&&X.searchParams.set("isPdf","1"),ct(X.href)};return ha(()=>{var F;const J=Qa(location.href);if(!J)return;const q=((F=gn(navigator.language))==null?void 0:F.value)||ye.defaultLanguage,W=ol(q).value;i=J.query;const oe=iu(i),Y=lu(i),H=su(i),X=uu(i);b.value=e("common.selectFile",{},{locale:W});const A=(H==null?void 0:H.type)||"File",D=A==="File"?e("common.files",{},{locale:W}):A,y=e("searchEngineInsert.free",{},{locale:W});if(h.value=e("searchEngineInsert.accurateTranslate",[D,y],{locale:W}),oe){f.value=a.IMAGE,b.value=e("searchEngineInsert.translateNow",{},{locale:W});const{to:G}=oe;c=G||"",h.value=e("searchEngineInsert.imageTranslate",{},{locale:W})}else if(Y){f.value=a.TEXT,b.value=e("searchEngineInsert.translateNow");const{from:G,to:K}=Y,de=e(`language.${K}`,{},{locale:W});if(o=K,l=G||ye.defaultLanguage,G){const ne=e(`language.${G}`,{},{locale:W});h.value=e("searchEngineInsert.translateFromTo",[ne,de],{locale:W})}else h.value=e("searchEngineInsert.translateTo",[de],{locale:W})}else X&&(f.value=a.PRODUCT,b.value=e("common.selectFile",{},{locale:W}),h.value=e("searchEngineInsert.flawlessLayoutExpertQuality",{},{locale:W}));s={[a.TEXT]:"plugin_search_enginee_translate_text_card",[a.FILE]:"plugin_search_enginee_translate_file_card",[a.IMAGE]:"plugin_search_enginee_translate_image_card",[a.PRODUCT]:"plugin_search_competitor_translate_file_card"}[f.value],k.reportShowEvent(s,{position:x.value})}),(J,q)=>(B(),re("div",{style:De([{fontFamily:S.value},{width:"336px","margin-bottom":"10px","margin-top":"10px",background:"rgba(255, 255, 255, 1)","border-radius":"16px",padding:"20px",border:"1px solid rgba(13, 13, 13, 0.12)",position:"relative","user-select":"none"}])},[T("div",YE,[T("div",{onClick:g,style:{display:"flex",cursor:"pointer","align-items":"center",gap:"8px"}},[T("img",{src:N(),style:{width:"20px",height:"20px"}},null,8,XE),T("div",KE,ce(J.$t("common.title")),1)]),fe(jt,{onClick:E,icon:"setting",size:28,style:{"margin-right":"-4px","margin-top":"-4px"}})]),T("div",QE,ce(h.value),1),T("button",{onClick:m,style:{display:"block",width:"100%",background:"rgba(237, 242, 255, 1)",border:"none","border-radius":"8px",padding:"12px",color:"rgba(41, 98, 255, 1)","font-weight":"600","font-size":"14px",cursor:"pointer"}},ce(b.value),1),T("input",{ref_key:"fileInput",ref:u,style:{display:"none"},type:"file",accept:j(wc),onChange:d},null,40,ZE)],4))}}),e_="wps-translate-search-enhance";let Vn=null,oa=null,Za="",Sr="";async function t_(t){var a;let e=0;const n=10,r=200;for(;e<n;){const i=await((a=Bs.find(s=>s.name===t))==null?void 0:a.getAnchorElement())||null;if(i)return i;await new Promise(s=>setTimeout(s,r)),e++}return null}async function n_(t,e){const n=await t_(t);if(!n)return;const r=Bs.find(a=>a.name===t);r&&(r.addMethod?r.addMethod(e,n):n.insertBefore(e,n.firstChild))}function r_(){Vn&&(Vn.remove(),Vn=null)}function cu(){const t=Qa(location.href);if(!t)return;const e=t.query,n=iu(e),r=lu(e),a=su(e),i=uu(e),s=Sr;if(n)Sr="image";else if(r)Sr="text";else if(a)Sr="file";else if(i)Sr="product";else return;s&&s!==Sr&&r_();const o=t.name;Vn=sr(e_,JE),n_(o,Vn),ti({name:ni.INJECTION,onDisconnect:()=>{Vn==null||Vn.remove(),Vn=null,as()}})}function a_(){const t=location.href;t!==Za&&(Za=t,setTimeout(()=>{cu()},300))}function as(){oa!==null&&(clearInterval(oa),oa=null)}function i_(){const t=Qa(location.href);t!=null&&t.urlChangeListener&&(oa!==null&&as(),Za=location.href,oa=window.setInterval(()=>{const e=Qa(location.href);if(!(e!=null&&e.urlChangeListener)){as();return}location.href!==Za&&a_()},2e3))}function s_(){ma()||(cu(),i_())}const du=["www.toolsmart.ai","test.toolsmart.ai"];function o_(){du.includes(window.location.hostname)&&sessionStorage.setItem("anydoc_plugin_install_flag","true")}function l_(){du.includes(window.location.hostname)&&sessionStorage.removeItem("anydoc_plugin_install_flag")}const u_=sl,Go="__wps-translate-entry-init-timestamp__";async function pu(){const t=await rt(Ee.TRANSLATE_TEXT);t&&window.postMessage({type:"translateText",source:"extension",data:{text:t}},window.location.origin)}async function fu(){const t=await rt(Ee.ON_BOARDING_TIME,Date.now());window.postMessage({type:"ping",source:"extension",data:{installTimestamp:t}},window.location.origin)}async function gu(){const t=await rt(Ee.CONFIGS);window.postMessage({type:"extensionSetting",source:"extension",data:t},window.location.origin)}function c_(){location.host===ye.webHost&&window.addEventListener("message",async t=>{t.source===window&&t.origin===window.location.origin&&t.data.source==="page"&&(nt.warn(`receive ${t.data.type} from web`),t.data.type==="ping"&&fu(),t.data.type==="getTranslateText"&&pu(),t.data.type==="clearTranslateText"&&Mr(Ee.TRANSLATE_TEXT),t.data.type==="getExtensionSetting"&&gu(),t.data.type==="getPdfContent"&&IE(t.data.data))})}async function d_(){location.host===ye.webHost&&(pu(),fu(),gu())}function p_(){const t=ui(location.href);if(!t||t!=null&&t.name&&![za.YOUTUBE].includes(t.name)||document.getElementById("anydoc-subtitle-inject"))return;const e=document.createElement("script");e.id="anydoc-subtitle-inject",e.src=chrome.runtime.getURL("public/subtitle/script/inject.js"),e.onload=()=>{},e.onerror=()=>{},document.head.appendChild(e)}function f_(){const t=+new Date;window[Go]=t;let e=!0,n=sr(u_,vE);document.documentElement.appendChild(n);const r=new MutationObserver(a=>{if(window[Go]!==t||!e){r.disconnect();return}a.forEach(i=>{i.type==="childList"&&!document.documentElement.contains(n)&&document.documentElement.appendChild(n)})});r.observe(document.documentElement,{childList:!0,subtree:!0}),ti({name:ni.INJECTION,onDisconnect:()=>{e=!1,r.disconnect(),n.remove(),n=null,l_()}}),UE(),c_(),p_(),s_(),d_(),o_()}f_();
